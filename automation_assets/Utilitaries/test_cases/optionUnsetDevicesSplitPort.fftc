<?xml version="1.0"?>
<testCase version="8.7.0.202112151246">
    <general>
        <language>Python</language>
    </general>
    <procedures>
        <item name="main">
            <steps>
                <item guid="db484780-0cc4-458b-8882-bc94ef363eb9" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Initialization</body>
                    </command>
                    <nestedSteps>
                        <item guid="e4643593-cbdb-4e23-ac13-e8cb59d684a7" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>reservationId = velocity(&quot;reservationId&quot;); print(reservationId)</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="none">
                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                        </extractorInfo>
                                        <processorInfo ruleType="message">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                <message>Found reservationId: &quot;[reservationId]&quot;</message>
                                                <tag sub="false" defaultValue=""/>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="6fc5ad20-e931-4d76-be98-975fce49c879" action="eval" skip="true" useFieldsInCommand="false">
                            <command>
                                <body>reservationId = &quot;86d63fcb-410d-4681-a05f-78663de0a45e&quot;</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="none">
                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                        </extractorInfo>
                                        <processorInfo ruleType="message">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                <message>Found reservationId: &quot;[reservationId]&quot;</message>
                                                <tag sub="false" defaultValue=""/>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="ff5332b6-4a11-4231-9099-c67000603d9b" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Init variable</body>
                            </command>
                            <nestedSteps>
                                <item guid="c8efefd9-9b8a-47fe-814e-f1d17653a743" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>ok=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="ce6877e3-ee6f-4857-8b80-fb98e86c729f" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Open sessions</body>
                    </command>
                    <nestedSteps>
                        <item guid="04886520-69b7-4798-99b3-a7f789db2ed7" action="open" session="velocity" useFieldsInCommand="false">
                            <command>
                                <body>application:com.fnfr.itest.applications.webservices.restful</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                <stepProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                <sessionProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulSessionProperties" url="https://10.210.107.10" url.inherit="false" version="2" version.inherit="false">
                                    <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" authenticationType="Basic" authenticationType.inherit="false" user="superadmin" user.inherit="false" password.masked="false" password="superadmin" password.inherit="false" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                </sessionProperties>
                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            </applicationProperties>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="f07757b0-7bc8-4422-b4cf-05b47c21b784" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Get the devices name from Velocity</body>
                    </command>
                    <nestedSteps>
                        <item guid="8f76f1aa-c838-45c4-8bac-8d1555d6fb46" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                            <command>
                                <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>mapped/Json/items/*[type = &quot;DEVICE&quot;]/name</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>device_name</storageLocation>
                                                <storeInAList>true</storeInAList>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                        </item>
                        <item guid="36cf8f06-6350-4535-8593-d8453910ba45" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>print(device_name)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="2c2cdb2c-07bf-494d-978b-c144eaa196df" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Filter devices in order to find fortigate firewalls</body>
                    </command>
                    <nestedSteps>
                        <item guid="5a781bec-44ef-40d5-8553-7066ba63ee40" action="for" useFieldsInCommand="false">
                            <command>
                                <body>device in device_name:</body>
                            </command>
                            <nestedSteps>
                                <item guid="29c79afa-8f5c-444b-9850-d32cde92965a" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                    <command>
                                        <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="query">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                        <query>mapped/Json/devices/item/id</query>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="store">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                        <storageLocation>device_id</storageLocation>
                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                            <item>
                                                <extractorInfo extractorType="query">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                        <query>mapped/Json/devices/item/properties/item[name = &apos;Console&apos;]/value</query>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="store">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                        <storageLocation>device_console_ip_addr</storageLocation>
                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                            <item>
                                                <extractorInfo extractorType="query">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                        <query>mapped/Json/devices/item/properties/item[name = &apos;Console Port&apos;]/value</query>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="store">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                        <storageLocation>device_console_port</storageLocation>
                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                            <item>
                                                <extractorInfo extractorType="query">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                        <query>mapped/Json/devices/item/properties/item[name = &apos;username&apos;]/value</query>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="store">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                        <storageLocation>device_username</storageLocation>
                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                            <item>
                                                <extractorInfo extractorType="query">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                        <query>mapped/Json/devices/item/properties/item[name = &apos;password&apos;]/value</query>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="store">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                        <storageLocation>device_password</storageLocation>
                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                            <item>
                                                <extractorInfo extractorType="query">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                        <query>mapped/Json/devices/item/templateId</query>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="store">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                        <storageLocation>template_id</storageLocation>
                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]" action.inherit="false"/>
                                </item>
                                <item guid="b143ff62-0847-42fb-a109-fdf48a77c0dc" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                    <command>
                                        <body>/velocity/api/inventory/v16/template/[template_id]</body>
                                    </command>
                                    <postProcessing>
                                        <analysisRules>
                                            <item>
                                                <extractorInfo extractorType="query">
                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                        <query>mapped/Json/name</query>
                                                    </extractorProperties>
                                                </extractorInfo>
                                                <processorInfo ruleType="store">
                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                        <storageLocation>template_name</storageLocation>
                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                    </ruleProperties>
                                                </processorInfo>
                                            </item>
                                        </analysisRules>
                                    </postProcessing>
                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/template/[template_id]" action.inherit="false"/>
                                </item>
                                <item guid="d2bbaac6-c04f-4f8f-9461-f7fea9f02a2f" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>print(template_name)</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="ade5fd2b-6006-4651-b023-1a1a7733bfdb" action="if" useFieldsInCommand="false">
                                    <command>
                                        <body>template_name != &quot;Fortigate Firewall&quot;:</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="d9c9bcc6-3318-4c65-9386-154bf3313b58" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>device_name.remove(device)</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="5f219ab2-e0b6-4225-ad10-6cdb7c20bb98" action="else" useFieldsInCommand="false">
                                    <nestedSteps>
                                        <item guid="b88fd07a-31e2-4376-acb8-172ca4ccce64" action="comment" useFieldsInCommand="false">
                                            <command>
                                                <body>Insert steps here for when expression is false</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="7a247e57-53f0-4841-a30f-35a883d7e323" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>print(device_name)</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="9b33a836-b0c4-4e4d-b472-3dbb7bf1de06" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Unset split port on each fortigate and its neighbor-devices or skip operation</body>
                    </command>
                    <nestedSteps>
                        <item guid="ebcf1d6b-eca6-4fa2-a190-6909373b6048" action="for" useFieldsInCommand="false">
                            <command>
                                <body>device in device_name:</body>
                            </command>
                            <nestedSteps>
                                <item guid="49320c63-dd13-4dfe-97fe-e3dea87c16b2" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>get device details</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="67d2beea-883c-4138-b958-68e796375ff8" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                            <command>
                                                <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                <query>mapped/Json/devices/item/id</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>device_id</storageLocation>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console&apos;]/value</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>device_console_ip_addr</storageLocation>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console Port&apos;]/value</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>device_console_port</storageLocation>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;username&apos;]/value</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>device_username</storageLocation>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;password&apos;]/value</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>device_password</storageLocation>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                <query>mapped/Json/devices/item/templateId</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>template_id</storageLocation>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]" action.inherit="false"/>
                                        </item>
                                        <item guid="9824fa30-7e24-4033-9dd9-47061d9a826c" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                            <command>
                                                <body>/velocity/api/inventory/v16/template/[template_id]</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                <query>mapped/Json/name</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>template_name</storageLocation>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/template/[template_id]" action.inherit="false"/>
                                        </item>
                                        <item guid="6a7108d3-a8ca-405b-8175-350279f401f2" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                            <command>
                                                <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query sub="true">mapped/Json/items/*\\[inventoryParentResourceId=&quot;[device_id]&quot;]/name</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>device_port</storageLocation>
                                                                <storeInAList>true</storeInAList>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                        </item>
                                        <item guid="9ea665ed-fa66-4b93-b846-11462a9fd6a3" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>print(device_port)</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="a16745fd-6180-49b2-97e4-495cb32ae474" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                            <command>
                                                <body>/velocity/api/inventory/v16/device/[device_id]/ports?limit=200</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>mapped/Json/ports/item[*]/name</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>all_device_ports</storageLocation>
                                                                <storeInAList>true</storeInAList>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/ports?limit=200" action.inherit="false"/>
                                        </item>
                                        <item guid="c4a763da-cc69-4e85-b882-3a72875166d4" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>print(all_device_ports)</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="e65cfb62-479f-46ac-b970-1788306f1b8d" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>check the ports and unsplit or skip operation</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="d31e0ea0-d311-4a2b-8ef7-de77bf30437c" action="for" useFieldsInCommand="false">
                                            <command>
                                                <body>port in device_port:</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="64535fc7-a0eb-402e-a66c-804fbeb050e0" action="if" useFieldsInCommand="false">
                                                    <command>
                                                        <body>str(port)+&quot;/1&quot; and str(port)+&quot;/2&quot; and str(port)+&quot;/3&quot; and str(port)+&quot;/4&quot; in all_device_ports:</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="ed2d0f3d-667b-4b5b-a6d4-c4f3cecc65ff" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>ok.append(&quot;true&quot;)</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="6cdba865-856a-446b-97dc-7eb21157a604" action="comment" useFieldsInCommand="false">
                                                            <command>
                                                                <body>Unset split port commands on device </body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="ddfe6f10-5eb5-4f97-9d7d-3573a9e689c1" action="comment" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>open session</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="8dac4384-4fb3-4229-86c3-537eb454ed8e" action="open" session="fortigate">
                                                                            <command>
                                                                                <body>project://Fortigate_console/session_profiles/console.ffsp</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                    <completionProperties>
                                                                                        <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                    </completionProperties>
                                                                                </stepProperties>
                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                    <ipAddress inherit="false">[device_console_ip_addr]</ipAddress>
                                                                                    <port inherit="false">[device_console_port]</port>
                                                                                </sessionProperties>
                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                            </applicationProperties>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="b4cdbee7-3c38-4960-b170-0055db1d94dd" action="comment" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>console login and unset split port</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="7a6d3490-0368-4319-a339-a854fb3d77d5" action="unsetSplitPort" session="fortigate" useFieldsInCommand="false">
                                                                            <postProcessing>
                                                                                <analysisRules>
                                                                                    <item>
                                                                                        <extractorInfo extractorType="query">
                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                <query>retCode()</query>
                                                                                            </extractorProperties>
                                                                                        </extractorInfo>
                                                                                        <processorInfo ruleType="assert">
                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                <actionsWhenTrue>
                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                            <message>For &quot;[device]&quot; - &quot;[port]&quot;: unset split-port command is ok</message>
                                                                                                        </actionProperties>
                                                                                                    </item>
                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                    </item>
                                                                                                </actionsWhenTrue>
                                                                                                <actionsWhenFalse>
                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                            <message>For &quot;[device]&quot;: unset split-port command is not ok</message>
                                                                                                        </actionProperties>
                                                                                                    </item>
                                                                                                    <item actionId="FailTest">
                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                    </item>
                                                                                                </actionsWhenFalse>
                                                                                            </ruleProperties>
                                                                                        </processorInfo>
                                                                                    </item>
                                                                                </analysisRules>
                                                                            </postProcessing>
                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="c059b400-ba15-41bd-85bd-227d8915a48e" action="comment" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>wait for device to reboot</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="7bfbac72-0b21-421f-a3c2-b0527a036cee" action="sleep">
                                                                            <command>
                                                                                <body>10</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                        </item>
                                                                        <item guid="d45cf818-61ec-48f1-b448-ae134acdc3bf" action="command" session="fortigate">
                                                                            <command>
                                                                                <body>Q</body>
                                                                            </command>
                                                                            <postProcessing>
                                                                                <analysisRules>
                                                                                    <item>
                                                                                        <extractorInfo extractorType="query">
                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                <query>promptName()</query>
                                                                                            </extractorProperties>
                                                                                        </extractorInfo>
                                                                                        <processorInfo ruleType="assert">
                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                <expression>str(value) == &quot;prompt1&quot; or str(value) == &quot;prompt2&quot;</expression>
                                                                                                <actionsWhenTrue>
                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                            <message>For &quot;[device]&quot;: device console ip addr &quot;[device_console_ip_addr]&quot; port &quot;[device_console_port]&quot; is operational</message>
                                                                                                        </actionProperties>
                                                                                                    </item>
                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                    </item>
                                                                                                </actionsWhenTrue>
                                                                                                <actionsWhenFalse>
                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                            <message>--- need to wait for prompt...</message>
                                                                                                        </actionProperties>
                                                                                                    </item>
                                                                                                    <item actionId="RepeatStep">
                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                    </item>
                                                                                                </actionsWhenFalse>
                                                                                            </ruleProperties>
                                                                                        </processorInfo>
                                                                                    </item>
                                                                                </analysisRules>
                                                                            </postProcessing>
                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                <promptProperties>
                                                                                    <stepPrompts>
                                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                                            <Content sub="true">* login:</Content>
                                                                                        </item>
                                                                                        <item name="prompt2" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                            <Content sub="true">* #</Content>
                                                                                        </item>
                                                                                        <item name="prompt3">
                                                                                            <Content>Password:</Content>
                                                                                        </item>
                                                                                        <item name="prompt4">
                                                                                            <Content>--More-- </Content>
                                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                                        </item>
                                                                                        <item name="prompt5">
                                                                                            <Content>Do you want to continue? (y/n)</Content>
                                                                                        </item>
                                                                                        <item name="prompt6" MatchMethod="WILDCARD">
                                                                                            <Content sub="true">* (*) #</Content>
                                                                                        </item>
                                                                                        <item name="prompt7" MatchMethod="WILDCARD">
                                                                                            <Content sub="true">*:</Content>
                                                                                        </item>
                                                                                        <item name="prompt8" MatchMethod="WILDCARD">
                                                                                            <Content sub="true">*</Content>
                                                                                        </item>
                                                                                    </stepPrompts>
                                                                                </promptProperties>
                                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                </completionProperties>
                                                                            </applicationProperties>
                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="3940bb0c-89ff-4770-98d9-2d03c6d3e006" action="comment" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>update device ports</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="f7abc4e7-29e3-4fe8-aa13-bc0f98972b61" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                            <command>
                                                                                <body>/velocity/api/inventory/v16/device/[device_id]/ports?limit=200</body>
                                                                            </command>
                                                                            <postProcessing>
                                                                                <analysisRules>
                                                                                    <item>
                                                                                        <extractorInfo extractorType="query">
                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                <query>mapped/Json/ports/item[*]/name</query>
                                                                                            </extractorProperties>
                                                                                        </extractorInfo>
                                                                                        <processorInfo ruleType="store">
                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                <storageLocation>device_ports</storageLocation>
                                                                                                <storeInAList>true</storeInAList>
                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                            </ruleProperties>
                                                                                        </processorInfo>
                                                                                    </item>
                                                                                    <item>
                                                                                        <extractorInfo extractorType="query">
                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                <query>mapped/Json/ports/item[*]/id</query>
                                                                                            </extractorProperties>
                                                                                        </extractorInfo>
                                                                                        <processorInfo ruleType="store">
                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                <storageLocation>device_port_ids</storageLocation>
                                                                                                <storeInAList>true</storeInAList>
                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                            </ruleProperties>
                                                                                        </processorInfo>
                                                                                    </item>
                                                                                </analysisRules>
                                                                            </postProcessing>
                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/ports?limit=200" action.inherit="false"/>
                                                                        </item>
                                                                        <item guid="d9ddedbf-5d3f-4ae2-a91e-cfcd9c227c48" action="if" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>str(port)+&quot;/1&quot; in device_ports:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="824712f4-5244-4790-a469-4efbee1b3dda" action="eval" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>portId=device_port_ids[device_ports.index(str(port)+&quot;/1&quot;)]</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="b69bc27c-0e41-422e-8989-d7b6e1fb17af" action="DELETE" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                    <command>
                                                                                        <body>/velocity/api/inventory/v16/device/[device_id]/port/[portId]</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/port/[portId]" action.inherit="false"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="b75fed25-b930-4623-807c-a389144a1670" action="if" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>str(port)+&quot;/2&quot; in device_ports:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="8be17ebd-d873-4e3f-8c91-b177648411ec" action="eval" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>portId=device_port_ids[device_ports.index(str(port)+&quot;/2&quot;)]</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="e8957ed6-35e2-4b01-acc4-8440cfdbc0f6" action="DELETE" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                    <command>
                                                                                        <body>/velocity/api/inventory/v16/device/[device_id]/port/[portId]</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/port/[portId]" action.inherit="false"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="768da089-07c2-4729-a79d-830c905e9a55" action="if" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>str(port)+&quot;/3&quot; in device_ports:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="c5a6f714-60b1-4766-bf30-3368225c1527" action="eval" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>portId=device_port_ids[device_ports.index(str(port)+&quot;/3&quot;)]</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="0db5bcaf-ae27-4c28-8cd4-c407519286fa" action="DELETE" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                    <command>
                                                                                        <body>/velocity/api/inventory/v16/device/[device_id]/port/[portId]</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/port/[portId]" action.inherit="false"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="82d24440-5650-433a-92f9-5ac86fcfcf71" action="if" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>str(port)+&quot;/4&quot; in device_ports:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="3ea545a5-8e3f-4c60-9f9f-033f21d7bf32" action="eval" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>portId=device_port_ids[device_ports.index(str(port)+&quot;/4&quot;)]</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="3827b0a3-1545-4e71-a67e-08661cf26c46" action="DELETE" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                    <command>
                                                                                        <body>/velocity/api/inventory/v16/device/[device_id]/port/[portId]</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/port/[portId]" action.inherit="false"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="9d8e2d37-0c9b-42ea-9f6f-3b4880ef90bb" action="comment" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>close session</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="6a10cbb4-f672-432f-b1fc-3b0ec9bde4c6" action="close" session="fortigate">
                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="5f0d7ff7-4a28-401c-be98-bf3d0ac758d1" action="comment" useFieldsInCommand="false">
                                                            <command>
                                                                <body>Unset split command on neighbor-devices based on port</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="b072a2a9-98bc-4c74-b952-28e7e9ba1b30" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>device_port=port</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="acb63045-6277-4326-8cb3-b98e3bc5291f" action="comment" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>Get neighbor-device details</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="ba388c3b-5875-40c0-aa37-26463acf0d88" action="open" session="session" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>application:com.fnfr.itest.applications.webservices.restful</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                <stepProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                <sessionProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulSessionProperties" url="https://10.210.107.10" url.inherit="false" version="2" version.inherit="false">
                                                                                    <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" authenticationType="Basic" authenticationType.inherit="false" user="superadmin" user.inherit="false" password.masked="false" password="superadmin" password.inherit="false" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                </sessionProperties>
                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                            </applicationProperties>
                                                                        </item>
                                                                        <item guid="f37959a6-d930-408f-af6f-477098af205f" action="GET" session="session" estimatedStepExecutionTime="0.305">
                                                                            <command>
                                                                                <body>/velocity/api/inventory/v16/device/[device_id]/ports?limit=200</body>
                                                                            </command>
                                                                            <postProcessing>
                                                                                <analysisRules>
                                                                                    <item>
                                                                                        <extractorInfo extractorType="query">
                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                <query sub="true">mapped/Json/ports/*\\[name=&quot;[device_port]&quot;]/connectedPortName</query>
                                                                                            </extractorProperties>
                                                                                        </extractorInfo>
                                                                                        <processorInfo ruleType="store">
                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                <storageLocation>conn_port_name</storageLocation>
                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                            </ruleProperties>
                                                                                        </processorInfo>
                                                                                    </item>
                                                                                    <item>
                                                                                        <extractorInfo extractorType="query">
                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                <query sub="true">mapped/Json/ports/*\\[name=&quot;[device_port]&quot;]/connectedPortParentName</query>
                                                                                            </extractorProperties>
                                                                                        </extractorInfo>
                                                                                        <processorInfo ruleType="store">
                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                <storageLocation>conn_device_name</storageLocation>
                                                                                                <storeInAList>true</storeInAList>
                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                            </ruleProperties>
                                                                                        </processorInfo>
                                                                                    </item>
                                                                                </analysisRules>
                                                                            </postProcessing>
                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/ports?limit=200" action.inherit="false"/>
                                                                        </item>
                                                                        <item guid="210522ea-859a-425b-b4d6-7c62f51671af" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(conn_port_name, conn_device_name)</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="1f8f4177-b4c9-47c9-a577-02153f50c3df" action="GET" session="session" estimatedStepExecutionTime="0.305">
                                                                            <command>
                                                                                <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[conn_device_name]</body>
                                                                            </command>
                                                                            <postProcessing>
                                                                                <analysisRules>
                                                                                    <item>
                                                                                        <extractorInfo extractorType="query">
                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                <query>mapped/Json/devices/item/id</query>
                                                                                            </extractorProperties>
                                                                                        </extractorInfo>
                                                                                        <processorInfo ruleType="store">
                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                <storageLocation>conn_device_id</storageLocation>
                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                            </ruleProperties>
                                                                                        </processorInfo>
                                                                                    </item>
                                                                                    <item>
                                                                                        <extractorInfo extractorType="query">
                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                <query>mapped/Json/devices/item/templateId</query>
                                                                                            </extractorProperties>
                                                                                        </extractorInfo>
                                                                                        <processorInfo ruleType="store">
                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                <storageLocation>conn_template_id</storageLocation>
                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                            </ruleProperties>
                                                                                        </processorInfo>
                                                                                    </item>
                                                                                </analysisRules>
                                                                            </postProcessing>
                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[conn_device_name]" action.inherit="false"/>
                                                                        </item>
                                                                        <item guid="4a388dbc-1e04-4c62-8f02-4f8d350fc1aa" action="GET" session="session" estimatedStepExecutionTime="0.305">
                                                                            <command>
                                                                                <body>/velocity/api/inventory/v16/device/[conn_device_id]</body>
                                                                            </command>
                                                                            <postProcessing>
                                                                                <analysisRules>
                                                                                    <item>
                                                                                        <extractorInfo extractorType="query">
                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                <query>mapped/Json/properties/*[name=&quot;ipAddress&quot;]/value</query>
                                                                                            </extractorProperties>
                                                                                        </extractorInfo>
                                                                                        <processorInfo ruleType="store">
                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                <storageLocation>conn_device_ip_addr</storageLocation>
                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                            </ruleProperties>
                                                                                        </processorInfo>
                                                                                    </item>
                                                                                    <item>
                                                                                        <extractorInfo extractorType="query">
                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                <query>mapped/Json/properties/*[name=&quot;Console&quot;]/value</query>
                                                                                            </extractorProperties>
                                                                                        </extractorInfo>
                                                                                        <processorInfo ruleType="store">
                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                <storageLocation>conn_device_console_ip_addr</storageLocation>
                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                            </ruleProperties>
                                                                                        </processorInfo>
                                                                                    </item>
                                                                                    <item>
                                                                                        <extractorInfo extractorType="query">
                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                <query>mapped/Json/properties/*[name=&quot;Console Port&quot;]/value</query>
                                                                                            </extractorProperties>
                                                                                        </extractorInfo>
                                                                                        <processorInfo ruleType="store">
                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                <storageLocation>conn_device_console_port</storageLocation>
                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                            </ruleProperties>
                                                                                        </processorInfo>
                                                                                    </item>
                                                                                    <item>
                                                                                        <extractorInfo extractorType="query">
                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                <query>mapped/Json/properties/*[name=&quot;username&quot;]/value</query>
                                                                                            </extractorProperties>
                                                                                        </extractorInfo>
                                                                                        <processorInfo ruleType="store">
                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                <storageLocation>conn_device_username</storageLocation>
                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                            </ruleProperties>
                                                                                        </processorInfo>
                                                                                    </item>
                                                                                    <item>
                                                                                        <extractorInfo extractorType="query">
                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                <query>mapped/Json/properties/*[name=&quot;password&quot;]/value</query>
                                                                                            </extractorProperties>
                                                                                        </extractorInfo>
                                                                                        <processorInfo ruleType="store">
                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                <storageLocation>conn_device_password</storageLocation>
                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                            </ruleProperties>
                                                                                        </processorInfo>
                                                                                    </item>
                                                                                </analysisRules>
                                                                            </postProcessing>
                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]" action.inherit="false"/>
                                                                        </item>
                                                                        <item guid="db36c5a1-4fe1-4147-8727-f1dd9bdc0029" action="GET" session="session" estimatedStepExecutionTime="0.305">
                                                                            <command>
                                                                                <body>/velocity/api/inventory/v16/template/[conn_template_id]</body>
                                                                            </command>
                                                                            <postProcessing>
                                                                                <analysisRules>
                                                                                    <item>
                                                                                        <extractorInfo extractorType="query">
                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                <query>mapped/Json/name</query>
                                                                                            </extractorProperties>
                                                                                        </extractorInfo>
                                                                                        <processorInfo ruleType="store">
                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                <storageLocation>conn_template_name</storageLocation>
                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                            </ruleProperties>
                                                                                        </processorInfo>
                                                                                    </item>
                                                                                </analysisRules>
                                                                            </postProcessing>
                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/template/[conn_template_id]" action.inherit="false"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="b09268e8-2714-48d1-9fef-a1a10e5f7d7c" action="comment" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>Unset split port commands on neighbor-device</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="c8f17205-42bd-4fea-a91a-35c312e11287" action="if" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>str(conn_template_name) == &quot;Fortinet Switch&quot;:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="327bcab9-d5c4-4ec0-afb4-82ef3ece26fc" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>open session</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="7111ca3c-61d2-451e-a14d-90375fd5395c" action="open" session="fortiswitch" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>project://Fortiswitch_console/session_profiles/console.ffsp</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                    <completionProperties>
                                                                                                        <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                    </completionProperties>
                                                                                                </stepProperties>
                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                    <ipAddress inherit="false">[conn_device_console_ip_addr]</ipAddress>
                                                                                                    <port inherit="false">[conn_device_console_port]</port>
                                                                                                </sessionProperties>
                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                            </applicationProperties>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="7921aef5-1293-470d-ae93-380181d4bed2" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>console login and unset port phy-mode</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="2d3d030c-1032-45fc-befc-812a441b8f22" action="consoleLogin" session="fortiswitch" useFieldsInCommand="false">
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                <query>retCode()</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="assert">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                <actionsWhenFalse>
                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                            <message>--- console login not ok; fail test</message>
                                                                                                                        </actionProperties>
                                                                                                                    </item>
                                                                                                                    <item actionId="FailTest">
                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                    </item>
                                                                                                                </actionsWhenFalse>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                        </item>
                                                                                        <item guid="983c03b9-1ff8-4ffe-8d9f-52b9c6bed416" action="unsetSwitchPhyMode" session="fortiswitch" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>-port [conn_port_name]</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                <query>retCode()</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="assert">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                <actionsWhenTrue>
                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                            <message>For &quot;[conn_device_name]&quot;: unset port phy-mode command for port &quot;[conn_port_name]&quot; is ok</message>
                                                                                                                        </actionProperties>
                                                                                                                    </item>
                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                    </item>
                                                                                                                </actionsWhenTrue>
                                                                                                                <actionsWhenFalse>
                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                            <message>For &quot;[conn_device_name]&quot;: unset port phy-mode command for port &quot;[conn_port_name]&quot; is not ok</message>
                                                                                                                        </actionProperties>
                                                                                                                    </item>
                                                                                                                    <item actionId="FailTest">
                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                    </item>
                                                                                                                </actionsWhenFalse>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="4a692350-8e95-4512-919c-26f750a76638" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>wait for device to reboot</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="84cb63fe-719e-4c4b-9542-8507d564ee65" action="sleep">
                                                                                            <command>
                                                                                                <body>10</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                        </item>
                                                                                        <item guid="57573172-0c92-43d1-91f8-7f465325b154" action="command" session="fortiswitch">
                                                                                            <command>
                                                                                                <body>Q</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                <query>promptName()</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="assert">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                <expression>str(value) == &quot;prompt1&quot; or str(value) == &quot;prompt2&quot;</expression>
                                                                                                                <actionsWhenTrue>
                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                            <message>For &quot;[conn_device_name]&quot;: device console ip addr &quot;[conn_device_console_ip_addr]&quot; port &quot;[conn_device_console_port]&quot; is operational</message>
                                                                                                                        </actionProperties>
                                                                                                                    </item>
                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                    </item>
                                                                                                                </actionsWhenTrue>
                                                                                                                <actionsWhenFalse>
                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                            <message>--- need to wait for prompt...</message>
                                                                                                                        </actionProperties>
                                                                                                                    </item>
                                                                                                                    <item actionId="RepeatStep">
                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                    </item>
                                                                                                                </actionsWhenFalse>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                                <promptProperties>
                                                                                                    <stepPrompts>
                                                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                                                            <Content sub="true">* login:</Content>
                                                                                                        </item>
                                                                                                        <item name="prompt2" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                                            <Content sub="true">* #</Content>
                                                                                                        </item>
                                                                                                        <item name="prompt3">
                                                                                                            <Content>Password:</Content>
                                                                                                        </item>
                                                                                                        <item name="prompt4">
                                                                                                            <Content>--More-- </Content>
                                                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                                                        </item>
                                                                                                        <item name="prompt5">
                                                                                                            <Content>Do you want to continue? (y/n)</Content>
                                                                                                        </item>
                                                                                                        <item name="prompt6" MatchMethod="WILDCARD">
                                                                                                            <Content sub="true">* (*) #</Content>
                                                                                                        </item>
                                                                                                        <item name="prompt7" MatchMethod="WILDCARD">
                                                                                                            <Content sub="true">*:</Content>
                                                                                                        </item>
                                                                                                        <item name="prompt8" MatchMethod="WILDCARD">
                                                                                                            <Content sub="true">*</Content>
                                                                                                        </item>
                                                                                                    </stepPrompts>
                                                                                                </promptProperties>
                                                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                </completionProperties>
                                                                                            </applicationProperties>
                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="9fe6de66-908e-4e00-8ea9-79eda101af01" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>discover and update neighbor-device ports</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="764feaa6-b151-4cf0-a438-dcaa28f266a4" action="GET" session="session" estimatedStepExecutionTime="0.305">
                                                                                            <command>
                                                                                                <body>/velocity/api/inventory/v16/device/[conn_device_id]/ports?limit=200</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                <query>mapped/Json/ports/item[*]/name</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>conn_device_ports</storageLocation>
                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                <query>mapped/Json/ports/item[*]/id</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>conn_device_port_ids</storageLocation>
                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/ports?limit=200" action.inherit="false"/>
                                                                                        </item>
                                                                                        <item guid="647afc65-7070-47c4-9f5f-0d34ecb53e46" action="if" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>str(conn_port_name)+&quot;.1&quot; in conn_device_ports:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="1f636ce3-cc82-41de-ac12-d695eff2fb75" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>portId=conn_device_port_ids[conn_device_ports.index(str(conn_port_name)+&quot;.1&quot;)]</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="a63d9357-e75d-430e-b6b5-9acae291b907" action="DELETE" session="session" estimatedStepExecutionTime="0.305">
                                                                                                    <command>
                                                                                                        <body>/velocity/api/inventory/v16/device/[conn_device_id]/port/[portId]</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/port/[portId]" action.inherit="false"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="9a75505a-60b0-4d44-82ca-2a44e448bb0a" action="if" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>str(conn_port_name)+&quot;.2&quot; in conn_device_ports:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="1621766e-b2c9-4e41-bb6c-507af58dfea4" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>portId=conn_device_port_ids[conn_device_ports.index(str(conn_port_name)+&quot;.2&quot;)]</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="21d92c01-5fc3-48b3-869d-5c8e9a2812ea" action="DELETE" session="session" estimatedStepExecutionTime="0.305">
                                                                                                    <command>
                                                                                                        <body>/velocity/api/inventory/v16/device/[conn_device_id]/port/[portId]</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/port/[portId]" action.inherit="false"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="093f5127-9743-4043-99fa-0ad0713027fd" action="if" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>str(conn_port_name)+&quot;.3&quot; in conn_device_ports:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="394de12f-b1e1-42ab-a9a8-63511e0abb25" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>portId=conn_device_port_ids[conn_device_ports.index(str(conn_port_name)+&quot;.3&quot;)]</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="984aadd7-e4ce-4de1-8b03-1c106bf1bac6" action="DELETE" session="session" estimatedStepExecutionTime="0.305">
                                                                                                    <command>
                                                                                                        <body>/velocity/api/inventory/v16/device/[conn_device_id]/port/[portId]</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/port/[portId]" action.inherit="false"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="404999fd-2e17-4591-a375-69175af3b45e" action="if" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>str(conn_port_name)+&quot;.4&quot; in conn_device_ports:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="53f4d964-8272-4c14-ada4-fd7dc6daba6a" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>portId=conn_device_port_ids[conn_device_ports.index(str(conn_port_name)+&quot;.4&quot;)]</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="d080f4b7-7b3c-4dad-8a09-42cdce4df8f6" action="DELETE" session="session" estimatedStepExecutionTime="0.305">
                                                                                                    <command>
                                                                                                        <body>/velocity/api/inventory/v16/device/[conn_device_id]/port/[portId]</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/port/[portId]" action.inherit="false"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="84a43312-8424-4fb5-ac2a-e543e5d6af5f" action="POST" session="session">
                                                                                            <command>
                                                                                                <body>/velocity/api/inventory/v16/device/[conn_device_id]/action?type=discover</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="none">
                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="message">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                <message> Waiting for discover operation on [conn_device_name]</message>
                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                                    <memberClasses>
                                                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                                    </memberClasses>
                                                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                                </httpHeader>
                                                                                            </applicationProperties>
                                                                                        </item>
                                                                                        <item guid="70cc0787-49d7-412f-a7b2-8a8f122aab96" action="sleep">
                                                                                            <command>
                                                                                                <body>10</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="dd382feb-1c88-40ed-9dfb-3af44c513cf3" action="consoleLogin" session="fortiswitch" useFieldsInCommand="false">
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                <query>retCode()</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="assert">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                <actionsWhenFalse>
                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                            <message>--- console login not ok; fail test</message>
                                                                                                                        </actionProperties>
                                                                                                                    </item>
                                                                                                                    <item actionId="FailTest">
                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                    </item>
                                                                                                                </actionsWhenFalse>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                        </item>
                                                                                        <item guid="a6da51e6-dac9-4997-b414-ab2e4227bd54" action="command" session="fortiswitch">
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                <query>promptName()</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="assert">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                <expression>str(value) == &quot;prompt1&quot; </expression>
                                                                                                                <actionsWhenTrue>
                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                            <message>For &quot;[conn_device_name]&quot;: discover operation was successfully</message>
                                                                                                                        </actionProperties>
                                                                                                                    </item>
                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                    </item>
                                                                                                                </actionsWhenTrue>
                                                                                                                <actionsWhenFalse>
                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                                                        </actionProperties>
                                                                                                                    </item>
                                                                                                                    <item actionId="RepeatStep">
                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                    </item>
                                                                                                                </actionsWhenFalse>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                                <promptProperties>
                                                                                                    <stepPrompts>
                                                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                                                            <Content sub="true">* login:</Content>
                                                                                                        </item>
                                                                                                        <item name="prompt2" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                                            <Content sub="true">* #</Content>
                                                                                                        </item>
                                                                                                        <item name="prompt3">
                                                                                                            <Content>Password:</Content>
                                                                                                        </item>
                                                                                                        <item name="prompt4">
                                                                                                            <Content>--More-- </Content>
                                                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                                                        </item>
                                                                                                        <item name="prompt5">
                                                                                                            <Content>Do you want to continue? (y/n)</Content>
                                                                                                        </item>
                                                                                                        <item name="prompt6" MatchMethod="WILDCARD">
                                                                                                            <Content sub="true">* (*) #</Content>
                                                                                                        </item>
                                                                                                        <item name="prompt7" MatchMethod="WILDCARD">
                                                                                                            <Content sub="true">*:</Content>
                                                                                                        </item>
                                                                                                        <item name="prompt8" MatchMethod="WILDCARD">
                                                                                                            <Content sub="true">*</Content>
                                                                                                        </item>
                                                                                                    </stepPrompts>
                                                                                                </promptProperties>
                                                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                </completionProperties>
                                                                                            </applicationProperties>
                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="29e72474-9527-4857-9134-4dec80de4407" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>close session</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="ae63f565-8264-4a29-a2a5-0a591cb0a285" action="close" session="fortiswitch">
                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                        </item>
                                                                                        <item guid="4b70c59e-7f36-4d78-a5aa-e49911ff608b" action="close" session="session">
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="194ec71e-b0d0-4ae9-9a61-af85308db907" action="if" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>str(conn_template_name) == &quot;Lepton ColdFusion Switch&quot;:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="39714337-1165-485f-a84a-4edc0ef278a8" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>open session</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="9fae3130-d97b-4054-a1cb-b058e2b030ab" action="open" session="fortiLepton" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>project://Fortigate_console/session_profiles/console.ffsp</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                    <completionProperties>
                                                                                                        <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                    </completionProperties>
                                                                                                </stepProperties>
                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                    <ipAddress inherit="false">[device_console_ip_addr]</ipAddress>
                                                                                                    <port inherit="false">[device_console_port]</port>
                                                                                                </sessionProperties>
                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                            </applicationProperties>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="ed7831fa-b285-4e23-901e-37f04f3b256b" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>get protocol</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="ae8420ce-f333-4378-9a2f-d37cee0fbde4" action="getPortSpeed" session="fortiLepton" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>-port [device_port]</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                <query>responseLine()</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>port_speed</storageLocation>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                                <storeResponseAt>speedOutput</storeResponseAt>
                                                                                                <storeResponseText>true</storeResponseText>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                        </item>
                                                                                        <item guid="130c8143-cd41-4a8a-a96a-41695b8b7e01" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(port_speed)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="d87eb07b-ccf8-4f50-9efc-7a4d222f3e27" action="if" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>port_speed != &quot;&quot;:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="31238a2a-8185-40ee-b8d4-90b5360a8db3" action="if" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>int(port_speed) == 100:</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="276668d3-9a25-4a3e-81d3-547a1969e1a0" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>protocol=&quot;eth-100g&quot;</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="006da51b-f479-4a8c-84de-b92edca630bc" action="elif" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>int(port_speed) == 40000:</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="bcee811d-2e78-45df-9f82-9e401fab6b27" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>protocol=&quot;eth-40g&quot;</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="5cd8c8ef-18e4-4167-bf04-0f58e4877dae" action="else" useFieldsInCommand="false">
                                                                                            <nestedSteps>
                                                                                                <item guid="dc94d6b9-873c-4cb2-951b-94200890228d" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>protocol=&quot;eth-10g&quot;</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="10ae96b5-f374-4e92-8215-bb67dc820612" action="consoleExit" session="fortiLepton" useFieldsInCommand="false">
                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="a20b6f74-f61b-4b48-89f3-ca735faf5345" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>ssh login and reset protocol</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="3a094e22-cfcf-4ce0-a344-03130d551f67" action="open" session="lepton" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>project://Lepton_ssh/session_profiles/ssh.ffsp</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                <sessionProperties type="com.fnfr.svt.applications.ssh.documents.SSHProperties">
                                                                                                    <ipAddress inherit="false">[conn_device_ip_addr]</ipAddress>
                                                                                                    <user inherit="false">[conn_device_username]</user>
                                                                                                    <password inherit="false" masked="false">[conn_device_password]</password>
                                                                                                </sessionProperties>
                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                            </applicationProperties>
                                                                                        </item>
                                                                                        <item guid="5900825e-2ab6-4112-aed5-7cc85bbd9371" action="setProtocol" session="lepton" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>-port [conn_port_name] -protocol [protocol]</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                <query>retCode()</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="assert">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                <actionsWhenTrue>
                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                            <message>For &quot;[conn_device_name]&quot;: restore protocol &quot;[protocol]&quot; command for port &quot;[conn_port_name]&quot; is ok</message>
                                                                                                                        </actionProperties>
                                                                                                                    </item>
                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                    </item>
                                                                                                                </actionsWhenTrue>
                                                                                                                <actionsWhenFalse>
                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                            <message>For &quot;[conn_device_name]&quot;: restore protocol &quot;[protocol]&quot; command for port &quot;[conn_port_name]&quot; is not ok</message>
                                                                                                                        </actionProperties>
                                                                                                                    </item>
                                                                                                                    <item actionId="FailTest">
                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                    </item>
                                                                                                                </actionsWhenFalse>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                        </item>
                                                                                        <item guid="416426cd-9c58-4a14-a89b-c4affdbbe3ed" action="getConnectedPort" session="lepton" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>-port [conn_port_name]</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                <query>responseLine()</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>conn_port_lepton</storageLocation>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                        </item>
                                                                                        <item guid="9a16530c-49d6-4772-acab-6a222032081b" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(conn_port_lepton)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="f3549af3-1cfb-47fe-8166-4f6f3457d482" action="if" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>len(conn_port_lepton)==3:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="c3199c78-5be6-4dfc-8272-0f668926059e" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>conn_port_lepton=conn_port_lepton[:2]+&quot;0&quot;+conn_port_lepton[2:]</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="522c7006-1e56-4ba0-9225-29f43fe37c75" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(conn_port_lepton)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="d06fa52f-0924-43aa-965d-b8a527b2cc8c" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>check neighbor-device on lepton side</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="2d4ca0d1-99b1-4f56-ae3b-1ab99b64c75b" action="open" session="velo" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>application:com.fnfr.itest.applications.webservices.restful</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                <stepProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                <sessionProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulSessionProperties" url="https://10.210.107.10" url.inherit="false" version="2" version.inherit="false">
                                                                                                    <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" authenticationType="Basic" authenticationType.inherit="false" user="superadmin" user.inherit="false" password.masked="false" password="superadmin" password.inherit="false" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                </sessionProperties>
                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                            </applicationProperties>
                                                                                        </item>
                                                                                        <item guid="33145508-1ef6-4c6a-9da8-327059367a2e" action="GET" session="velo" estimatedStepExecutionTime="0.305">
                                                                                            <command>
                                                                                                <body>/velocity/api/inventory/v16/device/[conn_device_id]/ports?limit=200</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                <query sub="true">mapped/Json/ports/*\\[name=&quot;[conn_port_lepton]&quot;]/connectedPortName</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>conn_lepton_port_name</storageLocation>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                <query sub="true">mapped/Json/ports/*\\[name=&quot;[conn_port_lepton]&quot;]/connectedPortParentName</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>conn_lepton_device_name</storageLocation>
                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/ports?limit=200" action.inherit="false"/>
                                                                                        </item>
                                                                                        <item guid="f4e8489f-24d7-45dc-8ea1-56356c19cd9a" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(conn_lepton_port_name, conn_lepton_device_name)</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="none">
                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="message">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                <message>--- found lepton device connection: [conn_lepton_device_name] on port [conn_port_lepton]</message>
                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="15b849f7-a14c-42fb-81b2-5c02cfebf5b8" action="GET" session="velo" estimatedStepExecutionTime="0.305">
                                                                                            <command>
                                                                                                <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[conn_lepton_device_name]</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                <query>mapped/Json/devices/item/id</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>conn_lepton_device_id</storageLocation>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                <query>mapped/Json/devices/item/templateId</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>conn_lepton_template_id</storageLocation>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[conn_lepton_device_name]" action.inherit="false"/>
                                                                                        </item>
                                                                                        <item guid="aa8a2207-a76a-4571-8aee-23e8c9e96088" action="GET" session="velo" estimatedStepExecutionTime="0.305">
                                                                                            <command>
                                                                                                <body>/velocity/api/inventory/v16/device/[conn_lepton_device_id]</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                <query>mapped/Json/properties/*[name=&quot;ipAddress&quot;]/value</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>conn_lepton_device_ip_addr</storageLocation>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                <query>mapped/Json/properties/*[name=&quot;Console&quot;]/value</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>conn_lepton_device_console_ip_addr</storageLocation>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                <query>mapped/Json/properties/*[name=&quot;Console Port&quot;]/value</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>conn_lepton_device_console_port</storageLocation>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                <query>mapped/Json/properties/*[name=&quot;username&quot;]/value</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>conn_lepton_device_username</storageLocation>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                <query>mapped/Json/properties/*[name=&quot;password&quot;]/value</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>conn_lepton_device_password</storageLocation>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_lepton_device_id]" action.inherit="false"/>
                                                                                        </item>
                                                                                        <item guid="d59be018-394d-425b-aa6a-8ab02837821d" action="GET" session="velo" estimatedStepExecutionTime="0.305">
                                                                                            <command>
                                                                                                <body>/velocity/api/inventory/v16/template/[conn_lepton_template_id]</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                <query>mapped/Json/name</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>conn_lepton_template_name</storageLocation>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/template/[conn_lepton_template_id]" action.inherit="false"/>
                                                                                        </item>
                                                                                        <item guid="b8a1df48-c38f-426c-ad31-dfface68f9cd" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(conn_lepton_template_name)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="984cf7a0-f2af-45ca-aea5-630a62fa9153" action="close" session="velo">
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="923d41ec-2bde-42a4-bec0-88937ebad172" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>login to lepton neighbor-device and unset split port command</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="c0b1fc00-dce9-4f1a-ac74-537d9edc406f" action="if" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>str(conn_lepton_template_name) == &quot;Fortinet Switch&quot;:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="67c990b2-4891-4f81-8ba4-704f8287bfd1" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>open session</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="6681dc8f-104a-4d4b-8353-564c7674a596" action="open" session="fortiswitch_lepton" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>project://Fortiswitch_console/session_profiles/console.ffsp</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                    <completionProperties>
                                                                                                                        <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                    </completionProperties>
                                                                                                                </stepProperties>
                                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                    <ipAddress inherit="false">[dev_console_ip_addr]</ipAddress>
                                                                                                                    <port inherit="false">[dev_console_port]</port>
                                                                                                                </sessionProperties>
                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                            </applicationProperties>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="efe321d0-bda6-4989-a511-ff420f6fef7c" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>console login and set port phy-mode</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="73ebf88b-9f96-46e2-81d7-6e68b22c146a" action="consoleLogin" session="fortiswitch_lepton" useFieldsInCommand="false">
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>retCode()</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                <actionsWhenFalse>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                            <message>--- console login not ok; fail test</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="FailTest">
                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenFalse>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                        </item>
                                                                                                        <item guid="03f99e1b-61b7-4e15-a2cb-9ae89f2f0275" action="unsetSwitchPhyMode" session="fortiswitch" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>-port [conn_lepton_port_name]</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>retCode()</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                <actionsWhenTrue>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot;: unset port phy-mode command for port &quot;[conn_lepton_port_name]&quot; is ok</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenTrue>
                                                                                                                                <actionsWhenFalse>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot;: unset port phy-mode command for port &quot;[conn_lepton_port_name]&quot; is not ok</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="FailTest">
                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenFalse>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="6b2360d2-599e-433f-b880-07562beae4a2" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>wait for device to reboot</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="5ffab1bf-ad75-4b18-8bbd-a00139e9ab6d" action="sleep">
                                                                                                            <command>
                                                                                                                <body>10</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                                        </item>
                                                                                                        <item guid="280862bb-1f0d-463c-9cb7-560240d7a179" action="command" session="fortiswitch_lepton">
                                                                                                            <command>
                                                                                                                <body>Q</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>promptName()</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                <expression>str(value) == &quot;prompt1&quot; or str(value) == &quot;prompt2&quot;</expression>
                                                                                                                                <actionsWhenTrue>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                            <message>For &quot;[dev_name]&quot;: device console ip addr &quot;[dev_console_ip_addr]&quot; port &quot;[dev_console_port]&quot; is operational</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenTrue>
                                                                                                                                <actionsWhenFalse>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                            <message>--- need to wait for prompt...</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="RepeatStep">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenFalse>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                                                <promptProperties>
                                                                                                                    <stepPrompts>
                                                                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                                                                            <Content sub="true">* login:</Content>
                                                                                                                        </item>
                                                                                                                        <item name="prompt2" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                                                            <Content sub="true">* #</Content>
                                                                                                                        </item>
                                                                                                                        <item name="prompt3">
                                                                                                                            <Content>Password:</Content>
                                                                                                                        </item>
                                                                                                                        <item name="prompt4">
                                                                                                                            <Content>--More-- </Content>
                                                                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                                                                        </item>
                                                                                                                        <item name="prompt5">
                                                                                                                            <Content>Do you want to continue? (y/n)</Content>
                                                                                                                        </item>
                                                                                                                        <item name="prompt6" MatchMethod="WILDCARD">
                                                                                                                            <Content sub="true">* (*) #</Content>
                                                                                                                        </item>
                                                                                                                        <item name="prompt7" MatchMethod="WILDCARD">
                                                                                                                            <Content sub="true">*:</Content>
                                                                                                                        </item>
                                                                                                                        <item name="prompt8" MatchMethod="WILDCARD">
                                                                                                                            <Content sub="true">*</Content>
                                                                                                                        </item>
                                                                                                                    </stepPrompts>
                                                                                                                </promptProperties>
                                                                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                </completionProperties>
                                                                                                            </applicationProperties>
                                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="697e562a-e936-421c-9d41-4c1e6b4323c5" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>discover and update the port split</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="0109b3d6-9eb5-4fd8-8773-1a470668693d" action="open" session="discoverTsw_lepton" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>application:com.fnfr.itest.applications.webservices.restful</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                <stepProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                <sessionProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulSessionProperties" url="https://10.210.107.10" url.inherit="false" version="2" version.inherit="false">
                                                                                                                    <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" authenticationType="Basic" authenticationType.inherit="false" user="superadmin" user.inherit="false" password.masked="false" password="superadmin" password.inherit="false" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                                </sessionProperties>
                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                            </applicationProperties>
                                                                                                        </item>
                                                                                                        <item guid="0a6e24df-8ca6-42c6-b73c-b15fc84ce8bb" action="POST" session="discoverTsw_lepton">
                                                                                                            <command>
                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_lepton_device_id]/action?type=discover</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="message">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                <message> Waiting for discover operation on [conn_lepton_device_name]</message>
                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[conn_lepton_device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                                                    <memberClasses>
                                                                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                                                    </memberClasses>
                                                                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                                                </httpHeader>
                                                                                                            </applicationProperties>
                                                                                                        </item>
                                                                                                        <item guid="32c05b5e-22f4-4d5e-9fd8-fcecf09f2e54" action="sleep">
                                                                                                            <command>
                                                                                                                <body>10</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="f5c77a61-c8ac-49ff-8024-5b1b485015d3" action="consoleLogin" session="fortiswitch_lepton" useFieldsInCommand="false">
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>retCode()</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                <actionsWhenFalse>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                            <message>--- console login not ok; fail test</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="FailTest">
                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenFalse>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                        </item>
                                                                                                        <item guid="8e6df3e3-934a-49a7-b6b8-3902958764e2" action="command" session="fortiswitch_lepton">
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>promptName()</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                <expression>str(value) == &quot;prompt1&quot; </expression>
                                                                                                                                <actionsWhenTrue>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                            <message>For &quot;[dev_name]&quot;: discover operation was successfully</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenTrue>
                                                                                                                                <actionsWhenFalse>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="RepeatStep">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenFalse>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                                        </item>
                                                                                                        <item guid="5aaf4563-f666-4a95-8c23-a589ae6afe3b" action="close" session="discoverTsw_lepton">
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="68d3cf37-f12a-4f4c-940b-5d5d01527c26" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>ssh login and set protocol on connected port</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="0d61d30c-84ef-40e6-80d9-5a89031e8c02" action="setProtocol" session="lepton" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>-port [conn_port_lepton] -protocol [protocol]</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>retCode()</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                <actionsWhenTrue>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                            <message>For &quot;[dev_name]&quot;: set protocol &quot;[protocol]&quot; command for port &quot;[conn_port_lepton]&quot; is ok</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenTrue>
                                                                                                                                <actionsWhenFalse>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                            <message>For &quot;[device_name]&quot;: set protocol &quot;[protocol]&quot; command for port &quot;[conn_port_lepton]&quot; is not ok</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="FailTest">
                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenFalse>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="d384044f-68fc-43aa-8d47-02cbaf39b429" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>close session</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="ccfaa993-f935-42b3-bd82-560e1708f61d" action="close" session="fortiswitch_lepton">
                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="7f966c27-962b-4e60-9436-feb62dd58c54" action="if" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>str(conn_lepton_template_name) == &quot;Arista Switch&quot;:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="5f30d7b1-18ad-4a86-836b-bf67092fb761" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>open session</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="0632d71f-4b20-40d1-b132-ef14873e430f" action="open" session="arista_lepton">
                                                                                                            <command>
                                                                                                                <body>project://Arista_console/session_profiles/console.ffsp</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                    <ipAddress inherit="false">[conn_lepton_device_console_ip_addr]</ipAddress>
                                                                                                                    <port inherit="false">[conn_lepton_device_console_port]</port>
                                                                                                                    <TerminalProperties>
                                                                                                                        <stepDefaults>
                                                                                                                            <completionProperties>
                                                                                                                                <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                            </completionProperties>
                                                                                                                        </stepDefaults>
                                                                                                                    </TerminalProperties>
                                                                                                                </sessionProperties>
                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                            </applicationProperties>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="ffd5fbfe-d7ee-4874-9455-a5c8a6ccfc36" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>console login and set port speed</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="f3b614fd-9c96-4b12-98d0-7cf9047ca829" action="unsetSwitchPortSpeed" session="arista_lepton" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>-port [conn_lepton_port_name]</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>retCode()</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                <actionsWhenTrue>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot; restore default speed command for port &quot; [conn_lepton_port_name]&quot; is ok</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenTrue>
                                                                                                                                <actionsWhenFalse>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot; restore default speed command for port &quot; [conn_lepton_port_name]&quot; is not ok</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="FailTest">
                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenFalse>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="7f16de29-763e-47d0-ae8b-fb8efdea7dfc" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>discover and update the port speed</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="34f0d450-d4a3-47a1-9e74-4473d9ef93a3" action="open" session="discoverArista_lepton" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>application:com.fnfr.itest.applications.webservices.restful</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                <stepProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                <sessionProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulSessionProperties" url="https://10.210.107.10" url.inherit="false" version="2" version.inherit="false">
                                                                                                                    <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" authenticationType="Basic" authenticationType.inherit="false" user="superadmin" user.inherit="false" password.masked="false" password="superadmin" password.inherit="false" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                                </sessionProperties>
                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                            </applicationProperties>
                                                                                                        </item>
                                                                                                        <item guid="c4a7ccb2-dcf6-47e4-8d0a-57af37e40844" action="POST" session="discoverArista_lepton">
                                                                                                            <command>
                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_lepton_device_id]/action?type=discover</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="message">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                <message> Waiting for discover operation on [conn_lepton_device_name]</message>
                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[conn_lepton_device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                                                    <memberClasses>
                                                                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                                                    </memberClasses>
                                                                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                                                </httpHeader>
                                                                                                            </applicationProperties>
                                                                                                        </item>
                                                                                                        <item guid="0dc9d317-36d1-4904-b6ef-7a9cf54d874e" action="sleep">
                                                                                                            <command>
                                                                                                                <body>15</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="ac727c07-2cf4-48ab-975f-69231e111325" action="consoleLogin" session="arista_lepton" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>-username [conn_lepton_device_username] -password [conn_lepton_device_password]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                        </item>
                                                                                                        <item guid="8e707517-ecb8-411d-a15f-6178f56ffc32" action="command" session="arista_lepton">
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>promptName()</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                <expression>str(value) == &quot;prompt1&quot; or &quot;exit&quot; in str(value)</expression>
                                                                                                                                <actionsWhenTrue>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot;: discover operation was successfully</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenTrue>
                                                                                                                                <actionsWhenFalse>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="RepeatStep">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenFalse>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                                        </item>
                                                                                                        <item guid="0029b7b8-94d7-49d7-bae1-c60df24971e1" action="close" session="discoverArista_lepton">
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="e9180ef3-a43c-4ac6-8f1b-69ca9e980712" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>ssh login and set protocol on connected port</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="bb0e4b43-67a9-47fa-8596-cc61288c5753" action="setProtocol" session="lepton" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>-port [conn_port_lepton] -protocol [protocol]</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>retCode()</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                <actionsWhenTrue>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                            <message>For &quot;[conn_device_name]&quot;: set protocol &quot;[protocol]&quot; command for port &quot;[conn_port_lepton]&quot; is ok</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenTrue>
                                                                                                                                <actionsWhenFalse>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                            <message>For &quot;[conn_device_name]&quot;: set protocol &quot;[protocol]&quot; command for port &quot;[conn_port_lepton]&quot; is not ok</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="FailTest">
                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenFalse>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="04d414c5-e245-418b-8849-3e7a28f6d817" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>close session</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="923a067e-ec31-45be-9648-baa2bcb8241d" action="close" session="arista_lepton">
                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="993b8f1d-cf3a-4517-8f71-32d570e7ae24" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>close session</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="658920c7-6cf4-495d-8628-cbc5d1efd807" action="close" session="lepton">
                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                        </item>
                                                                                        <item guid="5f7b6a89-9fcc-466b-8d4b-a71f3f145153" action="close" session="fortiLepton">
                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                        </item>
                                                                                        <item guid="c5bbfc2f-abeb-4d74-a253-e20f31a3733d" action="close" session="session">
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="ffddbdd4-6c5c-4e76-9c3a-bd879d97920b" action="if" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>str(conn_template_name) == &quot;Arista Switch&quot;:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="1edd308f-7667-4286-bdfe-13cc233c33f1" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>open session</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="5d34d41e-7096-44c2-affd-43c089f54de9" action="open" session="arista" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>project://Arista_console/session_profiles/console.ffsp</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties"/>
                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                            </applicationProperties>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="4255df09-1c4e-47c4-9ef2-2611a0af8097" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>console login and set port speed</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="94f4cc31-0059-4c5e-b17b-de463b52fe51" action="unsetSwitchPortSpeed" session="arista" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>-port [conn_port_name]</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                <query>retCode()</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="assert">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                <actionsWhenTrue>
                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                            <message>For &quot;[device_name]&quot;: set protocol &quot;[protocol]&quot; command for port &quot;[device_port]&quot; is ok</message>
                                                                                                                        </actionProperties>
                                                                                                                    </item>
                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                    </item>
                                                                                                                </actionsWhenTrue>
                                                                                                                <actionsWhenFalse>
                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                            <message>For &quot;[device_name]&quot;: set protocol &quot;[protocol]&quot; command for port &quot;[device_port]&quot; is not ok</message>
                                                                                                                        </actionProperties>
                                                                                                                    </item>
                                                                                                                    <item actionId="FailTest">
                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                    </item>
                                                                                                                </actionsWhenFalse>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="48e2dfbf-d566-43e3-a881-39e1c806da81" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>discover and update the port speed</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="8380a48e-0211-42fa-b285-e7b5af55ae49" action="open" session="discoverArista" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>application:com.fnfr.itest.applications.webservices.restful</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                <stepProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                <sessionProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulSessionProperties" url="https://10.210.107.10" url.inherit="false" version="2" version.inherit="false">
                                                                                                    <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" authenticationType="Basic" authenticationType.inherit="false" user="superadmin" user.inherit="false" password.masked="false" password="superadmin" password.inherit="false" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                </sessionProperties>
                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                            </applicationProperties>
                                                                                        </item>
                                                                                        <item guid="54c19f6c-1bac-45f8-b87f-f911e80b68a2" action="POST" session="discoverArista">
                                                                                            <command>
                                                                                                <body>/velocity/api/inventory/v16/device/[dev_id]/action?type=discover</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="none">
                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="message">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                <message> Waiting for discover operation on [dev_name]</message>
                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[dev_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                                    <memberClasses>
                                                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                                    </memberClasses>
                                                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                                </httpHeader>
                                                                                            </applicationProperties>
                                                                                        </item>
                                                                                        <item guid="f6323ff7-11e0-4cb7-b024-7251a8204629" action="sleep">
                                                                                            <command>
                                                                                                <body>15</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="41ce4c77-83cd-47e6-9ac0-19aca07d835a" action="consoleLogin" session="arista" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>-username [conn_device_username] -password [conn_device_password]</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                <query>retCode()</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="assert">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                <actionsWhenFalse>
                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                            <message>--- console login not ok; fail test</message>
                                                                                                                        </actionProperties>
                                                                                                                    </item>
                                                                                                                    <item actionId="FailTest">
                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                    </item>
                                                                                                                </actionsWhenFalse>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                        </item>
                                                                                        <item guid="b98a1523-6154-47ad-b32d-9b242a717108" action="command" session="arista">
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                <query>promptName()</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="assert">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                <expression>str(value) == &quot;prompt1&quot; </expression>
                                                                                                                <actionsWhenTrue>
                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                            <message>For &quot;[dev_name]&quot;: discover operation was successfully</message>
                                                                                                                        </actionProperties>
                                                                                                                    </item>
                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                    </item>
                                                                                                                </actionsWhenTrue>
                                                                                                                <actionsWhenFalse>
                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                                                        </actionProperties>
                                                                                                                    </item>
                                                                                                                    <item actionId="RepeatStep">
                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                    </item>
                                                                                                                </actionsWhenFalse>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                        </item>
                                                                                        <item guid="5f40352f-9762-488c-b602-c91d1b5ade21" action="close" session="discoverArista">
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="082ceac2-08fd-4c17-9de8-44a76ca0cfc8" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>close session</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="c2118503-c0d8-4734-9a55-603dd6df6c01" action="close" session="arista">
                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="d941d123-6360-4d46-980f-2e52cc9abbe3" action="else" useFieldsInCommand="false">
                                                    <nestedSteps>
                                                        <item guid="22b5ffef-21c8-4466-bbe8-932317e283c3" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>print(&quot;Port has been already unsplit&quot;)</body>
                                                            </command>
                                                            <postProcessing>
                                                                <analysisRules>
                                                                    <item>
                                                                        <extractorInfo extractorType="none">
                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="message">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                <message> For device name: [device]</message>
                                                                                <tag sub="false" defaultValue=""/>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                <query>isEmpty()</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="assert">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                <expression>str(value) == &quot;false&quot; </expression>
                                                                                <actionsWhenTrue>
                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                            <message>--- Port [port] has been already unsplit or has not been split</message>
                                                                                        </actionProperties>
                                                                                    </item>
                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                    </item>
                                                                                </actionsWhenTrue>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                </analysisRules>
                                                            </postProcessing>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="7fbdd1ef-1199-4716-b766-eb32e7b8c0d6" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Discover operation on device if needed</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="24e1c6c4-c30e-4586-982a-6b60ab86db66" action="if" useFieldsInCommand="false">
                                            <command>
                                                <body>&quot;true&quot; in ok:</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="2e8086e0-7a2b-43b8-95cf-942d26b925c8" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>open session</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="47449472-9fc9-4463-9462-cfdfe6ddf482" action="open" session="fgt_discover" useFieldsInCommand="false">
                                                            <command>
                                                                <body>project://Fortigate_console/session_profiles/console.ffsp</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                    <completionProperties>
                                                                        <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                    </completionProperties>
                                                                </stepProperties>
                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                    <ipAddress inherit="false">[device_console_ip_addr]</ipAddress>
                                                                    <port inherit="false">[device_console_port]</port>
                                                                </sessionProperties>
                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                            </applicationProperties>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="69a1dcd4-28d5-417b-a67d-8523faa3e17c" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>discover operation </body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="e980de12-04c5-4276-9719-8908f6c5111b" action="POST" session="velocity">
                                                            <command>
                                                                <body>/velocity/api/inventory/v16/device/[device_id]/action?type=discover</body>
                                                            </command>
                                                            <postProcessing>
                                                                <analysisRules>
                                                                    <item>
                                                                        <extractorInfo extractorType="none">
                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="message">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                <message> Waiting for discover operation on [device]</message>
                                                                                <tag sub="false" defaultValue=""/>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                </analysisRules>
                                                            </postProcessing>
                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                    <memberClasses>
                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                    </memberClasses>
                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                </httpHeader>
                                                            </applicationProperties>
                                                        </item>
                                                        <item guid="eb8a45fd-c6b0-4b61-8d45-070f759c9189" action="sleep">
                                                            <command>
                                                                <body>10</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="f4edbf29-171d-4707-8b99-e11448bf5023" action="command" session="fgt_discover">
                                                            <postProcessing>
                                                                <analysisRules>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                <query>promptName()</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="assert">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                <expression>str(value) == &quot;prompt1&quot; </expression>
                                                                                <actionsWhenTrue>
                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                            <message>For &quot;[device]&quot;: discover operation was successfully</message>
                                                                                        </actionProperties>
                                                                                    </item>
                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                    </item>
                                                                                </actionsWhenTrue>
                                                                                <actionsWhenFalse>
                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                        </actionProperties>
                                                                                    </item>
                                                                                    <item actionId="RepeatStep">
                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                    </item>
                                                                                </actionsWhenFalse>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                </analysisRules>
                                                            </postProcessing>
                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                <promptProperties>
                                                                    <stepPrompts>
                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                            <Content sub="true">* login:</Content>
                                                                        </item>
                                                                        <item name="prompt2" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                            <Content sub="true">* #</Content>
                                                                        </item>
                                                                        <item name="prompt3">
                                                                            <Content>Password:</Content>
                                                                        </item>
                                                                        <item name="prompt4">
                                                                            <Content>--More-- </Content>
                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                        </item>
                                                                        <item name="prompt5">
                                                                            <Content>Do you want to continue? (y/n)</Content>
                                                                        </item>
                                                                        <item name="prompt6" MatchMethod="WILDCARD">
                                                                            <Content sub="true">* (*) #</Content>
                                                                        </item>
                                                                        <item name="prompt7" MatchMethod="WILDCARD">
                                                                            <Content sub="true">*:</Content>
                                                                        </item>
                                                                        <item name="prompt8" MatchMethod="WILDCARD">
                                                                            <Content sub="true">*</Content>
                                                                        </item>
                                                                    </stepPrompts>
                                                                </promptProperties>
                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                </completionProperties>
                                                            </applicationProperties>
                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="887c2340-5981-4a62-9ce0-5a51afdab166" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>close session</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="1005c7a0-cbdf-4187-9a49-a899c01a10bf" action="close" session="fgt_discover">
                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="10bb4d3c-2bc1-42cd-91ee-9f444939d896" action="else" useFieldsInCommand="false">
                                            <nestedSteps>
                                                <item guid="8d6e06f4-573c-4cc6-9ac5-0b1517be6030" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Insert steps here for when the expression evaluates to false</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="c68aff47-4b5c-4b68-bb60-47c304267af8" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>close session</body>
                            </command>
                            <nestedSteps>
                                <item guid="e93f5940-bca9-40e2-8d5c-a48ceafa884a" action="close" session="velocity" useFieldsInCommand="false">
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
        </item>
    </procedures>
</testCase>
