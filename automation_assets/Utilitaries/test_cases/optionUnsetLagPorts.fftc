<?xml version="1.0"?>
<testCase version="8.7.0.202112151246">
    <general>
        <language>Python</language>
    </general>
    <procedures>
        <item name="main">
            <steps>
                <item guid="14f74ee0-a26a-4b03-91d2-e9493a2e9752" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Initialization</body>
                    </command>
                    <nestedSteps>
                        <item guid="9cbd5e00-3705-44e1-b980-f859daffccee" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>reservationId = velocity(&quot;reservationId&quot;); print(reservationId)</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="none">
                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                        </extractorInfo>
                                        <processorInfo ruleType="message">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                <message>Found reservationId: &quot;[reservationId]&quot;</message>
                                                <tag sub="false" defaultValue=""/>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="a90d1052-1046-4a01-a1e6-41577b94822d" action="eval" skip="true" useFieldsInCommand="false">
                            <command>
                                <body>reservationId = &quot;99d8d94a-fd11-445a-9ad1-af2dbbb4e650&quot;</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="none">
                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                        </extractorInfo>
                                        <processorInfo ruleType="message">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                <message>Found reservationId: &quot;[reservationId]&quot;</message>
                                                <tag sub="false" defaultValue=""/>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="3bb69c2b-a1d6-48b6-bf0d-bcd408cbdc5f" action="eval" skip="true" useFieldsInCommand="false">
                            <command>
                                <body>reservationId = &quot;8ee93972-c55d-4659-a5ea-a7abc1fec316&quot;</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="none">
                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                        </extractorInfo>
                                        <processorInfo ruleType="message">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                <message>Found reservationId: &quot;[reservationId]&quot;</message>
                                                <tag sub="false" defaultValue=""/>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="c872218f-3778-4a21-a0f5-3bc780a6c58a" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Init dicts</body>
                            </command>
                            <nestedSteps>
                                <item guid="9838f01d-f30f-4cce-b993-bb29e918b032" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>link_type={}</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="9cddc293-d022-4b27-8c52-4593bd06a3a8" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>LAG_port_ids=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="4be8bbf4-7dce-453e-915d-ed06c59d7399" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>LAG_FGT_port_ids=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="8c26d4ad-3828-43c7-a535-692c92c821ed" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>LAG_CN_port_ids=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="d3786c2f-6db0-4010-9518-9fd120f5097a" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_names=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="c335713b-73db-4b6b-8421-2fcb8079c932" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_lag_ports=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="58dd7db9-4584-4be1-9465-d1b012949232" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_lag_FGT_ports=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="9b4bb7a0-89f3-489b-839d-df98c5a4534f" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_lag_CN_ports=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="6df396ce-bc43-40a7-8626-2cc0bf491a49" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>conn_port_names=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="eea28b0b-eddc-4132-b08c-9d11d0ac4b48" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>conn_port_FGT_names=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="9db46971-72cf-4063-a777-ad3de5bc9ffe" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>conn_port_CN_names=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="43ee06d9-b25e-4962-8947-b57366d2737f" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>conn_device_names=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="f27b84e4-4aa7-4a19-9411-13f5d5a0b459" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>conn_device_FGT_names=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="35c2b126-a794-4dc8-a668-35ea46f1be89" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>conn_device_CN_names=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="af6d5712-4524-40d7-a2fb-2e6add9f00ac" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_topology_port_ids=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="13411076-f0b8-43df-b342-370c13a46bc5" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_ports=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="0793f5e8-5c15-4bea-8ffb-6a0e1f075e51" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_FGT_ports=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="9ee1da9a-015d-49ff-a662-24d4620d3968" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_CN_ports=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="e6a41769-9735-4b23-aa51-044bb0cf737c" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_name_port=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="657e10aa-b9ff-42b9-aa52-6b3ff1ea3ef8" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_FGT_name_port=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="0e58c43b-28a8-4c94-b01b-399f9e754689" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_CN_name_port=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="34fb1c56-d98a-4812-8570-0c6544d07ece" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_ports_per_lag=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="6eeab768-b3a5-427c-9057-381f92ee2ac0" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>conn_device_ports_per_lag=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="415edb15-3ccc-4fa5-905b-f888d68222c6" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_FGT_ports_per_lag=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="bfde8d5f-38ff-4f9a-9d5c-3dfc20322df8" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_CN_ports_per_lag=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="be6932a6-7832-41d7-a4c2-ebd40eccf573" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>conn_device_FGT_ports_per_lag=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="936e3382-70c3-44b8-81fb-c1efeb197e38" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>conn_device_CN_ports_per_lag=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="73a067e2-da1b-4f75-8978-fb7176728823" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Open sessions</body>
                    </command>
                    <nestedSteps>
                        <item guid="8be288cc-9ef8-4371-8cf7-141e7fb3f064" action="open" session="velocity" useFieldsInCommand="false">
                            <command>
                                <body>application:com.fnfr.itest.applications.webservices.restful</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                <stepProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                <sessionProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulSessionProperties" url="https://10.210.107.10" url.inherit="false" version="2" version.inherit="false">
                                    <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" authenticationType="Basic" authenticationType.inherit="false" user="superadmin" user.inherit="false" password.masked="false" password="superadmin" password.inherit="false" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                </sessionProperties>
                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            </applicationProperties>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="bdba31b1-9f17-4165-bd64-603d15252f82" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Check LAG connection</body>
                    </command>
                    <nestedSteps>
                        <item guid="fd0bcbcc-d8b8-4b83-9d2b-2725c0125e2a" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                            <command>
                                <body>/velocity/api/reservation/v18/reservation/[reservationId]/topology</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>mapped/Xml/tbml/body/connectivity/link[*]/property[2]</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>LAG_option</storageLocation>
                                                <storeInAList>true</storeInAList>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/topology" action.inherit="false">
                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                    <memberClasses>
                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                    </memberClasses>
                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="application/tbml" header.inherit="false"/>
                                </httpHeader>
                            </applicationProperties>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="e7a22c15-23ae-4177-ba17-b2ef12d7cc88" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>LAG or skip operation</body>
                    </command>
                    <nestedSteps>
                        <item guid="dcca2ae4-672f-4c41-b4d4-24e24df1ca61" action="if" useFieldsInCommand="false">
                            <command>
                                <body>&quot;LAG&quot; or &quot;LAG_FGT&quot; or &quot;LAG_SW&quot; in LAG_option:</body>
                            </command>
                            <nestedSteps>
                                <item guid="db40e398-4dc4-4abf-a6d4-58310647a551" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Determine LAG port ids</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="f8348bdf-9b87-47d8-8ce4-88bfb3b3fbdc" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                            <command>
                                                <body>/velocity/api/reservation/v18/reservation/[reservationId]/topology</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>mapped/Xml/tbml/body/connectivity/link[*]/property[1]</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>Links</storageLocation>
                                                                <storeInAList>true</storeInAList>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>mapped/Xml/tbml/body/connectivity/link[*]/property[2]</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>Types</storageLocation>
                                                                <storeInAList>true</storeInAList>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/topology?limit=200" action.inherit="false">
                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                    <memberClasses>
                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                    </memberClasses>
                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="application/tbml" header.inherit="false"/>
                                                </httpHeader>
                                            </applicationProperties>
                                        </item>
                                        <item guid="5611a47a-4d03-46f7-aa91-3779ef5886d8" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>link_type=dict(zip(Links,Types))</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="02f49240-378c-4c47-8ea6-26a12d2f3ac1" action="for" useFieldsInCommand="false">
                                            <command>
                                                <body>item in link_type.keys():</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="34bd23d4-6068-4c3c-95d4-33a79914cfdf" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>LAG: script runs on both devices; LAG_FGT: script runs just on fgts; LAG_CN: script runs just on connected devices (SWs)</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="e7a4f13a-17d0-427f-8149-74e62ab18aec" action="if" useFieldsInCommand="false">
                                                    <command>
                                                        <body>link_type[item] ==&quot;LAG&quot;:</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="bd5717a3-dbcd-49cc-b8e4-277b1a7ec19f" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                            <command>
                                                                <body>/velocity/api/reservation/v18/reservation/[reservationId]/topology</body>
                                                            </command>
                                                            <postProcessing>
                                                                <analysisRules>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                <query sub="true">mapped/Xml/tbml/body/connectivity/*\\[property=&quot;[item]&quot;]/*/@id</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="store">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                <storageLocation>LAG_ports_ids</storageLocation>
                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                </analysisRules>
                                                            </postProcessing>
                                                            <nestedSteps>
                                                                <item guid="4a56f298-72b9-405b-bfab-6ef6da826fa7" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>print(LAG_ports_ids)</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="516a656c-3e89-4e8e-ad87-02744c95a86e" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>LAG_port_ids.append(LAG_ports_ids)</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/topology" action.inherit="false">
                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                    <memberClasses>
                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                    </memberClasses>
                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="application/tbml" header.inherit="false"/>
                                                                </httpHeader>
                                                            </applicationProperties>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="c6ac3484-2655-4fe8-afec-be4933fb7893" action="if" useFieldsInCommand="false">
                                                    <command>
                                                        <body>link_type[item] ==&quot;LAG_FGT&quot;:</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="fa282e90-833c-44ce-b79e-9d3cbece0e52" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                            <command>
                                                                <body>/velocity/api/reservation/v18/reservation/[reservationId]/topology</body>
                                                            </command>
                                                            <postProcessing>
                                                                <analysisRules>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                <query sub="true">mapped/Xml/tbml/body/connectivity/*\\[property=&quot;[item]&quot;]/*/@id</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="store">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                <storageLocation>LAG_FGT_ports_ids</storageLocation>
                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                </analysisRules>
                                                            </postProcessing>
                                                            <nestedSteps>
                                                                <item guid="d7267141-9c2f-4582-923b-8475344b3707" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>print(LAG_FGT_ports_ids)</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="ed97865f-2e4b-4be5-a64c-ba7f39440f7c" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>LAG_FGT_port_ids.append(LAG_FGT_ports_ids)</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/topology" action.inherit="false">
                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                    <memberClasses>
                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                    </memberClasses>
                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="application/tbml" header.inherit="false"/>
                                                                </httpHeader>
                                                            </applicationProperties>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="3ac696fc-526a-4211-98ea-884210e0b315" action="if" useFieldsInCommand="false">
                                                    <command>
                                                        <body>link_type[item] ==&quot;LAG_SW&quot;:</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="976a382a-375b-4455-b295-7396d421ccde" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                            <command>
                                                                <body>/velocity/api/reservation/v18/reservation/[reservationId]/topology</body>
                                                            </command>
                                                            <postProcessing>
                                                                <analysisRules>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                <query sub="true">mapped/Xml/tbml/body/connectivity/*\\[property=&quot;[item]&quot;]/*/@id</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="store">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                <storageLocation>LAG_CN_ports_ids</storageLocation>
                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                </analysisRules>
                                                            </postProcessing>
                                                            <nestedSteps>
                                                                <item guid="ac998b1f-b851-4b06-8495-70200593361f" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>print(LAG_CN_ports_ids)</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="fdbecd3f-337d-4491-86af-66796391d2ae" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>LAG_CN_port_ids.append(LAG_CN_ports_ids)</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/topology" action.inherit="false">
                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                    <memberClasses>
                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                    </memberClasses>
                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="application/tbml" header.inherit="false"/>
                                                                </httpHeader>
                                                            </applicationProperties>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="9553aa86-6f5b-4190-926f-ad8ba2e09191" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>print(LAG_FGT_port_ids)</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="b4b39121-5c48-441c-8b47-22265a3d19fc" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>print(LAG_port_ids)</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="621d0b4c-fa22-49bc-83bf-28878e9963d9" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>print(LAG_CN_port_ids)</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="d13c7dc2-399d-45f6-9c0f-da5bb448a8b0" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Get the devices name from Velocity</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="275aa131-e727-440d-880f-733eae9a2f7e" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                            <command>
                                                <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>mapped/Json/items/*[type = &quot;DEVICE&quot;]/name</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>device_name</storageLocation>
                                                                <storeInAList>true</storeInAList>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                        </item>
                                        <item guid="eb9e66f5-a9d7-4b20-9c34-5921fc8cce37" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>print(device_name)</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="d52e75e4-4bc8-4e3b-9406-55b8286a79bd" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Filter devices in order to find fortigate firewalls</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="4fab8b78-cd22-4cf5-82e3-aa274a39873b" action="for" useFieldsInCommand="false">
                                            <command>
                                                <body>device in device_name:</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="f65fcf30-c805-47b5-9b27-20b6c9f38777" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                    <command>
                                                        <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]</body>
                                                    </command>
                                                    <postProcessing>
                                                        <analysisRules>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                        <query>mapped/Json/devices/item/id</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>device_id</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                        <query>mapped/Json/devices/item/properties/item[name = &apos;Console&apos;]/value</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>device_console_ip_addr</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                        <query>mapped/Json/devices/item/properties/item[name = &apos;Console Port&apos;]/value</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>device_console_port</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                        <query>mapped/Json/devices/item/properties/item[name = &apos;username&apos;]/value</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>device_username</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                        <query>mapped/Json/devices/item/properties/item[name = &apos;password&apos;]/value</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>device_password</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                        <query>mapped/Json/devices/item/templateId</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>template_id</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                        </analysisRules>
                                                    </postProcessing>
                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]" action.inherit="false"/>
                                                </item>
                                                <item guid="2a95a604-7545-427a-b89c-6ef6f6ee2cdb" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                    <command>
                                                        <body>/velocity/api/inventory/v16/template/[template_id]</body>
                                                    </command>
                                                    <postProcessing>
                                                        <analysisRules>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                        <query>mapped/Json/name</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>template_name</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                        </analysisRules>
                                                    </postProcessing>
                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/template/[template_id]" action.inherit="false"/>
                                                </item>
                                                <item guid="9139b85c-f025-4b76-9093-90ae5b999dbd" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>print(template_name)</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="7cad7ad2-2dd0-4cd1-b2d6-b037ccf057ca" action="if" useFieldsInCommand="false">
                                                    <command>
                                                        <body>template_name == &quot;Fortigate Firewall&quot;:</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="bc084a4c-a019-425a-850a-9ab2d3ab4ab0" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_names.append(device)</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="9e9efbf2-9c92-4641-b64d-76e579096ae1" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>device_name=device_names.copy()</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="b4638c84-9539-4cad-b895-26887ef8e112" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Find and delete LAG on devices</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="92c19134-bef0-4de8-97da-71a9c7470036" action="for" useFieldsInCommand="false">
                                            <command>
                                                <body>device in device_name:</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="ec5da85c-6b82-4974-b62c-8e363babc68e" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Check LAG connection on each device - message</body>
                                                    </command>
                                                    <postProcessing>
                                                        <analysisRules>
                                                            <item>
                                                                <extractorInfo extractorType="none">
                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="message">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                        <message>---Checking LAG connections on device &quot;[device]&quot;...</message>
                                                                        <tag sub="false" defaultValue=""/>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                        </analysisRules>
                                                    </postProcessing>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="34114d0d-7966-4a62-a835-7c84e2132946" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Determine device ports from reservation</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="be94fb0c-8f37-420e-8fec-cee762f0dd18" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                            <command>
                                                                <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]</body>
                                                            </command>
                                                            <postProcessing>
                                                                <analysisRules>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                <query>mapped/Json/devices/item/id</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="store">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                <storageLocation>device_id</storageLocation>
                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console&apos;]/value</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="store">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                <storageLocation>device_console_ip</storageLocation>
                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console Port&apos;]/value</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="store">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                <storageLocation>device_console</storageLocation>
                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                </analysisRules>
                                                            </postProcessing>
                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]" action.inherit="false"/>
                                                        </item>
                                                        <item guid="80748874-e39b-4fed-b56c-f88e7672bcf0" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                            <command>
                                                                <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                                            </command>
                                                            <postProcessing>
                                                                <analysisRules>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                <query sub="true">mapped/Json/items/*\\[inventoryParentResourceId=&quot;[device_id]&quot;]/name</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="store">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                <storageLocation>device_reservation_ports</storageLocation>
                                                                                <storeInAList>true</storeInAList>
                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                <query sub="true">mapped/Json/items/*\\[inventoryParentResourceId=&quot;[device_id]&quot;]/inventoryResourceId</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="store">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                <storageLocation>device_inventory_ports</storageLocation>
                                                                                <storeInAList>true</storeInAList>
                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                </analysisRules>
                                                            </postProcessing>
                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                                        </item>
                                                        <item guid="ae6a1ce4-e73f-47fa-a64a-e8164916253d" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>print(device_reservation_ports)</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="c971ea97-081e-4e41-be30-6b519a0a74df" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>print(device_inventory_ports)</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="d5f451c3-fdb9-4680-b12d-ca1e7ac6b908" action="for" useFieldsInCommand="false">
                                                            <command>
                                                                <body>port_name in device_inventory_ports:</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="1bf68d6e-949b-4f9d-91ed-a8d68157f493" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                    <command>
                                                                        <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                                                    </command>
                                                                    <postProcessing>
                                                                        <analysisRules>
                                                                            <item>
                                                                                <extractorInfo extractorType="query">
                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                        <query sub="true">mapped/Json/items/*\\[inventoryResourceId=&quot;[port_name]&quot;]/topologyResourceId</query>
                                                                                    </extractorProperties>
                                                                                </extractorInfo>
                                                                                <processorInfo ruleType="store">
                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                        <storageLocation>device_topology_port_id</storageLocation>
                                                                                        <storeInAList>true</storeInAList>
                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                    </ruleProperties>
                                                                                </processorInfo>
                                                                            </item>
                                                                        </analysisRules>
                                                                    </postProcessing>
                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                                                </item>
                                                                <item guid="85111e5c-d127-4df9-a57e-c3cf945fe5a9" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>device_topology_port_ids.append(device_topology_port_id)</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="9bbf3bb2-71fa-4960-8149-98e92e05cc60" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>print(device_topology_port_ids)</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="8bbbb024-f689-4204-84d2-8589d11aa538" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Determine device ports from LAG types and delete LAG</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="52da7c4a-b0e5-47fa-949a-f6aed9b6938e" action="for" useFieldsInCommand="false">
                                                            <command>
                                                                <body>item in device_topology_port_ids:</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="a81e0fca-22b2-4147-9173-e1a919610f72" action="for" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>links in LAG_port_ids:</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="2ae513c6-0956-46fb-901c-389f87760ae9" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(links[1])</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="28305f17-0953-4820-a040-d8a785b23756" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(links[0])</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="1ff79f1e-75b9-41d1-848a-3ae9a1298a33" action="if" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>len(item)==2:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="48b0b65d-9eb6-44ee-ab9b-13318e9d13cd" action="if" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>item[0]==links[0] or item[0]==links[1] or item[1]==links[0] or item[1]==links[1]:</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="8bc8ac6d-bed6-42e0-89bc-a609d50f6bb6" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>device_lag_ports.append(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="46a99627-c8b0-4cce-bc69-8e7a968acc44" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="fd567b1d-cef3-4857-8000-de3acb4fc88f" action="elif" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>len(item)==1:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="376e1279-d91a-4044-93d8-b7b849a4a4f3" action="if" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>item[0]==links[0] or item[0]==links[1]:</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="9ab8680a-ce56-47c0-83c0-1ad9146c4262" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>device_lag_ports.append(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="2e322d7f-6258-441d-bea7-eaefd0d1e0a4" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="5dce331c-1556-4482-89d7-7b717467f17a" action="for" useFieldsInCommand="false">
                                                            <command>
                                                                <body>item in device_topology_port_ids:</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="53a841a4-b881-48db-89ca-ab05e2197379" action="for" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>links in LAG_FGT_port_ids:</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="f429c02f-7d8f-42ae-9af5-b853b3837862" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(links[1])</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="f55f8d39-3b52-4198-b5ac-32bcae7d9ce9" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(links[0])</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="8b17fc5c-451d-4c57-bc5b-9b28eaf0ac03" action="if" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>len(item)==2:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="0e4b2d17-df17-4500-9874-e8f84ac07129" action="if" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>item[0]==links[0] or item[0]==links[1] or item[1]==links[0] or item[1]==links[1]:</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="bb1ce200-f1f6-4f95-9d74-4c4abe3af920" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>device_lag_FGT_ports.append(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="242b804b-2a02-459a-a18c-a41aa87cfdba" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="0a7faa40-e602-441d-b8b8-ea732fef5413" action="elif" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>len(item)==1:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="6d04de0a-ea2e-406b-b2e9-7025e32aefcb" action="if" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>item[0]==links[0] or item[0]==links[1]:</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="424c9ddd-400f-4b3e-a1c9-cc8a0e39fb12" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>device_lag_FGT_ports.append(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="c9e84112-faf2-49b5-8681-11706d9a165a" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="ae9df3f6-9cfb-4083-80a4-2f76e5b5a6ee" action="for" useFieldsInCommand="false">
                                                            <command>
                                                                <body>item in device_topology_port_ids:</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="b85566ca-e184-415c-a686-0c1ad4dd16de" action="for" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>links in LAG_CN_port_ids:</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="fcfa82d3-f35e-4ffe-bdd7-6215bd41c7c0" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(links[1])</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="09169fe1-2574-406a-bf08-aadd36241dd6" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(links[0])</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="ea4c0acb-1368-40a1-b795-fdb278e7ae44" action="if" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>len(item)==2:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="d925a68d-9e90-40b8-8c3b-5e20e6480abd" action="if" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>item[0]==links[0] or item[0]==links[1] or item[1]==links[0] or item[1]==links[1]:</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="6d84dfef-76d4-42dd-a84c-ab0ed5a2f138" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>device_lag_CN_ports.append(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="be234331-bdf5-4d19-afc3-233cfcbbaa20" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="454af8f8-dd30-4f62-a62b-abca543127f6" action="elif" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>len(item)==1:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="de359a05-f767-466c-bd2b-e745c0a1f000" action="if" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>item[0]==links[0] or item[0]==links[1]:</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="10765aff-071d-4211-a16f-2dfb094c1115" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>device_lag_CN_ports.append(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="38c74d48-b60b-4d78-8110-811e52761a0e" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="890c9b37-ddb1-4fea-b1e2-ebceaeb87a02" action="if" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_lag_ports == [] and device_lag_FGT_ports ==[] and device_lag_CN_ports ==[]:</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="47887b84-62dd-4177-b624-c8b8343457f6" action="comment" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>skip operation on device</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="7bfe6d91-5e10-4202-b1b0-0843b9661ca7" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(&quot;Device has no LAG connections&quot;)</body>
                                                                            </command>
                                                                            <postProcessing>
                                                                                <analysisRules>
                                                                                    <item>
                                                                                        <extractorInfo extractorType="query">
                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                <query>isEmpty()</query>
                                                                                            </extractorProperties>
                                                                                        </extractorInfo>
                                                                                        <processorInfo ruleType="assert">
                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                <expression>value == &quot;false&quot; </expression>
                                                                                                <actionsWhenTrue>
                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                            <message>---For device [device] there are no LAG connections, skip operation ...</message>
                                                                                                        </actionProperties>
                                                                                                    </item>
                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                    </item>
                                                                                                </actionsWhenTrue>
                                                                                            </ruleProperties>
                                                                                        </processorInfo>
                                                                                    </item>
                                                                                </analysisRules>
                                                                            </postProcessing>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="afa7a387-fb80-41d3-9dfc-38d49659cdda" action="else" useFieldsInCommand="false">
                                                            <nestedSteps>
                                                                <item guid="dd6cbf74-d54b-4cac-a730-c4c1d6fbf004" action="comment" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>Delete LAG on devices per each LAG type</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="a4739c25-70f0-4ff1-b872-c2ac478d8c07" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(device_lag_ports)</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="5125f2ff-47dd-4238-9b06-ed3170c60f69" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(device_lag_FGT_ports)</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="728f9385-f428-4060-98e4-7ab133b3f349" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(device_lag_CN_ports)</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="c5b16071-275b-4111-8f95-db6e28ae8f81" action="if" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>device_lag_ports != []:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="0566e445-74d1-4c32-bc1c-58cc72295e35" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Find physical ports from LAG</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="1db4a67a-25cf-4deb-9a35-b9d290756878" action="for" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>port_item in device_lag_ports:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="8756e14a-f842-49c5-845f-386add1f0fb3" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>port_item=port_item[0]</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="db6d58d8-af59-4ce9-9717-27b204a291b6" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(port_item)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="2b49d2f0-a71c-49e1-ae8c-616420c95fb5" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                    <command>
                                                                                                        <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                                                                                    </command>
                                                                                                    <postProcessing>
                                                                                                        <analysisRules>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query sub="true">mapped/Json/items/*\\[topologyResourceId=&quot;[port_item]&quot;]/name</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="store">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                        <storageLocation>device_port</storageLocation>
                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query sub="true">mapped/Json/items/*\\[topologyResourceId=&quot;[port_item]&quot;]/inventoryParentResourceId</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="store">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                        <storageLocation>parent_port_id</storageLocation>
                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                        </analysisRules>
                                                                                                    </postProcessing>
                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                                                                                </item>
                                                                                                <item guid="dfb066ab-5ffd-4659-a946-2b91ccdf03ce" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(parent_port_id, device_id)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="1622101e-82c3-4763-8565-6d09d31c2f3a" action="if" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>device_id == parent_port_id:</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="b2a9f0db-bee7-41f8-8ac8-3e7f3b928bda" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>device_ports.append(device_port)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="aff765fd-255d-42df-851f-3e9a157300ed" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(device_ports)</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="none">
                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="message">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                <message> For device &quot;[device]&quot; ports [device_ports] are included in LAG connections</message>
                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="1c782b7e-0dc1-4ef4-ac62-71b366bddf79" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Determine device ports included in LAG on neighbor-device</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="457f3d5c-e945-4818-9808-b302808685c5" action="for" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>device_port in device_ports:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="cad48dfc-eba7-4ef6-b678-3c5026422be0" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                    <command>
                                                                                                        <body>/velocity/api/inventory/v16/device/[device_id]/ports?limit=200</body>
                                                                                                    </command>
                                                                                                    <postProcessing>
                                                                                                        <analysisRules>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query sub="true">mapped/Json/ports/*\\[name=&quot;[device_port]&quot;]/connectedPortName</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="store">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                        <storageLocation>conn_port_name</storageLocation>
                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query sub="true">mapped/Json/ports/*\\[name=&quot;[device_port]&quot;]/connectedPortParentName</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="store">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                        <storageLocation>conn_device_name</storageLocation>
                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                        </analysisRules>
                                                                                                    </postProcessing>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="a13ba93d-2390-4426-81db-96cc6721b273" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_port_names.append(conn_port_name)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="5c1c88a5-2390-48b2-a2af-5a3226732984" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_device_names.append(conn_device_name)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="58524d6b-7559-4524-87f1-333ebbb6ce9c" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>string=device_port+&quot; : &quot;+conn_port_name +&quot; : &quot;+ conn_device_name</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="b6049122-a46f-4d99-ae7f-fdd11aa4a1d3" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>device_name_port.append(string)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="8928f76b-d939-4667-8646-3196fa4986a3" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>string=&quot;&quot;</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/ports?limit=200" action.inherit="false"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="3502c0e1-a7ce-42a9-951c-1a387a337a9b" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Check device for multiple LAG connections and delete LAG </body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="cd7559c9-1e01-4ccd-b1a8-ab0e6f420b97" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(conn_port_names)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="836a0f20-21d4-462e-a0a1-0027ba1b2cae" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(conn_device_names)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="919e3879-f7e7-4fc4-b3d1-2f6ca678664e" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>conn_device_names=list(set(conn_device_names))</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="6313aa85-4466-43cd-9c42-4a787bcfc7e4" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(device_name_port)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="97cad636-842e-4a2f-be81-7552b2e88957" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(conn_device_names)</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="none">
                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="message">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                <message> For device &quot;[device]&quot; found [len(conn_device_names)] LAG connections</message>
                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="d52a47bd-1fda-4afc-86f8-98ae77cb5a92" action="for" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>conn_device_name in conn_device_names:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="2d6f9cbf-b8ef-4345-86df-a7df9290304b" action="for" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>element in device_name_port:</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="fbeb7fdc-3821-4081-a85b-2345bba3b297" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>print(conn_device_name)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="38ad5e6b-5280-4b3c-8b9f-49213389c909" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>print(element.split(&quot;:&quot;)[2].strip())</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="cc828705-b2fe-4fe8-bfc8-582bfe019075" action="if" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_device_name == element.split(&quot;:&quot;)[2].strip():</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="82ce98a3-7eb6-4d6c-a513-7f6f55aca875" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>device_ports_per_lag.append(element.split(&quot;:&quot;)[0].strip())</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="767b5047-1227-4774-ae9e-9ccecc1a7084" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>conn_device_ports_per_lag.append(element.split(&quot;:&quot;)[1].strip())</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="73270b35-6e2c-4baf-8b2e-416d144a099e" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(device_ports_per_lag)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="9a92c6aa-ff6e-4114-9bb0-625f8a66e764" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(conn_device_ports_per_lag)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="a74acacd-452d-48f3-9dca-4b7d42dd04e0" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>Get device details</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="b3d26189-6135-4391-89b1-705cb47c2f98" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                            <command>
                                                                                                                <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>device_console_ip_addr</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console Port&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>device_console_port</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;username&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>device_username</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;password&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>device_password</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]" action.inherit="false"/>
                                                                                                        </item>
                                                                                                        <item guid="00700da4-dc5f-450b-8c1f-06b7ee231118" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                            <command>
                                                                                                                <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[conn_device_name]</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;ipAddress&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_device_ipAddress</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_device_console_ip_addr</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console Port&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_device_console_port</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;username&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_device_username</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;password&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_device_password</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>mapped/Json/devices/item/id</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_device_id</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>mapped/Json/devices/item/templateId</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_template_id</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[conn_device_name]" action.inherit="false"/>
                                                                                                        </item>
                                                                                                        <item guid="9d8a1297-90b8-4ec5-af88-597caae64ac9" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                            <command>
                                                                                                                <body>/velocity/api/inventory/v16/template/[conn_template_id]</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>mapped/Json/name</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_template_name</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/template/[conn_template_id]" action.inherit="false"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="86d67c6c-fd2c-4f3f-b9ef-3a28a5902474" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>Delete LAG on device</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="11a9104f-43c1-4c97-86ad-bc34e663b821" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>open session</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="1752ff0c-e7aa-4936-b89c-c5ccb89fe9cb" action="open" session="fortigate">
                                                                                                                    <command>
                                                                                                                        <body>project://Fortigate_console/session_profiles/console.ffsp</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                        <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                            <completionProperties>
                                                                                                                                <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                            </completionProperties>
                                                                                                                        </stepProperties>
                                                                                                                        <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                            <ipAddress inherit="false">[device_console_ip_addr]</ipAddress>
                                                                                                                            <port inherit="false">[device_console_port]</port>
                                                                                                                        </sessionProperties>
                                                                                                                        <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                    </applicationProperties>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="dbc6eb73-d8f2-4711-84bf-d92c22bf5bb8" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>set parameters based on name convention</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="0d5851af-9d1a-40ef-96aa-f2bfa8a24791" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>name=&quot;DATA&quot;+&quot;_&quot;+&quot;_&quot;.join(device_ports_per_lag).replace(&quot;port&quot;,&quot;&quot;)</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="0b65da2c-2ae9-46c2-9def-ee93f7b4da15" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>name=name[:10]</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="fbcc20e8-8a10-48cd-b03d-109bc54adb97" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>print(name)</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="748f68bb-66f2-4fde-9253-cf456d3d3e65" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>ports=&quot; &quot;.join(device_ports_per_lag)[:15]</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="d7e82560-d538-44b2-b5b7-4be08da1a9cb" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>print(ports)</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="99ca9278-922f-4c24-b8ce-221e1e883d6e" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>lag=&quot;LAG&quot;+&quot;_&quot;+&quot;_&quot;.join(device_ports_per_lag).replace(&quot;port&quot;,&quot;&quot;)</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="1be16b70-976b-4ddf-846d-63ec5eb2f5e1" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>lag=lag[:13]</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="cb8fb3cc-9bcc-4dd2-b9f8-983c3231db24" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>print(lag)</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="c07a2895-d964-4c25-9fb0-1c163550b8e6" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>console login and delete lag </body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="4deb9b54-53d6-4d0f-859d-41db13e3c2e8" action="deleteLag" session="fortigate" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>-name [lag]</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="ec9abb40-9ddb-4241-91b4-99948431461a" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>assign interfaces to default vdom</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="d30f16b5-02b4-4751-ac80-2d8f7436477e" action="for" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>port in device_ports_per_lag:</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="c7ab49dc-cf28-4aa9-a174-ceb292d24bad" action="assignInterfacesToDefaultVdom" session="fortigate" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>-port [port]</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="2e546e95-2353-4741-96c7-2e4515c4d143" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>delete vdom</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="6e753174-eafa-448a-8a5c-e5613abfca57" action="deleteVdom" session="fortigate" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>-name [name]</body>
                                                                                                                    </command>
                                                                                                                    <postProcessing>
                                                                                                                        <analysisRules>
                                                                                                                            <item>
                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                        <query>retCode()</query>
                                                                                                                                    </extractorProperties>
                                                                                                                                </extractorInfo>
                                                                                                                                <processorInfo ruleType="assert">
                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                        <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                        <actionsWhenTrue>
                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                    <message>For &quot;[device]&quot; delete LAG on ports [device_ports_per_lag] is ok</message>
                                                                                                                                                </actionProperties>
                                                                                                                                            </item>
                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                            </item>
                                                                                                                                        </actionsWhenTrue>
                                                                                                                                        <actionsWhenFalse>
                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                    <message>For &quot;[device]&quot; delete LAG is not ok</message>
                                                                                                                                                </actionProperties>
                                                                                                                                            </item>
                                                                                                                                            <item actionId="FailTest">
                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                            </item>
                                                                                                                                        </actionsWhenFalse>
                                                                                                                                    </ruleProperties>
                                                                                                                                </processorInfo>
                                                                                                                            </item>
                                                                                                                        </analysisRules>
                                                                                                                    </postProcessing>
                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="a990db83-e8a5-4895-a764-203ba9dd1d32" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>update device ports in velocity</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="ae4aa531-fd43-4424-9ea1-29896c15b320" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                    <command>
                                                                                                                        <body>/velocity/api/inventory/v16/device/[device_id]/ports?limit=200</body>
                                                                                                                    </command>
                                                                                                                    <postProcessing>
                                                                                                                        <analysisRules>
                                                                                                                            <item>
                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                        <query>mapped/Json/ports/item[*]/name</query>
                                                                                                                                    </extractorProperties>
                                                                                                                                </extractorInfo>
                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                        <storageLocation>device_ports</storageLocation>
                                                                                                                                        <storeInAList>true</storeInAList>
                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                    </ruleProperties>
                                                                                                                                </processorInfo>
                                                                                                                            </item>
                                                                                                                            <item>
                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                        <query>mapped/Json/ports/item[*]/id</query>
                                                                                                                                    </extractorProperties>
                                                                                                                                </extractorInfo>
                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                        <storageLocation>device_port_ids</storageLocation>
                                                                                                                                        <storeInAList>true</storeInAList>
                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                    </ruleProperties>
                                                                                                                                </processorInfo>
                                                                                                                            </item>
                                                                                                                        </analysisRules>
                                                                                                                    </postProcessing>
                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/ports?limit=200" action.inherit="false"/>
                                                                                                                </item>
                                                                                                                <item guid="2530b608-16db-419b-a676-70bf38bfa604" action="if" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>lag in device_ports:</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="43d7dd79-8c2c-4891-90c5-8e464bfd952c" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>portId=device_port_ids[device_ports.index(lag)]</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="1c626915-f73c-41dc-bf86-0c14abc1e3ec" action="DELETE" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/device/[device_id]/port/[portId]</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/port/[portId]" action.inherit="false"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="4e3b16c6-b714-4d76-b1dc-9105a80edea0" action="for" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>port_name in device_ports:</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="33caa248-e62d-4488-8c48-548c824701b4" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>name in port_name:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="ccaaec06-3d68-4f3c-b03f-0b037084c3d1" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>other_portId=device_port_ids[device_ports.index(port_name)]</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="a05fe133-0d77-4e4d-bf2b-def278888e3b" action="DELETE" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                    <command>
                                                                                                                                        <body>/velocity/api/inventory/v16/device/[device_id]/port/[other_portId]</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/port/[other_portId]" action.inherit="false"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="e87c8505-fccb-4fa6-b947-d874f454ff77" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>&quot;npu&quot; in port_name:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="c8d03a75-d36b-4555-882c-19e9f9cf3500" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>other_portId=device_port_ids[device_ports.index(port_name)]</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="3ddbbc80-ba16-42b7-8e15-77a64fca5477" action="DELETE" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                    <command>
                                                                                                                                        <body>/velocity/api/inventory/v16/device/[device_id]/port/[other_portId]</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/port/[other_portId]" action.inherit="false"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="5d0d81c3-8de4-479d-b66a-bec673a60f01" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>console exit</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="7de9a192-e980-4001-809e-469eed1629c7" action="consoleExit" session="fortigate" useFieldsInCommand="false">
                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="51ff1d33-1fef-4321-8cb3-4cf5cf266453" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>close session</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="b6d9e41b-edd1-40a3-a526-7e692fc75848" action="close" session="fortigate">
                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="82b0e069-54f3-4f05-8138-6f422f3b7e92" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>Check LAG connection on each neighbor device - message</body>
                                                                                                    </command>
                                                                                                    <postProcessing>
                                                                                                        <analysisRules>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="none">
                                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="message">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                        <message>---Checking LAG connections on connected device &quot;[conn_device_name]&quot;...</message>
                                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                        </analysisRules>
                                                                                                    </postProcessing>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="e3cd08c1-5ec5-4c96-902e-cd7d4c1d89cc" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>Delete LAG on connection device</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="a8680d2a-c236-4a7a-b4df-cbdab8483704" action="if" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_template_name == &quot;Fortinet Switch&quot;:</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="d3ae3527-e94d-4047-9f13-7161e64d8391" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>info</body>
                                                                                                                    </command>
                                                                                                                    <postProcessing>
                                                                                                                        <analysisRules>
                                                                                                                            <item>
                                                                                                                                <extractorInfo extractorType="none">
                                                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                </extractorInfo>
                                                                                                                                <processorInfo ruleType="message">
                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                        <message> For device &quot;[conn_device_name]&quot; ports [conn_device_ports_per_lag] are included in LAG</message>
                                                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                                                    </ruleProperties>
                                                                                                                                </processorInfo>
                                                                                                                            </item>
                                                                                                                        </analysisRules>
                                                                                                                    </postProcessing>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="44023992-c6d3-43b0-9f49-c47afcde3036" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>open session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="3eaab487-7ec4-40b7-b461-3a563b532e62" action="open" session="fortiswitch" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>project://Fortiswitch_console/session_profiles/console.ffsp</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                    <completionProperties>
                                                                                                                                        <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                    </completionProperties>
                                                                                                                                </stepProperties>
                                                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                                    <ipAddress inherit="false">[conn_device_console_ip_addr]</ipAddress>
                                                                                                                                    <port inherit="false">[conn_device_console_port]</port>
                                                                                                                                </sessionProperties>
                                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                            </applicationProperties>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="98a6248a-1022-46a6-9110-acceeddcd951" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>set parameters based on name convention</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="0f4ecc9a-306f-4b71-bd9a-f26ee4c9287b" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>name_tsw=&quot;LAG&quot;+&quot;_&quot;+&quot;_&quot;.join(conn_device_ports_per_lag)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="a3a17ef7-4e34-48ac-94ec-74dbd84e0727" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>mode=&quot;active&quot;</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="967e9b56-5cae-4a17-a5c7-04ea33cb0608" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>console login and unset trunk</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="b049574b-0512-4801-9684-77e9245ff794" action="unsetTrunkModeLag" session="fortiswitch" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>-name [name_tsw]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>retCode()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                            <message>For &quot;[conn_device_name]&quot; delete LAG on ports [conn_device_ports_per_lag] is ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                            <message>For &quot;[conn_device_name]&quot; delete LAG is not ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="5fd89222-2502-420d-b56e-3bc0baa34cd1" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>discover and delete the LAG port </body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="3016a358-d102-457d-a8ba-a33547e652cf" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_device_id]/ports?limit=200</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>mapped/Json/ports/item[*]/name</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_device_ports</storageLocation>
                                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>mapped/Json/ports/item[*]/id</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_device_port_ids</storageLocation>
                                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/ports?limit=200" action.inherit="false"/>
                                                                                                                        </item>
                                                                                                                        <item guid="03d8e009-1fbc-4cee-a4a5-e729e1d04479" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>name_tsw in conn_device_ports:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="1a0d3d24-4401-40af-ac00-407e228f7373" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>conn_portId=conn_device_port_ids[conn_device_ports.index(name_tsw)]</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="7608f336-5aad-4c2f-ad0f-ab83517d343b" action="DELETE" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                    <command>
                                                                                                                                        <body>/velocity/api/inventory/v16/device/[conn_device_id]/port/[conn_portId]</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/port/[conn_portId]" action.inherit="false"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="a0234f85-c65a-4568-8b17-4f0043670775" action="POST" session="velocity">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_device_id]/action?type=discover</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="message">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                <message> Waiting for discover operation on [conn_device_name]</message>
                                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                                                                    <memberClasses>
                                                                                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                                                                    </memberClasses>
                                                                                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                                                                </httpHeader>
                                                                                                                            </applicationProperties>
                                                                                                                        </item>
                                                                                                                        <item guid="b38417cf-8b0c-40e3-8cee-c692be7064ff" action="sleep">
                                                                                                                            <command>
                                                                                                                                <body>10</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="a4ea307f-3882-4746-872b-099250f4a2bf" action="consoleLogin" session="fortiswitch" useFieldsInCommand="false">
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>retCode()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                            <message>--- console login not ok; fail test</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                        <item guid="59ea2187-9245-4596-887f-4fc48c904507" action="command" session="fortiswitch">
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>promptName()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>str(value) == &quot;prompt1&quot; </expression>
                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                            <message>For &quot;[conn_device_name]&quot;: discover operation was successfully</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="RepeatStep">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                                                                <promptProperties>
                                                                                                                                    <stepPrompts>
                                                                                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">* login:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt2" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                                                                            <Content sub="true">* #</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt3">
                                                                                                                                            <Content>Password:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt4">
                                                                                                                                            <Content>--More-- </Content>
                                                                                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt5">
                                                                                                                                            <Content>Do you want to continue? (y/n)</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt6" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">* (*) #</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt7" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">*:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt8" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">*</Content>
                                                                                                                                        </item>
                                                                                                                                    </stepPrompts>
                                                                                                                                </promptProperties>
                                                                                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                </completionProperties>
                                                                                                                            </applicationProperties>
                                                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="1d3591c8-3a36-43e3-a8f3-438d7a836a48" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>console exit</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="03ea3a32-d4da-4d90-8302-9c8a7a24433c" action="consoleExit" session="fortiswitch" useFieldsInCommand="false">
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="7852d525-1faa-4f31-b8ee-6af27153ec30" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>close session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="1757912b-0520-4ca6-b6a6-323561c3a553" action="close" session="fortiswitch">
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="34ad8492-97e1-4462-a76d-dd87b2bbb13a" action="if" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_template_name == &quot;Arista Switch&quot;:</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="5867a913-faa9-40b4-a670-091f0d6882b5" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>info</body>
                                                                                                                    </command>
                                                                                                                    <postProcessing>
                                                                                                                        <analysisRules>
                                                                                                                            <item>
                                                                                                                                <extractorInfo extractorType="none">
                                                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                </extractorInfo>
                                                                                                                                <processorInfo ruleType="message">
                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                        <message> For device &quot;[conn_device_name]&quot; ports [conn_device_ports_per_lag] are included in LAG</message>
                                                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                                                    </ruleProperties>
                                                                                                                                </processorInfo>
                                                                                                                            </item>
                                                                                                                        </analysisRules>
                                                                                                                    </postProcessing>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="62bda9ea-fb05-4ec2-9f3a-4d8cd29c138f" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>open session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="2e82b1d4-d411-4d81-88db-ab529d73a869" action="open" session="arista" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>project://Arista_console/session_profiles/console.ffsp</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                    <completionProperties>
                                                                                                                                        <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                    </completionProperties>
                                                                                                                                </stepProperties>
                                                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                                    <ipAddress inherit="false">[conn_device_console_ip_addr]</ipAddress>
                                                                                                                                    <port inherit="false">[conn_device_console_port]</port>
                                                                                                                                </sessionProperties>
                                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                            </applicationProperties>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="e4d6510d-a25e-474d-8608-dccc38682cd0" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>set parameters based on name convention</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="0d37c1cd-f58e-481d-aa2a-59cd8fad5707" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>number = 1</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="0c4423a8-af34-4f4c-b900-783494da3cd5" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>ports_tsw=&quot;,&quot;.join(conn_device_ports_per_lag)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="93d0477f-3e88-45bd-82cc-8194ee4bc5d5" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>mode=&quot;active&quot;</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="fe9f25bd-62b2-43cf-bf8a-c9c5f0b54053" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>port_channel=&quot;Po&quot;+str(number)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="13e28a69-b4f7-4f8a-9349-8379daa62ece" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>console login and unset port-channel</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="512fba40-8a36-4906-9b54-52d6f2e79d03" action="unsetSwitchPortChannel" session="arista" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>-number [number]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>retCode()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                            <message>For &quot;[conn_device_name]&quot; delete LAG on ports [conn_device_ports_per_lag] is ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                            <message>For &quot;[conn_device_name]&quot; delete LAG is not ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="5f797807-4a4f-4a02-b8b9-8ad106dc13ee" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>discover and delete the LAG port </body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="9a6f5e77-0a14-4b20-886f-c5085f9737ef" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_device_id]/ports?limit=200</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>mapped/Json/ports/item[*]/name</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_device_ports</storageLocation>
                                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>mapped/Json/ports/item[*]/id</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_device_port_ids</storageLocation>
                                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/ports?limit=200" action.inherit="false"/>
                                                                                                                        </item>
                                                                                                                        <item guid="233ac987-5005-47d0-a6b6-f483d4c0ad9a" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>port_channel in conn_device_ports:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="e72c0639-40c8-4d83-9964-d6356a659976" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>conn_portId=conn_device_port_ids[conn_device_ports.index(port_channel)]</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="eefd1170-ee9e-4ff1-88e8-fed46d23edcb" action="DELETE" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                    <command>
                                                                                                                                        <body>/velocity/api/inventory/v16/device/[conn_device_id]/port/[conn_portId]</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/port/[conn_portId]" action.inherit="false"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="4a5304ab-15cc-476b-bf8b-7ee03958b268" action="POST" session="velocity">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_device_id]/action?type=discover</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="message">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                <message> Waiting for discover operation on [conn_device_name]</message>
                                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                                                                    <memberClasses>
                                                                                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                                                                    </memberClasses>
                                                                                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                                                                </httpHeader>
                                                                                                                            </applicationProperties>
                                                                                                                        </item>
                                                                                                                        <item guid="b523b873-9887-41f7-a450-c6906379644b" action="sleep" skip="true">
                                                                                                                            <command>
                                                                                                                                <body>20</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="975441b0-8ba6-460a-8e26-3131e8ae3e9f" action="consoleLogin" session="fortiswitch" skip="true" useFieldsInCommand="false">
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>retCode()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                            <message>--- console login not ok; fail test</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                        <item guid="cfcef5b3-81cb-4bba-bb8c-fff24b28254f" action="command" session="fortiswitch" skip="true">
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>promptName()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>str(value) == &quot;prompt1&quot; or str(value) ==&quot;prompt4&quot;</expression>
                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                            <message>For &quot;[conn_device_name]&quot;: discover operation was successfully</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="RepeatStep">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                                                                <promptProperties>
                                                                                                                                    <stepPrompts>
                                                                                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">* login:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt2" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                                                                            <Content sub="true">* #</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt3">
                                                                                                                                            <Content>Password:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt4">
                                                                                                                                            <Content>--More-- </Content>
                                                                                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt5">
                                                                                                                                            <Content>Do you want to continue? (y/n)</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt6" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">* (*) #</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt7" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">*:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt8" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">*</Content>
                                                                                                                                        </item>
                                                                                                                                    </stepPrompts>
                                                                                                                                </promptProperties>
                                                                                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                </completionProperties>
                                                                                                                            </applicationProperties>
                                                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                                                        </item>
                                                                                                                        <item guid="5ff5ee12-df67-4a58-8161-f646457339e3" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>i=0</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="2503ed56-eb27-4746-ac30-1f8656f99f8d" action="while" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>i&lt;10:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="bcf107e6-f3f7-4ec2-8eb8-dbd37f043a4a" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>i = i + 2</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="78499f3f-1308-4e8e-bc6a-01896fc2f740" action="sleep">
                                                                                                                                    <command>
                                                                                                                                        <body>3</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="cd0411b2-5749-4d05-84db-a8c37f10dde9" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>print(i)</body>
                                                                                                                                    </command>
                                                                                                                                    <postProcessing>
                                                                                                                                        <analysisRules>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                        <query>responseLine()</query>
                                                                                                                                                    </extractorProperties>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="assert">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                        <expression>int(value) == 9</expression>
                                                                                                                                                        <actionsWhenTrue>
                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                    <message>For &quot;[conn_device_name]&quot;: discover operation was successfully</message>
                                                                                                                                                                </actionProperties>
                                                                                                                                                            </item>
                                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                            </item>
                                                                                                                                                        </actionsWhenTrue>
                                                                                                                                                        <actionsWhenFalse>
                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                                    <message>--- discover operation is still in progress...</message>
                                                                                                                                                                </actionProperties>
                                                                                                                                                            </item>
                                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                            </item>
                                                                                                                                                        </actionsWhenFalse>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                        </analysisRules>
                                                                                                                                    </postProcessing>
                                                                                                                                    <eventHandlers>
                                                                                                                                        <item name="OnQueryExtractorInvalidQuery">
                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Information">
                                                                                                                                                    <message>{auto_message_wait}</message>
                                                                                                                                                </actionProperties>
                                                                                                                                            </item>
                                                                                                                                            <item actionId="RepeatStep">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup"/>
                                                                                                                                            </item>
                                                                                                                                        </item>
                                                                                                                                        <item name="OnNoMatchesFound">
                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Information">
                                                                                                                                                    <message>{auto_message_wait}</message>
                                                                                                                                                </actionProperties>
                                                                                                                                            </item>
                                                                                                                                            <item actionId="RepeatStep">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup"/>
                                                                                                                                            </item>
                                                                                                                                        </item>
                                                                                                                                    </eventHandlers>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="04ff4412-66fd-4529-8a04-e35d77e40d18" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>console exit</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="a602d8dc-76a3-435d-b54f-78e5693a2ead" action="consoleExit" session="arista" useFieldsInCommand="false">
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="78f15661-1a17-4a1d-8316-9553b2d10d4e" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>close session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="3538ffb5-cf8b-4958-8e47-0ed9963b58fe" action="close" session="arista">
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="671dc4ef-3e66-48c8-9947-9b735751f75e" action="if" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_template_name == &quot;Lepton ColdFusion Switch&quot;:</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="91c1bc87-64bb-4b24-a4c7-880d5da5781f" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>open session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="97484b2f-abc6-4b5b-a425-bb0237da97f9" action="open" session="lepton" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>project://Lepton_ssh/session_profiles/ssh.ffsp</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                <sessionProperties type="com.fnfr.svt.applications.ssh.documents.SSHProperties">
                                                                                                                                    <ipAddress inherit="false">[conn_device_ipAddress]</ipAddress>
                                                                                                                                    <user inherit="false">[conn_device_username]</user>
                                                                                                                                    <password inherit="false" masked="false">[conn_device_password]</password>
                                                                                                                                </sessionProperties>
                                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                            </applicationProperties>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="74730b48-6858-43e7-8848-160192882c3c" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>ssh login and get connected port</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="6445e8d2-57fa-4509-8b72-3a507c3fcdb3" action="for" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>conn_port_name in conn_device_ports_per_lag:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="0e334af6-f989-4ca7-be1b-0655c682b9bc" action="getConnectedPort" session="lepton" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>-port [conn_port_name]</body>
                                                                                                                                    </command>
                                                                                                                                    <postProcessing>
                                                                                                                                        <analysisRules>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                        <query>responseLine()</query>
                                                                                                                                                    </extractorProperties>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                        <storageLocation>conn_port_lepton</storageLocation>
                                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                        </analysisRules>
                                                                                                                                    </postProcessing>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="8cb0f506-d2fc-4f6e-a257-7acdaed13dce" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(conn_port_lepton)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="eba3dc0f-4c91-4723-9f94-c7c1deb45537" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>len(conn_port_lepton)==3:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="8387cfbb-14e8-4810-8120-ef2ef04baf9a" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>conn_port_lepton=conn_port_lepton[:2]+&quot;0&quot;+conn_port_lepton[2:]</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="79484b61-ff74-43bf-94f4-8f25ac9c5404" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(conn_port_lepton)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="c723eb24-41ec-4d5f-9765-2f5a8bcf7ace" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>check neighbor-device on lepton side</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="dc75811b-07c5-401b-9e17-4c6c2ed58367" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_device_id]/ports?limit=200</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query sub="true">mapped/Json/ports/*\\[name=&quot;[conn_port_lepton]&quot;]/connectedPortName</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_port_name</storageLocation>
                                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query sub="true">mapped/Json/ports/*\\[name=&quot;[conn_port_lepton]&quot;]/connectedPortParentName</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_name</storageLocation>
                                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/ports?limit=200" action.inherit="false"/>
                                                                                                                        </item>
                                                                                                                        <item guid="380748ee-0dbb-40ca-ba4a-922516ec67f0" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(conn_lepton_port_name, conn_lepton_device_name)</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="message">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                <message>--- found lepton device connection: [conn_lepton_device_name] on port [conn_port_lepton]</message>
                                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="c8d9ad4c-5ab5-4d37-8739-366e8af547b4" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                            <command>
                                                                                                                                <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[conn_lepton_device_name]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>mapped/Json/devices/item/id</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_id</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>mapped/Json/devices/item/templateId</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_template_id</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[conn_lepton_device_name]" action.inherit="false"/>
                                                                                                                        </item>
                                                                                                                        <item guid="a5d98bab-f118-4eaf-bb91-e3d79e4252bc" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_lepton_device_id]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>mapped/Json/properties/*[name=&quot;ipAddress&quot;]/value</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_ip_addr</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>mapped/Json/properties/*[name=&quot;Console&quot;]/value</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_console_ip_addr</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>mapped/Json/properties/*[name=&quot;Console Port&quot;]/value</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_console_port</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>mapped/Json/properties/*[name=&quot;username&quot;]/value</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_username</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>mapped/Json/properties/*[name=&quot;password&quot;]/value</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_password</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_lepton_device_id]" action.inherit="false"/>
                                                                                                                        </item>
                                                                                                                        <item guid="bfa69aaa-baf3-4ef4-8820-f2dc53696c15" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/template/[conn_lepton_template_id]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>mapped/Json/name</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_template_name</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/template/[conn_lepton_template_id]" action.inherit="false"/>
                                                                                                                        </item>
                                                                                                                        <item guid="078a49ad-2751-4612-8fb8-30314a8889fc" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(conn_lepton_template_name)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="e785a706-9df5-48f5-a4d5-b08b57ee3597" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>login to lepton neighbor-device and config lag</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="d326d130-29dd-4f92-a3f2-8b06b0bc69c4" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>conn_lepton_template_name == &quot;Fortinet Switch&quot;:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="39904011-39e1-4f4b-afb4-7aeb838d0b84" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>info</body>
                                                                                                                                    </command>
                                                                                                                                    <postProcessing>
                                                                                                                                        <analysisRules>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="none">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="message">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                        <message> For device &quot;[conn_lepton_device_name]&quot; ports [conn_lepton_port_names] are included in LAG</message>
                                                                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                        </analysisRules>
                                                                                                                                    </postProcessing>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="5516d4eb-fb68-44f1-a359-9af13398e51e" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>open session</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="179e794c-ba48-4981-99e9-b8fab8ad53d0" action="open" session="fortiswitch_lepton" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>project://Fortiswitch_console/session_profiles/console.ffsp</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                                    <completionProperties>
                                                                                                                                                        <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                                    </completionProperties>
                                                                                                                                                </stepProperties>
                                                                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                                                    <ipAddress inherit="false">[conn_lepton_device_console_ip_addr]</ipAddress>
                                                                                                                                                    <port inherit="false">[conn_lepton_device_console_port]</port>
                                                                                                                                                </sessionProperties>
                                                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                            </applicationProperties>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="3a884763-b8ac-4d0f-9355-ad70435d761d" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>set parameters based on name convention</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="5015af24-68fb-4a80-b356-d8d2bc98d110" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>name_tsw=&quot;LAG&quot;+&quot;_&quot;+&quot;_&quot;.join(conn_lepton_port_name)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="6ca6691b-3bbb-4a67-9a94-b8183313051d" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>mode=&quot;active&quot;</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="4e39b596-f532-4d9e-8d6f-ca045e3bf60b" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>console login and unset trunk</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="22102165-1a03-4e1c-9742-b2550e772ca5" action="unsetTrunkModeLag" session="fortiswitch_lepton" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>-name [name_tsw]</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>retCode()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                            <message>For &quot;[conn_device_name]&quot; delete LAG on ports [conn_port_names] is ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                            <message>For &quot;[conn_device_name]&quot; delete LAG is not ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="2e5ed3d7-7701-49ca-a3fa-4b0d09dd410c" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>discover and delete the LAG port </body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="f14ca1bc-60c6-4a6a-ab8b-7629febf2cb2" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                            <command>
                                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_lepton_device_id]/ports?limit=200</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>mapped/Json/ports/item[*]/name</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                                <storageLocation>conn_lepton_device_ports</storageLocation>
                                                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>mapped/Json/ports/item[*]/id</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                                <storageLocation>conn_lepton_device_port_ids</storageLocation>
                                                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_lepton_device_id]/ports?limit=200" action.inherit="false"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="cfc62fa2-c678-4141-9433-0055ab149bcb" action="if" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>name_tsw in conn_lepton_device_ports:</body>
                                                                                                                                            </command>
                                                                                                                                            <nestedSteps>
                                                                                                                                                <item guid="6a7d9aba-5ab6-4342-8446-a02f98d8e31b" action="eval" useFieldsInCommand="false">
                                                                                                                                                    <command>
                                                                                                                                                        <body>conn_lepton_portId=conn_lepton_device_port_ids[conn_lepton_device_ports.index(name_tsw)]</body>
                                                                                                                                                    </command>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                                <item guid="19d2125f-1f0f-426d-9556-4c90c7b51f8b" action="DELETE" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                                    <command>
                                                                                                                                                        <body>/velocity/api/inventory/v16/device/[conn_lepton_device_id]/port/[conn_lepton_portId]</body>
                                                                                                                                                    </command>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_lepton_device_id]/port/[conn_lepton_portId]" action.inherit="false"/>
                                                                                                                                                </item>
                                                                                                                                            </nestedSteps>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="eb7cec39-4615-41fd-ad91-6dfcbec6ccc6" action="POST" session="velocity">
                                                                                                                                            <command>
                                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_lepton_device_id]/action?type=discover</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="message">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                                <message> Waiting for discover operation on [conn_lepton_device_name]</message>
                                                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[conn_lepton_device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                                                                                    <memberClasses>
                                                                                                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                                                                                    </memberClasses>
                                                                                                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                                                                                </httpHeader>
                                                                                                                                            </applicationProperties>
                                                                                                                                        </item>
                                                                                                                                        <item guid="28671aa9-dcb8-4e30-a19b-8e2fa667941b" action="sleep">
                                                                                                                                            <command>
                                                                                                                                                <body>10</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="367b0cac-c7a4-4799-9f3b-2eab83feda65" action="consoleLogin" session="fortiswitch_lepton" useFieldsInCommand="false">
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>retCode()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                            <message>--- console login not ok; fail test</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="4d837353-ffb8-4863-b148-26e0fff81c0e" action="command" session="fortiswitch_lepton">
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                                <query>promptName()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>str(value) == &quot;prompt1&quot; </expression>
                                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                            <message>For &quot;[conn_device_name]&quot;: discover operation was successfully</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="RepeatStep">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                                                                                <promptProperties>
                                                                                                                                                    <stepPrompts>
                                                                                                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">* login:</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt2" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                                                                                            <Content sub="true">* #</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt3">
                                                                                                                                                            <Content>Password:</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt4">
                                                                                                                                                            <Content>--More-- </Content>
                                                                                                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt5">
                                                                                                                                                            <Content>Do you want to continue? (y/n)</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt6" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">* (*) #</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt7" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">*:</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt8" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">*</Content>
                                                                                                                                                        </item>
                                                                                                                                                    </stepPrompts>
                                                                                                                                                </promptProperties>
                                                                                                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                                </completionProperties>
                                                                                                                                            </applicationProperties>
                                                                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="542f5711-7cfe-4054-b266-a50a485b697d" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>console exit</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="8de8e826-eebd-49b4-9883-30d7e1a0c6ad" action="consoleExit" session="fortiswitch_lepton" useFieldsInCommand="false">
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="6ec7ca1b-2a37-4003-b6e9-88de94719538" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>close session</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="12ac6899-e385-4d8c-a1a5-83fe6d7a5e91" action="close" session="fortiswitch_lepton">
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="adc77002-741b-434d-a9da-823e093faf1e" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>conn_lepton_template_name == &quot;Arista Switch&quot;:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="05fac82d-9cb5-4e88-9dad-bdfa6afb7892" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>info</body>
                                                                                                                                    </command>
                                                                                                                                    <postProcessing>
                                                                                                                                        <analysisRules>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="none">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="message">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                        <message> For device &quot;[conn_lepton_device_name]&quot; ports [conn_lepton_port_name] are included in LAG</message>
                                                                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                        </analysisRules>
                                                                                                                                    </postProcessing>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="583b3a36-094a-4e7f-83d7-58116cbb58db" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>open session</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="bccb7e65-43b1-435e-8784-42ae1050cc7f" action="open" session="arista_lepton">
                                                                                                                                            <command>
                                                                                                                                                <body>project://Arista_console/session_profiles/console.ffsp</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                                                    <ipAddress inherit="false">[conn_lepton_device_console_ip_addr]</ipAddress>
                                                                                                                                                    <port inherit="false">[conn_lepton_device_console_port]</port>
                                                                                                                                                    <TerminalProperties>
                                                                                                                                                        <stepDefaults>
                                                                                                                                                            <completionProperties>
                                                                                                                                                                <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                                            </completionProperties>
                                                                                                                                                        </stepDefaults>
                                                                                                                                                    </TerminalProperties>
                                                                                                                                                </sessionProperties>
                                                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                            </applicationProperties>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="98a44127-9b95-449e-8fb8-316fbc9f1ce8" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>set parameters based on name convention</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="5988a87c-ef30-4ef8-9f97-1b4d0fd84b39" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>number = &quot;10&quot;</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="9d931174-22fd-4152-adca-db6bf0b6aa05" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>ports_arista=&quot;,&quot;.join(conn_lepton_port_name)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="439787a8-c499-4c03-b93f-6e57b138a87e" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>print(ports_arista)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="50c097ea-8972-4964-b3a7-e93ca79e6a8f" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>mode=&quot;active&quot;</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="6ba492d0-1da3-4365-9d21-30d070845b28" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>port_channel=&quot;Po&quot;+str(number)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="97098143-bfbd-415c-a9a5-8bdf02ad0648" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>console login and unset port-channel</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="2459dd60-8aca-4032-b49a-cc4cb3a84f9b" action="unsetSwitchPortChannel" session="arista_lepton" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>-number [number]</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>retCode()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot; delete LAG on ports [conn_lepton_port_name] is ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot; delete LAG is not ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="677528c5-db17-4492-90e7-a37595111826" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>discover and delete the LAG port </body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="37b641da-f0fd-48e4-8e19-01d5b99f0f04" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                            <command>
                                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_lepton_device_id]/ports?limit=200</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>mapped/Json/ports/item[*]/name</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                                <storageLocation>conn_lepton_device_ports</storageLocation>
                                                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>mapped/Json/ports/item[*]/id</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                                <storageLocation>conn_lepton_device_port_ids</storageLocation>
                                                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_lepton_device_id]/ports?limit=200" action.inherit="false"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="c3c9cd08-ba32-48af-a546-e1ec3f26c28f" action="if" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>port_channel in conn_lepton_device_ports:</body>
                                                                                                                                            </command>
                                                                                                                                            <nestedSteps>
                                                                                                                                                <item guid="0592f90a-c53e-413c-b8e7-26114b11a29d" action="eval" useFieldsInCommand="false">
                                                                                                                                                    <command>
                                                                                                                                                        <body>conn_lepton_portId=conn_lepton_device_port_ids[conn_lepton_device_ports.index(port_channel)]</body>
                                                                                                                                                    </command>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                                <item guid="cc576454-96bf-4c2c-9713-b928a640b662" action="DELETE" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                                    <command>
                                                                                                                                                        <body>/velocity/api/inventory/v16/device/[conn_lepton_device_id]/port/[conn_lepton_portId]</body>
                                                                                                                                                    </command>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_lepton_device_id]/port/[conn_lepton_portId]" action.inherit="false"/>
                                                                                                                                                </item>
                                                                                                                                            </nestedSteps>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="ce36e98d-9e64-4795-b2e7-5237bf1d1bab" action="POST" session="velocity">
                                                                                                                                            <command>
                                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_lepton_device_id]/action?type=discover</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="message">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                                <message> Waiting for discover operation on [conn_lepton_device_name]</message>
                                                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[conn_lepton_device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                                                                                    <memberClasses>
                                                                                                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                                                                                    </memberClasses>
                                                                                                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                                                                                </httpHeader>
                                                                                                                                            </applicationProperties>
                                                                                                                                        </item>
                                                                                                                                        <item guid="59591c64-9c6c-467c-9fd2-95cdaabdf623" action="sleep" skip="true">
                                                                                                                                            <command>
                                                                                                                                                <body>10</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="6fa96ef4-2184-4351-a9db-d99093b3b4b3" action="consoleLogin" session="arista_lepton" skip="true" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>-username [conn_lepton_device_username] -password [conn_lepton_device_password]</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>retCode()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                            <message>--- console login not ok; fail test</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="8be3bdaf-1670-40fd-afe1-d3028e6e0279" action="command" session="arista_lepton" skip="true">
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                                <query>promptName()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>str(value) == &quot;prompt1&quot; </expression>
                                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                            <message>For &quot;[conn_device_name]&quot;: discover operation was successfully</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="RepeatStep">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                                                                                <promptProperties>
                                                                                                                                                    <stepPrompts>
                                                                                                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">* login:</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt2" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                                                                                            <Content sub="true">* #</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt3">
                                                                                                                                                            <Content>Password:</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt4">
                                                                                                                                                            <Content>--More-- </Content>
                                                                                                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt5">
                                                                                                                                                            <Content>Do you want to continue? (y/n)</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt6" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">* (*) #</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt7" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">*:</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt8" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">*</Content>
                                                                                                                                                        </item>
                                                                                                                                                    </stepPrompts>
                                                                                                                                                </promptProperties>
                                                                                                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                                </completionProperties>
                                                                                                                                            </applicationProperties>
                                                                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="911c917f-3559-47e9-8a3c-d6b573a9b069" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>i=0</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="506f50ae-8fcb-45d6-bac5-f427e4c9a592" action="while" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>i&lt;10:</body>
                                                                                                                                            </command>
                                                                                                                                            <nestedSteps>
                                                                                                                                                <item guid="08cd5934-64ec-4711-859e-a05de93f28fe" action="eval" useFieldsInCommand="false">
                                                                                                                                                    <command>
                                                                                                                                                        <body>i = i + 2</body>
                                                                                                                                                    </command>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                                <item guid="619fe093-58c5-4e89-9221-ce5b3928e4a8" action="sleep">
                                                                                                                                                    <command>
                                                                                                                                                        <body>3</body>
                                                                                                                                                    </command>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                                <item guid="2da0e9df-377f-43c0-93a7-b5d54e7a148d" action="eval" useFieldsInCommand="false">
                                                                                                                                                    <command>
                                                                                                                                                        <body>print(i)</body>
                                                                                                                                                    </command>
                                                                                                                                                    <postProcessing>
                                                                                                                                                        <analysisRules>
                                                                                                                                                            <item>
                                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                                        <query>responseLine()</query>
                                                                                                                                                                    </extractorProperties>
                                                                                                                                                                </extractorInfo>
                                                                                                                                                                <processorInfo ruleType="assert">
                                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                        <expression>int(value) == 9</expression>
                                                                                                                                                                        <actionsWhenTrue>
                                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                                    <message>For &quot;[conn_lepton_device_name]&quot;: discover operation was successfully</message>
                                                                                                                                                                                </actionProperties>
                                                                                                                                                                            </item>
                                                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                            </item>
                                                                                                                                                                        </actionsWhenTrue>
                                                                                                                                                                        <actionsWhenFalse>
                                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                                                    <message>--- discover operation is still in progress...</message>
                                                                                                                                                                                </actionProperties>
                                                                                                                                                                            </item>
                                                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                            </item>
                                                                                                                                                                        </actionsWhenFalse>
                                                                                                                                                                    </ruleProperties>
                                                                                                                                                                </processorInfo>
                                                                                                                                                            </item>
                                                                                                                                                        </analysisRules>
                                                                                                                                                    </postProcessing>
                                                                                                                                                    <eventHandlers>
                                                                                                                                                        <item name="OnQueryExtractorInvalidQuery">
                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Information">
                                                                                                                                                                    <message>{auto_message_wait}</message>
                                                                                                                                                                </actionProperties>
                                                                                                                                                            </item>
                                                                                                                                                            <item actionId="RepeatStep">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup"/>
                                                                                                                                                            </item>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="OnNoMatchesFound">
                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Information">
                                                                                                                                                                    <message>{auto_message_wait}</message>
                                                                                                                                                                </actionProperties>
                                                                                                                                                            </item>
                                                                                                                                                            <item actionId="RepeatStep">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup"/>
                                                                                                                                                            </item>
                                                                                                                                                        </item>
                                                                                                                                                    </eventHandlers>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                            </nestedSteps>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="5c7d20df-d8e9-48dd-9270-a590ad22c64f" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>console exit</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="9b065e68-33f3-4248-af67-7f1e59cdd09b" action="consoleExit" session="arista_lepton" useFieldsInCommand="false">
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="1f9a6594-7268-4158-ba73-3bcb25da7b94" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>close session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="791063cf-4393-40a4-95d8-f9821ad8b6f6" action="close" session="lepton">
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="abf7ca04-d8a6-41f3-8ceb-622e1b4cf5e7" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>Reinit dicts</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="ec34720e-a5a5-49bc-a1a4-6667fa01edde" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>device_ports_per_lag=[]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="fa793273-919b-4d79-b484-ac6762da73c1" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_device_ports_per_lag=[]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="cc716c11-035c-4a16-9c63-e2bc044f31a6" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>device_ports=[]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="4ee57578-ddb7-4edc-9d78-79db3f25a192" action="if" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>device_lag_FGT_ports != []:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="178bbdfb-da59-47f9-8dff-ef56e7d07f74" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Find physical ports from LAG </body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="84ca9c85-cd83-47ef-8823-39f259ff44ef" action="for" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>port_item in device_lag_FGT_ports:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="fe6fd771-277e-4e2e-ad4c-149054c7b64c" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>port_item=port_item[0]</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="b3d39c15-01a8-4e22-a816-3ea92c1ee9a7" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(port_item)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="c2bab241-978f-4df0-9187-4e15e77fef41" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                    <command>
                                                                                                        <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                                                                                    </command>
                                                                                                    <postProcessing>
                                                                                                        <analysisRules>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query sub="true">mapped/Json/items/*\\[topologyResourceId=&quot;[port_item]&quot;]/name</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="store">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                        <storageLocation>device_port</storageLocation>
                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query sub="true">mapped/Json/items/*\\[topologyResourceId=&quot;[port_item]&quot;]/inventoryParentResourceId</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="store">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                        <storageLocation>parent_port_id</storageLocation>
                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                        </analysisRules>
                                                                                                    </postProcessing>
                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                                                                                </item>
                                                                                                <item guid="a86d918c-b156-4118-9c88-fc4fc0dcacaa" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(parent_port_id, device_id)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="bd2b77f9-0976-42ba-809b-f144358bda70" action="if" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>device_id == parent_port_id:</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="062e1977-caf5-4370-985f-acec72249ea4" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>device_FGT_ports.append(device_port)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="36592807-3be2-4d7f-9da8-36eb950ab955" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(device_FGT_ports)</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="none">
                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="message">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                <message> For device &quot;[device]&quot; ports [device_FGT_ports] are included in LAG connections</message>
                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="bbc5b0f4-eac7-4a5e-bbcf-9fb305753d16" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Determine device ports included in LAG on neighbor-device</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="7b5a6957-4958-4c94-89aa-34b9e0d0f02e" action="for" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>device_port in device_FGT_ports:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="10b1518d-0fef-4a09-9af2-c326d90c5dc4" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                    <command>
                                                                                                        <body>/velocity/api/inventory/v16/device/[device_id]/ports?limit=200</body>
                                                                                                    </command>
                                                                                                    <postProcessing>
                                                                                                        <analysisRules>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query sub="true">mapped/Json/ports/*\\[name=&quot;[device_port]&quot;]/connectedPortName</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="store">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                        <storageLocation>conn_port_FGT_name</storageLocation>
                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query sub="true">mapped/Json/ports/*\\[name=&quot;[device_port]&quot;]/connectedPortParentName</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="store">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                        <storageLocation>conn_device_FGT_name</storageLocation>
                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                        </analysisRules>
                                                                                                    </postProcessing>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="1261e6e4-83f1-4f4d-b740-6de7ae98025d" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_port_FGT_names.append(conn_port_FGT_name)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="cf05d881-09a6-460a-be03-99bcc3311566" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_device_FGT_names.append(conn_device_FGT_name)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="d50fbe86-32a0-441d-a246-caebce9ed8ed" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>string=device_port+&quot; : &quot;+conn_port_FGT_name +&quot; : &quot;+ conn_device_FGT_name</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="87127283-7e00-4ca7-9589-80f00479fff2" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>device_FGT_name_port.append(string)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="757286e5-52a8-486a-9127-ed273cf2ecc1" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>string=&quot;&quot;</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/ports?limit=200" action.inherit="false"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="9c7b41c0-7e84-44e0-b7a3-0e04ba68986d" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Check device for multiple LAG connections and delete LAG </body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="f694b2a3-ca29-4955-a3f9-4d4bd2f38859" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>conn_device_FGT_names=list(set(conn_device_FGT_names))</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="1587cad5-a824-40f9-867b-d68e6949360f" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(conn_device_FGT_names)</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="none">
                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="message">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                <message> For device &quot;[device]&quot; found [len(conn_device_FGT_names)] LAG connections</message>
                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="31dcf582-dde2-4740-97db-121202c4d33f" action="for" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>conn_device_FGT_name in conn_device_FGT_names:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="b3190c90-66d5-465e-a421-70e6d469ba44" action="for" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>element in device_FGT_name_port:</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="0ab17a16-07db-4df3-a0e2-646587420802" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>print(conn_device_FGT_name)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="80874879-97dc-4a14-bb30-fb4c2f092b28" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>print(element.split(&quot;:&quot;)[2].strip())</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="6f2605ab-a398-459a-bca9-ecd399b27815" action="if" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_device_FGT_name == element.split(&quot;:&quot;)[2].strip():</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="f40d9c24-70c9-4c97-a349-c59d6a4bc6a9" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>device_FGT_ports_per_lag.append(element.split(&quot;:&quot;)[0].strip())</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="a1899074-c136-4713-bcf6-d99d3d881ac5" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>conn_device_FGT_ports_per_lag.append(element.split(&quot;:&quot;)[1].strip())</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="4ec3cd7c-2cb6-4434-ba41-0433890d3fa3" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(device_FGT_ports_per_lag)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="36be19fc-19df-4378-b03d-4bc17267e6ac" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(conn_device_FGT_ports_per_lag)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="b13ca8b6-0f87-4c80-ae37-38feb46e2ed9" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>Get device details</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="acc47f56-56b7-4f59-819e-a5d465d073f6" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                            <command>
                                                                                                                <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>device_console_ip_addr</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console Port&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>device_console_port</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;username&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>device_username</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;password&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>device_password</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]" action.inherit="false"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="2929d50a-ab26-4ab5-943d-4d61ff61a379" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>Delete LAG on device</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="73609532-3c67-4ea5-b1a9-cf9d690bd3a7" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>open session</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="2a01712d-fe70-4299-9a62-12c4696273cd" action="open" session="fortigate_FGT" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>project://Fortigate_console/session_profiles/console.ffsp</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                        <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                            <completionProperties>
                                                                                                                                <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                            </completionProperties>
                                                                                                                        </stepProperties>
                                                                                                                        <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                            <ipAddress inherit="false">[device_console_ip_addr]</ipAddress>
                                                                                                                            <port inherit="false">[device_console_port]</port>
                                                                                                                        </sessionProperties>
                                                                                                                        <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                    </applicationProperties>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="29a0becc-bda9-4f41-8d24-dee22d40fcd0" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>set parameters based on name convention</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="13facf6a-a00d-4de6-93f9-f0a170ee9257" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>name=&quot;DATA&quot;+&quot;_&quot;+&quot;_&quot;.join(device_FGT_ports_per_lag).replace(&quot;port&quot;,&quot;&quot;)</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="ffea5f66-a828-4ea8-9f4a-27ba4d24336b" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>name=name[:10]</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="b4ae83f6-3e64-416d-831a-56a0e1479e93" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>print(name)</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="58a369e0-8fc3-4702-ba6f-93fcaabf998f" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>ports=&quot; &quot;.join(device_FGT_ports_per_lag)</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="41f2fa8a-041f-4324-ba87-b1bc59860424" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>print(ports)</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="ec7a1fd0-fbcc-41fd-a056-f8fcd14fc822" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>lag=&quot;LAG&quot;+&quot;_&quot;+&quot;_&quot;.join(device_FGT_ports_per_lag).replace(&quot;port&quot;,&quot;&quot;)</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="acd18a26-6110-4909-97a5-efcae3d23814" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>lag=lag[:13]</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="e8274623-d92c-477a-8442-ddc82945dcdf" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>print(lag)</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="1db018af-5484-41a4-9147-394c203ab156" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>console login and delete lag </body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="691efe7c-22f0-45d1-ad0e-4b48f91a251f" action="deleteLag" session="fortigate_FGT" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>-name [lag]</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="a28fad31-fbb1-4ce6-af9e-cd1119097b7c" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>assign interfaces to default vdom</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="75202ca7-b7e1-4cc9-a5cd-60cba4b4e54b" action="for" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>port in device_FGT_ports_per_lag:</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="990dad83-b9c3-4a3a-8a9d-c9dc7d0c9dc5" action="assignInterfacesToDefaultVdom" session="fortigate_FGT" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>-port [port]</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="ef022150-6420-41da-9650-8aef5ca26fe1" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>delete vdom</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="ec7eeeef-ac15-4fd0-ae4c-c75cbdfb1bd9" action="deleteVdom" session="fortigate_FGT" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>-name [name]</body>
                                                                                                                    </command>
                                                                                                                    <postProcessing>
                                                                                                                        <analysisRules>
                                                                                                                            <item>
                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                        <query>retCode()</query>
                                                                                                                                    </extractorProperties>
                                                                                                                                </extractorInfo>
                                                                                                                                <processorInfo ruleType="assert">
                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                        <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                        <actionsWhenTrue>
                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                    <message>For &quot;[device]&quot; delete LAG on ports [device_FGT_ports_per_lag] is ok</message>
                                                                                                                                                </actionProperties>
                                                                                                                                            </item>
                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                            </item>
                                                                                                                                        </actionsWhenTrue>
                                                                                                                                        <actionsWhenFalse>
                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                    <message>For &quot;[device]&quot; delete LAG is not ok</message>
                                                                                                                                                </actionProperties>
                                                                                                                                            </item>
                                                                                                                                            <item actionId="FailTest">
                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                            </item>
                                                                                                                                        </actionsWhenFalse>
                                                                                                                                    </ruleProperties>
                                                                                                                                </processorInfo>
                                                                                                                            </item>
                                                                                                                        </analysisRules>
                                                                                                                    </postProcessing>
                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="62a58d4b-8623-4e70-bec8-789d579a0640" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>update device ports in velocity</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="4f511aa4-e5c5-42d9-afdc-51ad011b050a" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                    <command>
                                                                                                                        <body>/velocity/api/inventory/v16/device/[device_id]/ports?limit=200</body>
                                                                                                                    </command>
                                                                                                                    <postProcessing>
                                                                                                                        <analysisRules>
                                                                                                                            <item>
                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                        <query>mapped/Json/ports/item[*]/name</query>
                                                                                                                                    </extractorProperties>
                                                                                                                                </extractorInfo>
                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                        <storageLocation>device_ports</storageLocation>
                                                                                                                                        <storeInAList>true</storeInAList>
                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                    </ruleProperties>
                                                                                                                                </processorInfo>
                                                                                                                            </item>
                                                                                                                            <item>
                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                        <query>mapped/Json/ports/item[*]/id</query>
                                                                                                                                    </extractorProperties>
                                                                                                                                </extractorInfo>
                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                        <storageLocation>device_port_ids</storageLocation>
                                                                                                                                        <storeInAList>true</storeInAList>
                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                    </ruleProperties>
                                                                                                                                </processorInfo>
                                                                                                                            </item>
                                                                                                                        </analysisRules>
                                                                                                                    </postProcessing>
                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/ports?limit=200" action.inherit="false"/>
                                                                                                                </item>
                                                                                                                <item guid="1bf8d854-b509-4721-8438-3c0e629f368a" action="if" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>lag in device_ports:</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="86a0f5f8-1b0d-4de9-9e54-3526dbd7c860" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>portId=device_port_ids[device_ports.index(lag)]</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="6c51e9c9-fc3a-481f-9026-da145105538c" action="DELETE" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/device/[device_id]/port/[portId]</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/port/[portId]" action.inherit="false"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="5cb6ae94-64dd-4e97-828a-f5c1af114b6b" action="for" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>port_name in device_ports:</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="72153668-60aa-4dd2-af9f-accd8c33f764" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>name in port_name:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="a76ccc79-7661-4b88-a0f8-60f022e55ae8" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>other_portId=device_port_ids[device_ports.index(port_name)]</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="7a0534d7-b371-42af-ae55-18a333f4e088" action="DELETE" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                    <command>
                                                                                                                                        <body>/velocity/api/inventory/v16/device/[device_id]/port/[other_portId]</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/port/[other_portId]" action.inherit="false"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="9fd63a1f-5173-4748-8f06-f5d373e51004" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>&quot;npu&quot; in port_name:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="ae939c5a-0e72-4f1f-9f25-789370cd659a" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>other_port_Id=device_port_ids[device_ports.index(port_name)]</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="7172eb2e-7f37-4865-89cd-2d1c30e34a36" action="DELETE" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                    <command>
                                                                                                                                        <body>/velocity/api/inventory/v16/device/[device_id]/port/[other_port_Id]</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/port/[other_port_Id]" action.inherit="false"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="fc53e6e1-5646-4cef-a2a4-99d2e394b496" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>console exit</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="f05a25c4-99c7-416c-9fe8-5cb4738b3dc5" action="consoleExit" session="fortigate_FGT" useFieldsInCommand="false">
                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="6d164ccf-f052-4ea6-a601-ae030403d015" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>close session</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="2e8201e7-e19b-4dd5-99fb-6d5b440611f0" action="close" session="fortigate_FGT">
                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="7365a85f-2793-4066-94ee-a8715dfb731a" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>Reinit dicts</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="bec5bdef-63d5-4853-8f74-52ec746719c1" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>device_ports_per_lag=[]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="6e369302-9bd8-4b06-a197-af5f97ebb31b" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>device_FGT_ports_per_lag=[]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="38e842c8-3d69-4219-b928-f91289efb01a" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_device_ports_per_lag=[]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="ab6fed93-de6d-4982-b813-5dede04d47fa" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_device_FGT_ports_per_lag=[]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="1e2d5be2-d45a-4ff2-89e2-1a988457fd38" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>device_ports=[]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="0f61dc1f-c573-4286-8b93-658aa8b7593f" action="if" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>device_lag_CN_ports != []:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="2fd59fbb-2135-4656-875d-0796800f4bfa" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Find physical ports from LAG</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="1947e92a-ce5d-45e8-b311-eca544c9e990" action="for" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>port_item in device_lag_CN_ports:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="a370797a-24cd-4681-8a08-b14c25467b6a" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>port_item=port_item[0]</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="52948fb3-b433-409f-a472-9f9199c188ff" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(port_item)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="1df1eb4b-289c-409a-8f65-22bae544147d" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                    <command>
                                                                                                        <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                                                                                    </command>
                                                                                                    <postProcessing>
                                                                                                        <analysisRules>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query sub="true">mapped/Json/items/*\\[topologyResourceId=&quot;[port_item]&quot;]/name</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="store">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                        <storageLocation>device_port</storageLocation>
                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query sub="true">mapped/Json/items/*\\[topologyResourceId=&quot;[port_item]&quot;]/inventoryParentResourceId</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="store">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                        <storageLocation>parent_port_id</storageLocation>
                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                        </analysisRules>
                                                                                                    </postProcessing>
                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                                                                                </item>
                                                                                                <item guid="2c368fce-d8c0-413f-9c3c-7fafe52ae9fd" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(parent_port_id, device_id)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="b841524b-b4a8-4990-99b7-ca00b8036ec9" action="if" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>device_id == parent_port_id:</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="b6396ee1-c20c-45bd-8a93-02c6777ca6d6" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>device_CN_ports.append(device_port)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="2130d506-fdd3-4fab-bf1a-6cca1a003e62" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(device_CN_ports)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="7218c2f0-ab71-401f-b61a-be8128ea6023" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Determine device ports included in LAG on neighbor-device</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="c595961a-a5ad-46a1-bcf7-ba8c2f15c97a" action="for" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>device_port in device_CN_ports:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="7af87729-5bce-44f8-8672-6e1918c37f5b" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                    <command>
                                                                                                        <body>/velocity/api/inventory/v16/device/[device_id]/ports?limit=200</body>
                                                                                                    </command>
                                                                                                    <postProcessing>
                                                                                                        <analysisRules>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query sub="true">mapped/Json/ports/*\\[name=&quot;[device_port]&quot;]/connectedPortName</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="store">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                        <storageLocation>conn_port_CN_name</storageLocation>
                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query sub="true">mapped/Json/ports/*\\[name=&quot;[device_port]&quot;]/connectedPortParentName</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="store">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                        <storageLocation>conn_device_CN_name</storageLocation>
                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                        </analysisRules>
                                                                                                    </postProcessing>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="8193cf59-f0fc-4575-9fdc-1a8b68d62a65" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_port_CN_names.append(conn_port_CN_name)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="069918f5-462e-4b2f-a428-fa8e5f58171b" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_device_CN_names.append(conn_device_CN_name)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="48746eb3-f8b3-4383-b5d3-944fbee9efd4" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>string=device_port+&quot; : &quot;+conn_port_CN_name +&quot; : &quot;+ conn_device_CN_name</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="8106dddb-272f-44b3-8bb1-f3d4dee3412f" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>device_CN_name_port.append(string)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="6687fd9b-a454-4932-b06b-f73f2e025535" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>string=&quot;&quot;</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/ports?limit=200" action.inherit="false"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="f4e08e3b-f6df-4541-986b-b10b65ce3f09" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Check device for multiple LAG connections and delete LAG </body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="745ec97d-5a78-4e70-9ac4-656469878dfc" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>conn_device_CN_names=list(set(conn_device_CN_names))</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="c97e4280-6938-426e-af41-49d2b6957271" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(conn_device_CN_names)</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="none">
                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="message">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                <message> For device &quot;[device]&quot; found [len(conn_device_CN_names)] LAG connections</message>
                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                        <skip>true</skip>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="5d0f7b56-f062-405c-9a51-be84d5c65866" action="for" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>conn_device_CN_name in conn_device_CN_names:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="2e04c83c-3234-455e-a5a8-4dfa609b5875" action="for" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>element in device_CN_name_port:</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="4eca0bac-124c-482d-b649-f58ef3bbc6a1" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>print(conn_device_CN_name)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="7bb0236d-4ede-41a1-87b2-00aef0eaecc7" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>print(element.split(&quot;:&quot;)[2].strip())</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="ce844a08-82fb-4313-aaa9-cc2d59075082" action="if" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_device_CN_name == element.split(&quot;:&quot;)[2].strip():</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="f55c14dd-96c6-4ee2-bf5b-651435db3426" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>device_CN_ports_per_lag.append(element.split(&quot;:&quot;)[0].strip())</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="43f97981-dfb9-493b-9525-eee2798a8b7b" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>conn_device_CN_ports_per_lag.append(element.split(&quot;:&quot;)[1].strip())</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="a430d589-d2ad-418e-b46f-0ed27806651e" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(device_CN_ports_per_lag)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="ceba30af-3d9b-43ce-b6a8-29f16c87f7fc" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(conn_device_CN_ports_per_lag)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="5c08fec5-c64a-4108-8de3-80393cc35330" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>Check LAG connection on each neighbor device - message</body>
                                                                                                    </command>
                                                                                                    <postProcessing>
                                                                                                        <analysisRules>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="none">
                                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="message">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                        <message>---Checking LAG connections on connected device &quot;[conn_device_CN_name]&quot;...</message>
                                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                        </analysisRules>
                                                                                                    </postProcessing>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="d13c995f-1d0d-4d01-83db-bc8155a27069" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>Get device details</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="46ad6b67-3291-4052-88e9-2882131dd5f6" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                            <command>
                                                                                                                <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>device_console_ip_addr</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console Port&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>device_console_port</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;username&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>device_username</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;password&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>device_password</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]" action.inherit="false"/>
                                                                                                        </item>
                                                                                                        <item guid="28a16a91-8438-4999-9c3f-4e3df03db07d" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                            <command>
                                                                                                                <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[conn_device_CN_name]</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;ipAddress&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_device_ipAddress</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_device_console_ip_addr</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console Port&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_device_console_port</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;username&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_device_username</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;password&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_device_password</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>mapped/Json/devices/item/id</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_device_id</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>mapped/Json/devices/item/templateId</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_template_id</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[conn_device_CN_name]" action.inherit="false"/>
                                                                                                        </item>
                                                                                                        <item guid="c3f4da62-69dd-4da7-940a-341e2b0cca82" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                            <command>
                                                                                                                <body>/velocity/api/inventory/v16/template/[conn_template_id]</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>mapped/Json/name</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_template_name</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/template/[conn_template_id]" action.inherit="false"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="d5c382f6-628d-4a0c-85b6-c3ab91459a8a" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>Delete LAG on connection device</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="aea8ae39-adb0-4b81-a592-80b87c28d4c8" action="if" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_template_name == &quot;Fortinet Switch&quot;:</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="724af2c6-5bf2-44ac-a9e5-eed613e36637" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>info</body>
                                                                                                                    </command>
                                                                                                                    <postProcessing>
                                                                                                                        <analysisRules>
                                                                                                                            <item>
                                                                                                                                <extractorInfo extractorType="none">
                                                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                </extractorInfo>
                                                                                                                                <processorInfo ruleType="message">
                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                        <message> For device &quot;[conn_device_CN_name]&quot; ports [conn_device_CN_ports_per_lag] are included in LAG</message>
                                                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                                                    </ruleProperties>
                                                                                                                                </processorInfo>
                                                                                                                            </item>
                                                                                                                        </analysisRules>
                                                                                                                    </postProcessing>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="6e22a2e2-8777-4968-b5c1-d43e6dcb591c" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>open session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="a8e8f697-d209-4d34-83e6-621d43bc86a7" action="open" session="fortiswitch_CN" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>project://Fortiswitch_console/session_profiles/console.ffsp</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                    <completionProperties>
                                                                                                                                        <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                    </completionProperties>
                                                                                                                                </stepProperties>
                                                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                                    <ipAddress inherit="false">[conn_device_console_ip_addr]</ipAddress>
                                                                                                                                    <port inherit="false">[conn_device_console_port]</port>
                                                                                                                                </sessionProperties>
                                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                            </applicationProperties>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="cdb42224-4428-4ad9-a792-64c341643452" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>set parameters based on name convention</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="819afe5e-7a24-4dd3-a23f-9d923afd7421" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>name_tsw=&quot;LAG&quot;+&quot;_&quot;+&quot;_&quot;.join(conn_device_CN_ports_per_lag)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="48235215-918e-49bd-b3f8-a08e684a3015" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>mode=&quot;active&quot;</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="f4b04293-b684-4f04-80c9-5001bd4b05f6" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>console login and unset trunk</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="83dd9735-4a96-4657-9a77-ce21437c1903" action="unsetTrunkModeLag" session="fortiswitch_CN" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>-name [name_tsw]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>retCode()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                            <message>For &quot;[conn_device_CN_name]&quot; delete LAG on ports [conn_device_CN_ports_per_lag] is ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                            <message>For &quot;[conn_device_name]&quot; delete LAG is not ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="d0463e70-a288-4bc0-b770-3312cf017586" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>discover and delete the LAG port </body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="aaa76302-0484-459b-8429-8bc062f61ad7" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_device_id]/ports?limit=200</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>mapped/Json/ports/item[*]/name</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_device_ports</storageLocation>
                                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>mapped/Json/ports/item[*]/id</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_device_port_ids</storageLocation>
                                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/ports?limit=200" action.inherit="false"/>
                                                                                                                        </item>
                                                                                                                        <item guid="e7f0a48c-39e5-4909-8ef6-a180b5b87f99" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>name_tsw in conn_device_ports:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="32726876-6268-4059-a957-e193c8f7a3a3" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>conn_portId=conn_device_port_ids[conn_device_ports.index(name_tsw)]</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="b63fed8d-7ef7-4479-96af-996791477d6f" action="DELETE" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                    <command>
                                                                                                                                        <body>/velocity/api/inventory/v16/device/[conn_device_id]/port/[conn_portId]</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/port/[conn_portId]" action.inherit="false"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="3b3b5a7f-1de7-41bc-aba6-cae265666177" action="POST" session="velocity">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_device_id]/action?type=discover</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="message">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                <message> Waiting for discover operation on [conn_device_CN_name]</message>
                                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                                                                    <memberClasses>
                                                                                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                                                                    </memberClasses>
                                                                                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                                                                </httpHeader>
                                                                                                                            </applicationProperties>
                                                                                                                        </item>
                                                                                                                        <item guid="1147a129-b5b7-4238-bc96-ecf613146704" action="sleep">
                                                                                                                            <command>
                                                                                                                                <body>10</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="74e3c629-099e-4012-9beb-f4a500ce80ff" action="consoleLogin" session="fortiswitch_CN" useFieldsInCommand="false">
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>retCode()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                            <message>--- console login not ok; fail test</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                        <item guid="7a5515b6-cf08-42ce-b614-af73de543303" action="command" session="fortiswitch_CN">
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>promptName()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>str(value) == &quot;prompt1&quot; </expression>
                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                            <message>For &quot;[conn_device_CN_name]&quot;: discover operation was successfully</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="RepeatStep">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                                                                <promptProperties>
                                                                                                                                    <stepPrompts>
                                                                                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">* login:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt2" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                                                                            <Content sub="true">* #</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt3">
                                                                                                                                            <Content>Password:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt4">
                                                                                                                                            <Content>--More-- </Content>
                                                                                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt5">
                                                                                                                                            <Content>Do you want to continue? (y/n)</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt6" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">* (*) #</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt7" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">*:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt8" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">*</Content>
                                                                                                                                        </item>
                                                                                                                                    </stepPrompts>
                                                                                                                                </promptProperties>
                                                                                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                </completionProperties>
                                                                                                                            </applicationProperties>
                                                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="ec88cede-5104-4b73-8d2a-c68a4e12184a" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>console exit</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="cecfaac6-8414-4f46-9cfb-77fc83d30dff" action="consoleExit" session="fortiswitch_CN" useFieldsInCommand="false">
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="27421bb2-4bc3-45e1-a8ac-5948a317e4c9" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>close session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="0914e773-d6d7-4517-81b9-07ea068ffa95" action="close" session="fortiswitch_CN">
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="db5485a7-4915-47e3-a447-d77fb2b1b407" action="if" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_template_name == &quot;Arista Switch&quot;:</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="19015fa5-ab18-4b05-abbe-e455ed325351" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>info</body>
                                                                                                                    </command>
                                                                                                                    <postProcessing>
                                                                                                                        <analysisRules>
                                                                                                                            <item>
                                                                                                                                <extractorInfo extractorType="none">
                                                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                </extractorInfo>
                                                                                                                                <processorInfo ruleType="message">
                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                        <message> For device &quot;[conn_device_CN_name]&quot; ports [conn_device_CN_ports_per_lag] are included in LAG</message>
                                                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                                                    </ruleProperties>
                                                                                                                                </processorInfo>
                                                                                                                            </item>
                                                                                                                        </analysisRules>
                                                                                                                    </postProcessing>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="173c81df-bfa7-4ed7-b97e-5c2a2605a666" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>open session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="625f717d-c278-4bd7-ae48-dad14d3ec1fc" action="open" session="arista_CN" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>project://Arista_console/session_profiles/console.ffsp</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                    <completionProperties>
                                                                                                                                        <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                    </completionProperties>
                                                                                                                                </stepProperties>
                                                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                                    <ipAddress inherit="false">[conn_device_console_ip_addr]</ipAddress>
                                                                                                                                    <port inherit="false">[conn_device_console_port]</port>
                                                                                                                                </sessionProperties>
                                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                            </applicationProperties>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="ed2f4c74-5e5a-4ea3-bf44-9bfba0f1997c" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>set parameters based on name convention</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="0fc73a31-e601-4e0e-87dd-b014cb1f0e41" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>number = 1</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="d0b34feb-cfb0-4a83-808d-820526e90e7c" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>ports_tsw=&quot;,&quot;.join(conn_device_CN_ports_per_lag)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="494a4408-899e-44b7-93a2-96857ecf8bf7" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>mode=&quot;active&quot;</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="a5325cda-e03c-424b-b2e1-cd9303f7b833" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>port_channel=&quot;Po&quot;+str(number)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="150b22d3-f106-4294-b99d-c1a7e5845b48" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>console login and unset port-channel</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="0a0ba0a1-2e4e-4a87-a30f-72db500dd79e" action="unsetSwitchPortChannel" session="arista_CN" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>-number [number]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>retCode()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                            <message>For &quot;[conn_device_CN_name]&quot; delete LAG on ports [conn_device_CN_ports_per_lag] is ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                            <message>For &quot;[conn_device_CN_name]&quot; delete LAG is not ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="b12b9b2a-fa37-4878-a372-69a590662e63" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>discover and delete the LAG port </body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="3724bf1e-f905-4548-bea8-c16976744489" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_device_id]/ports?limit=200</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>mapped/Json/ports/item[*]/name</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_device_ports</storageLocation>
                                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>mapped/Json/ports/item[*]/id</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_device_port_ids</storageLocation>
                                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/ports?limit=200" action.inherit="false"/>
                                                                                                                        </item>
                                                                                                                        <item guid="58eb1621-07f7-4e6c-801e-f6ca3a6c8522" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>port_channel in conn_device_ports:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="6335558c-506a-4f5e-b3d9-85b120b74c25" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>conn_portId=conn_device_port_ids[conn_device_ports.index(port_channel)]</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="9d259fc0-5d42-4075-ab01-cf8cb4a8b759" action="DELETE" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                    <command>
                                                                                                                                        <body>/velocity/api/inventory/v16/device/[conn_device_id]/port/[conn_portId]</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/port/[conn_portId]" action.inherit="false"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="a66c6ba9-8e57-4a44-a6f7-14629450e71e" action="POST" session="velocity">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_device_id]/action?type=discover</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="message">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                <message> Waiting for discover operation on [conn_device_CN_name]</message>
                                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                                                                    <memberClasses>
                                                                                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                                                                    </memberClasses>
                                                                                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                                                                </httpHeader>
                                                                                                                            </applicationProperties>
                                                                                                                        </item>
                                                                                                                        <item guid="612e5350-a04d-4740-8314-e9e66188b165" action="sleep" skip="true">
                                                                                                                            <command>
                                                                                                                                <body>20</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="c6b44517-14b7-445e-997c-8c2504143247" action="consoleLogin" session="arista_CN" skip="true" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>-username [conn_device_username] -password [conn_device_password]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>retCode()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                            <message>--- console login not ok; fail test</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                        <item guid="fd2fa0f8-808e-43d8-82a2-db32c00b1289" action="command" session="arista_CN" skip="true">
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>promptName()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>str(value) == &quot;prompt1&quot; or str(value) ==&quot;prompt4&quot;</expression>
                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                            <message>For &quot;[conn_device_CN_name]&quot;: discover operation was successfully</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="RepeatStep">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                                                                <promptProperties>
                                                                                                                                    <stepPrompts>
                                                                                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">* login:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt2" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                                                                            <Content sub="true">* #</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt3">
                                                                                                                                            <Content>Password:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt4">
                                                                                                                                            <Content>--More-- </Content>
                                                                                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt5">
                                                                                                                                            <Content>Do you want to continue? (y/n)</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt6" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">* (*) #</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt7" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">*:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt8" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">*</Content>
                                                                                                                                        </item>
                                                                                                                                    </stepPrompts>
                                                                                                                                </promptProperties>
                                                                                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                </completionProperties>
                                                                                                                            </applicationProperties>
                                                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                                                        </item>
                                                                                                                        <item guid="26c5ff53-52fc-41a4-894b-bdd1e6b63342" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>i=0</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="4049e93e-db70-48ea-9e10-f8757339d3d7" action="while" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>i&lt;10:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="d212493a-7c04-48f9-a0c2-a67bf76bf4f3" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>i = i + 2</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="810fe421-69d3-422a-b651-f7c61e5fba0b" action="sleep">
                                                                                                                                    <command>
                                                                                                                                        <body>3</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="6097d0cf-0fb5-44d1-86e7-9226d1e34f45" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>print(i)</body>
                                                                                                                                    </command>
                                                                                                                                    <postProcessing>
                                                                                                                                        <analysisRules>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                        <query>responseLine()</query>
                                                                                                                                                    </extractorProperties>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="assert">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                        <expression>int(value) == 9</expression>
                                                                                                                                                        <actionsWhenTrue>
                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                    <message>For &quot;[conn_device_CN_name]&quot;: discover operation was successfully</message>
                                                                                                                                                                </actionProperties>
                                                                                                                                                            </item>
                                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                            </item>
                                                                                                                                                        </actionsWhenTrue>
                                                                                                                                                        <actionsWhenFalse>
                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                                    <message>--- discover operation is still in progress...</message>
                                                                                                                                                                </actionProperties>
                                                                                                                                                            </item>
                                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                            </item>
                                                                                                                                                        </actionsWhenFalse>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                        </analysisRules>
                                                                                                                                    </postProcessing>
                                                                                                                                    <eventHandlers>
                                                                                                                                        <item name="OnQueryExtractorInvalidQuery">
                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Information">
                                                                                                                                                    <message>{auto_message_wait}</message>
                                                                                                                                                </actionProperties>
                                                                                                                                            </item>
                                                                                                                                            <item actionId="RepeatStep">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup"/>
                                                                                                                                            </item>
                                                                                                                                        </item>
                                                                                                                                        <item name="OnNoMatchesFound">
                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Information">
                                                                                                                                                    <message>{auto_message_wait}</message>
                                                                                                                                                </actionProperties>
                                                                                                                                            </item>
                                                                                                                                            <item actionId="RepeatStep">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup"/>
                                                                                                                                            </item>
                                                                                                                                        </item>
                                                                                                                                    </eventHandlers>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="2ea28f7f-560e-4bb1-ac08-50005f92d0cf" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>console exit</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="d89e1c13-cd26-49ca-a1e7-2fb871ce3558" action="consoleExit" session="arista_CN" useFieldsInCommand="false">
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="1e359dc3-6c3d-46f0-b285-64b4b2ff280a" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>close session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="aa79a401-d6b9-4547-a30a-f901592e06d8" action="close" session="arista">
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="2dc046ba-0837-4ed1-93a4-643668057513" action="if" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_template_name == &quot;Lepton ColdFusion Switch&quot;:</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="1cce1e6f-5c27-4c2e-9253-885ab06a494f" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>open session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="faedb92c-9166-4d62-a428-f6d29b3d4b0f" action="open" session="lepton_CN" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>project://Lepton_ssh/session_profiles/ssh.ffsp</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                <sessionProperties type="com.fnfr.svt.applications.ssh.documents.SSHProperties">
                                                                                                                                    <ipAddress inherit="false">[conn_device_ipAddress]</ipAddress>
                                                                                                                                    <user inherit="false">[conn_device_username]</user>
                                                                                                                                    <password inherit="false" masked="false">[conn_device_password]</password>
                                                                                                                                </sessionProperties>
                                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                            </applicationProperties>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="407de981-6f1b-4b8c-a89e-9ceb3a2112d8" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>ssh login and get connected port</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="83fc9a28-1094-41f0-90bd-96828f98c651" action="for" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>conn_port_name in conn_device_CN_ports_per_lag:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="ebf5d255-66fa-400d-90a6-002b2c42d752" action="getConnectedPort" session="lepton_CN" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>-port [conn_port_name]</body>
                                                                                                                                    </command>
                                                                                                                                    <postProcessing>
                                                                                                                                        <analysisRules>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                        <query>responseLine()</query>
                                                                                                                                                    </extractorProperties>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                        <storageLocation>conn_port_lepton</storageLocation>
                                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                        </analysisRules>
                                                                                                                                    </postProcessing>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="53339077-8715-483f-b507-84a2124803c1" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(conn_port_lepton)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="0e589dc2-4700-4bf1-ab71-c4f8bff3a432" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>len(conn_port_lepton)==3:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="5b133fa6-2c3b-418a-9296-4720911dc399" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>conn_port_lepton=conn_port_lepton[:2]+&quot;0&quot;+conn_port_lepton[2:]</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="ab5dc204-2db3-4263-a757-00108bcafce5" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(conn_port_lepton)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="c811448c-0cf3-4049-a82f-a4609afc063e" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>check neighbor-device on lepton side</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="befe9132-9d4b-467a-abf1-c5550be659f3" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_device_id]/ports?limit=200</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query sub="true">mapped/Json/ports/*\\[name=&quot;[conn_port_lepton]&quot;]/connectedPortName</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_port_name</storageLocation>
                                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query sub="true">mapped/Json/ports/*\\[name=&quot;[conn_port_lepton]&quot;]/connectedPortParentName</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_name</storageLocation>
                                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/ports?limit=200" action.inherit="false"/>
                                                                                                                        </item>
                                                                                                                        <item guid="6930c44e-0df6-4766-9ce1-ca9da02927dc" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(conn_lepton_port_name, conn_lepton_device_name)</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="message">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                <message>--- found lepton device connection: [conn_lepton_device_name] on port [conn_port_lepton]</message>
                                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="c12a3ec8-6df2-4ed1-96aa-7c2371bec534" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                            <command>
                                                                                                                                <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[conn_lepton_device_name]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>mapped/Json/devices/item/id</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_id</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>mapped/Json/devices/item/templateId</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_template_id</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[conn_lepton_device_name]" action.inherit="false"/>
                                                                                                                        </item>
                                                                                                                        <item guid="77ced90c-a978-4a10-8d69-feb1f278a48b" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_lepton_device_id]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>mapped/Json/properties/*[name=&quot;ipAddress&quot;]/value</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_ip_addr</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>mapped/Json/properties/*[name=&quot;Console&quot;]/value</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_console_ip_addr</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>mapped/Json/properties/*[name=&quot;Console Port&quot;]/value</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_console_port</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>mapped/Json/properties/*[name=&quot;username&quot;]/value</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_username</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>mapped/Json/properties/*[name=&quot;password&quot;]/value</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_password</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_lepton_device_id]" action.inherit="false"/>
                                                                                                                        </item>
                                                                                                                        <item guid="5c985936-f90a-4e03-a8ab-1ca56c21b93a" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/template/[conn_lepton_template_id]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>mapped/Json/name</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_template_name</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/template/[conn_lepton_template_id]" action.inherit="false"/>
                                                                                                                        </item>
                                                                                                                        <item guid="b18ea9fb-a5db-432d-b2e1-e8041db61e2d" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(conn_lepton_template_name)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="c9c6107f-31b5-4334-927a-f55bbddc9135" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>login to lepton neighbor-device and delete lag</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="bb097135-4595-4b55-b237-6f1f1d2f6b8d" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>conn_lepton_template_name == &quot;Fortinet Switch&quot;:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="f88083e9-24c8-4b10-8f41-4f7b9f80a4be" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>info</body>
                                                                                                                                    </command>
                                                                                                                                    <postProcessing>
                                                                                                                                        <analysisRules>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="none">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="message">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                        <message> For device &quot;[conn_lepton_device_name]&quot; ports [conn_lepton_port_names] are included in LAG</message>
                                                                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                        </analysisRules>
                                                                                                                                    </postProcessing>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="f63a22b9-c2f7-4cd9-bcce-1ba779d79315" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>open session</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="041bd1d6-9db6-4de8-98a7-3398f7315e9f" action="open" session="fortiswitch_lepton_CN" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>project://Fortiswitch_console/session_profiles/console.ffsp</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                                    <completionProperties>
                                                                                                                                                        <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                                    </completionProperties>
                                                                                                                                                </stepProperties>
                                                                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                                                    <ipAddress inherit="false">[conn_lepton_device_console_ip_addr]</ipAddress>
                                                                                                                                                    <port inherit="false">[conn_lepton_device_console_port]</port>
                                                                                                                                                </sessionProperties>
                                                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                            </applicationProperties>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="e6665cca-bf01-4fdb-b386-314d789239b1" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>set parameters based on name convention</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="72a1f736-986c-4ff3-a0dd-ea553700254a" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>name_tsw=&quot;LAG&quot;+&quot;_&quot;+&quot;_&quot;.join(conn_lepton_port_name)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="a96ea52f-8993-4079-a5ba-3ab494a105af" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>mode=&quot;active&quot;</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="92577de6-8eb1-4c12-bf26-057378ec1174" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>console login and unset trunk</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="9cfeec5e-23ad-44e0-b97f-685173d5fe5f" action="unsetTrunkModeLag" session="fortiswitch_lepton_CN" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>-name [name_tsw]</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>retCode()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                            <message>For &quot;[conn_device_name]&quot; delete LAG on ports [conn_device_CN_ports_per_lag] is ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                            <message>For &quot;[conn_device_name]&quot; delete LAG is not ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="be79e979-d717-4f0f-9ec8-0b3d880a12c6" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>discover and delete the LAG port </body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="dadc9fe8-81ec-4899-b79a-a9d5921ec1d9" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                            <command>
                                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_lepton_device_id]/ports?limit=200</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>mapped/Json/ports/item[*]/name</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                                <storageLocation>conn_device_ports</storageLocation>
                                                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>mapped/Json/ports/item[*]/id</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                                <storageLocation>conn_device_port_ids</storageLocation>
                                                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_lepton_device_id]/ports?limit=200" action.inherit="false"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="8137855b-f7be-438d-9df0-e17f971182c5" action="if" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>name_tsw in conn_device_ports:</body>
                                                                                                                                            </command>
                                                                                                                                            <nestedSteps>
                                                                                                                                                <item guid="db9baa9f-6117-4197-9305-5a42cbf2e692" action="eval" useFieldsInCommand="false">
                                                                                                                                                    <command>
                                                                                                                                                        <body>conn_portId=conn_device_port_ids[conn_device_ports.index(name_tsw)]</body>
                                                                                                                                                    </command>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                                <item guid="ab092aed-f295-4631-9db5-998d7869295d" action="DELETE" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                                    <command>
                                                                                                                                                        <body>/velocity/api/inventory/v16/device/[conn_device_id]/port/[conn_portId]</body>
                                                                                                                                                    </command>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/port/[conn_portId]" action.inherit="false"/>
                                                                                                                                                </item>
                                                                                                                                            </nestedSteps>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="e58f0e9a-0c11-499a-be1e-44b2bdfc78e0" action="POST" session="velocity">
                                                                                                                                            <command>
                                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_lepton_device_id]/action?type=discover</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="message">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                                <message> Waiting for discover operation on [conn_device_name]</message>
                                                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[conn_lepton_device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                                                                                    <memberClasses>
                                                                                                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                                                                                    </memberClasses>
                                                                                                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                                                                                </httpHeader>
                                                                                                                                            </applicationProperties>
                                                                                                                                        </item>
                                                                                                                                        <item guid="b309b6f5-4a3e-4a7a-a07a-807d856d7674" action="sleep">
                                                                                                                                            <command>
                                                                                                                                                <body>10</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="c609ad67-70d7-47e4-bcb9-65b0ab29e65f" action="consoleLogin" session="fortiswitch_lepton_CN" useFieldsInCommand="false">
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>retCode()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                            <message>--- console login not ok; fail test</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="e8b0e994-87e0-44d7-9e97-9cbff2c3c64d" action="command" session="fortiswitch_lepton_CN">
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                                <query>promptName()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>str(value) == &quot;prompt1&quot; </expression>
                                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot;: discover operation was successfully</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="RepeatStep">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                                                                                <promptProperties>
                                                                                                                                                    <stepPrompts>
                                                                                                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">* login:</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt2" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                                                                                            <Content sub="true">* #</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt3">
                                                                                                                                                            <Content>Password:</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt4">
                                                                                                                                                            <Content>--More-- </Content>
                                                                                                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt5">
                                                                                                                                                            <Content>Do you want to continue? (y/n)</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt6" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">* (*) #</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt7" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">*:</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt8" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">*</Content>
                                                                                                                                                        </item>
                                                                                                                                                    </stepPrompts>
                                                                                                                                                </promptProperties>
                                                                                                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                                </completionProperties>
                                                                                                                                            </applicationProperties>
                                                                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="28dd3676-2a38-476c-806f-98ec1a07455b" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>console exit</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="7eb398fc-944b-47af-8d6e-a48fa2b4081d" action="consoleExit" session="fortiswitch_lepton_CN" useFieldsInCommand="false">
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="e8225f2b-5ef2-4a0d-b890-0ec0bd4094bf" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>close session</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="79031d82-efe6-4006-8487-7a7553bbb9d2" action="close" session="fortiswitch_lepton_CN">
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="9bdd8be4-0c6b-4b7e-9140-809094f57151" action="close" session="lepton_CN">
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="ca3f695a-0af0-4124-823a-626725567d55" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>conn_lepton_template_name == &quot;Arista Switch&quot;:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="d6303118-a22c-4de7-bcc8-160d81f01842" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>info</body>
                                                                                                                                    </command>
                                                                                                                                    <postProcessing>
                                                                                                                                        <analysisRules>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="none">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="message">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                        <message> For device &quot;[conn_lepton_device_name]&quot; ports [conn_lepton_port_name] are included in LAG</message>
                                                                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                        </analysisRules>
                                                                                                                                    </postProcessing>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="27ccd6a7-0460-4977-8fec-183ca24f8f69" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>open session</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="26972fd6-b449-49d0-9496-a485de10cb2f" action="open" session="arista_lepton_CN" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>project://Arista_console/session_profiles/console.ffsp</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                                                    <ipAddress inherit="false">[conn_lepton_device_console_ip_addr]</ipAddress>
                                                                                                                                                    <port inherit="false">[conn_lepton_device_console_port]</port>
                                                                                                                                                    <TerminalProperties>
                                                                                                                                                        <stepDefaults>
                                                                                                                                                            <completionProperties>
                                                                                                                                                                <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                                            </completionProperties>
                                                                                                                                                        </stepDefaults>
                                                                                                                                                    </TerminalProperties>
                                                                                                                                                </sessionProperties>
                                                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                            </applicationProperties>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="ecdef1d1-560d-4160-a2f5-9fdbab0b57b7" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>set parameters based on name convention</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="af401b39-292b-4a4b-b745-61fc63f6ce72" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>number = &quot;10&quot;</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="de2fdae0-f79d-4275-b9d9-9ecc58d34cab" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>ports_arista=&quot;,&quot;.join(conn_lepton_port_name)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="70a44b81-6e9e-4461-b65a-7ffc1516f384" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>print(ports_arista)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="387e99ec-2680-4bcf-b34c-a4175a61d54d" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>mode=&quot;active&quot;</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="1d52c692-fcd3-49d3-a43c-ec8bf900467e" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>port_channel=&quot;Po&quot;+str(number)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="3c0eb857-b83b-4e09-9cfd-c2ef50896c6d" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>console login and unset port-channel</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="9f3ad476-cd5c-4467-af59-6ce048c3238b" action="unsetSwitchPortChannel" session="arista_lepton_CN" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>-number [number]</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>retCode()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot; delete LAG on ports [conn_lepton_port_name] is ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot; delete LAG is not ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="29239a41-e787-45ec-b7f1-981bc9819945" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>discover and delete the LAG port </body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="e58d8e94-2b3d-4c93-82e8-4f979d73d428" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                            <command>
                                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_lepton_device_id]/ports?limit=200</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>mapped/Json/ports/item[*]/name</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                                <storageLocation>conn_lepton_device_ports</storageLocation>
                                                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>mapped/Json/ports/item[*]/id</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                                <storageLocation>conn_lepton_device_port_ids</storageLocation>
                                                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_lepton_device_id]/ports?limit=200" action.inherit="false"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="88c04cca-0023-4baa-97d9-7f8c12326fdb" action="if" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>port_channel in conn_lepton_device_ports:</body>
                                                                                                                                            </command>
                                                                                                                                            <nestedSteps>
                                                                                                                                                <item guid="4d6de6f4-8628-447c-ae19-9e80118c14ad" action="eval" useFieldsInCommand="false">
                                                                                                                                                    <command>
                                                                                                                                                        <body>conn_lepton_portId=conn_lepton_device_port_ids[conn_lepton_device_ports.index(port_channel)]</body>
                                                                                                                                                    </command>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                                <item guid="455899c5-8ec1-4f1e-9ceb-641e973ce0c2" action="DELETE" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                                    <command>
                                                                                                                                                        <body>/velocity/api/inventory/v16/device/[conn_lepton_device_id]/port/[conn_lepton_portId]</body>
                                                                                                                                                    </command>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_lepton_device_id]/port/[conn_lepton_portId]" action.inherit="false"/>
                                                                                                                                                </item>
                                                                                                                                            </nestedSteps>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="09b4928b-35fc-45fa-b8eb-c75ccd3c8af4" action="POST" session="velocity">
                                                                                                                                            <command>
                                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_lepton_device_id]/action?type=discover</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="message">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                                <message> Waiting for discover operation on [conn_lepton_device_name]</message>
                                                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[conn_lepton_device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                                                                                    <memberClasses>
                                                                                                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                                                                                    </memberClasses>
                                                                                                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                                                                                </httpHeader>
                                                                                                                                            </applicationProperties>
                                                                                                                                        </item>
                                                                                                                                        <item guid="e74a6bd0-7f8d-48eb-9e9f-9391ae381e77" action="sleep" skip="true">
                                                                                                                                            <command>
                                                                                                                                                <body>20</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="2efd04fe-ba5e-4049-8903-be666cf13fd9" action="consoleLogin" session="arista_lepton_CN" skip="true" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>-username [conn_lepton_device_username] -password [conn_lepton_device_password]</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>retCode()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                            <message>--- console login not ok; fail test</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="af66e81a-63e8-4c9e-8269-ec856e4a63d2" action="command" session="arista_lepton_CN" skip="true">
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                                <query>promptName()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>str(value) == &quot;prompt1&quot; or str(value) ==&quot;prompt4&quot;</expression>
                                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot;: discover operation was successfully</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="RepeatStep">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                                                                                <promptProperties>
                                                                                                                                                    <stepPrompts>
                                                                                                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">* login:</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt2" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                                                                                            <Content sub="true">* #</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt3">
                                                                                                                                                            <Content>Password:</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt4">
                                                                                                                                                            <Content>--More-- </Content>
                                                                                                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt5">
                                                                                                                                                            <Content>Do you want to continue? (y/n)</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt6" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">* (*) #</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt7" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">*:</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt8" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">*</Content>
                                                                                                                                                        </item>
                                                                                                                                                    </stepPrompts>
                                                                                                                                                </promptProperties>
                                                                                                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                                </completionProperties>
                                                                                                                                            </applicationProperties>
                                                                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="b2c3ca87-5160-4176-905a-f4b592e73263" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>i=0</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="c3e9e904-4333-4a7a-bfb5-625558955525" action="while" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>i&lt;10:</body>
                                                                                                                                            </command>
                                                                                                                                            <nestedSteps>
                                                                                                                                                <item guid="c1dce8e2-a58a-439d-9311-753b114f9b67" action="eval" useFieldsInCommand="false">
                                                                                                                                                    <command>
                                                                                                                                                        <body>i = i + 2</body>
                                                                                                                                                    </command>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                                <item guid="78a95b20-e4e7-4751-a71a-1ae1bb9d129b" action="sleep">
                                                                                                                                                    <command>
                                                                                                                                                        <body>3</body>
                                                                                                                                                    </command>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                                <item guid="6ce91370-8d50-4afb-9eb2-3f73586a348e" action="eval" useFieldsInCommand="false">
                                                                                                                                                    <command>
                                                                                                                                                        <body>print(i)</body>
                                                                                                                                                    </command>
                                                                                                                                                    <postProcessing>
                                                                                                                                                        <analysisRules>
                                                                                                                                                            <item>
                                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                                        <query>responseLine()</query>
                                                                                                                                                                    </extractorProperties>
                                                                                                                                                                </extractorInfo>
                                                                                                                                                                <processorInfo ruleType="assert">
                                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                        <expression>int(value) == 9</expression>
                                                                                                                                                                        <actionsWhenTrue>
                                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                                    <message>For &quot;[conn_lepton_device_name]&quot;: discover operation was successfully</message>
                                                                                                                                                                                </actionProperties>
                                                                                                                                                                            </item>
                                                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                            </item>
                                                                                                                                                                        </actionsWhenTrue>
                                                                                                                                                                        <actionsWhenFalse>
                                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                                                    <message>--- discover operation is still in progress...</message>
                                                                                                                                                                                </actionProperties>
                                                                                                                                                                            </item>
                                                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                            </item>
                                                                                                                                                                        </actionsWhenFalse>
                                                                                                                                                                    </ruleProperties>
                                                                                                                                                                </processorInfo>
                                                                                                                                                            </item>
                                                                                                                                                        </analysisRules>
                                                                                                                                                    </postProcessing>
                                                                                                                                                    <eventHandlers>
                                                                                                                                                        <item name="OnQueryExtractorInvalidQuery">
                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Information">
                                                                                                                                                                    <message>{auto_message_wait}</message>
                                                                                                                                                                </actionProperties>
                                                                                                                                                            </item>
                                                                                                                                                            <item actionId="RepeatStep">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup"/>
                                                                                                                                                            </item>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="OnNoMatchesFound">
                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Information">
                                                                                                                                                                    <message>{auto_message_wait}</message>
                                                                                                                                                                </actionProperties>
                                                                                                                                                            </item>
                                                                                                                                                            <item actionId="RepeatStep">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup"/>
                                                                                                                                                            </item>
                                                                                                                                                        </item>
                                                                                                                                                    </eventHandlers>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                            </nestedSteps>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="c1184fa8-8c2f-405f-84c3-74ac037f382a" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>console exit</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="9b7dc66a-ce27-44bb-9c7b-ffcfb1284795" action="consoleExit" session="arista_lepton_CN" useFieldsInCommand="false">
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="e7a82cc4-3558-4516-be32-ff338f84ebef" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>close session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="4968f215-c38d-46c4-9ccc-912f46a5b03a" action="close" session="arista_lepton_CN">
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                        <item guid="31c02b51-9f51-4e9b-aeab-9dc2bbcf553b" action="close" session="lepton_CN">
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="d5c3de10-2529-46b2-abb0-31ae92b4d81e" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>Reinit dicts</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="0c39e62f-1e72-4016-a8f8-d997de2c2d12" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>device_CN_ports_per_lag=[]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="d47c01c1-f41f-4b64-8b4a-f47f910a0910" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_device_CN_ports_per_lag=[]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="14f8b1ed-61d7-4732-9a92-f3f840068f57" action="comment" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>Discover and update the LAG ports</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="9736a4c4-06e5-4277-9d6e-075427d16af8" action="open" session="fortigateDiscover" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>project://Fortigate_console/session_profiles/console.ffsp</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                        <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                            <completionProperties>
                                                                                                <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                            </completionProperties>
                                                                                        </stepProperties>
                                                                                        <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                            <ipAddress inherit="false">[device_console_ip]</ipAddress>
                                                                                            <port inherit="false">[device_console]</port>
                                                                                        </sessionProperties>
                                                                                        <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                    </applicationProperties>
                                                                                </item>
                                                                                <item guid="7e39a3bd-b9d1-495f-94d6-c95ba89c0b52" action="POST" session="velocity">
                                                                                    <command>
                                                                                        <body>/velocity/api/inventory/v16/device/[device_id]/action?type=discover</body>
                                                                                    </command>
                                                                                    <postProcessing>
                                                                                        <analysisRules>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="none">
                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="message">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                        <message> Waiting for discover operation on [device]</message>
                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                        </analysisRules>
                                                                                    </postProcessing>
                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                        <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                        <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                            <memberClasses>
                                                                                                <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                            </memberClasses>
                                                                                            <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                        </httpHeader>
                                                                                    </applicationProperties>
                                                                                </item>
                                                                                <item guid="3aeddddb-ac54-40a5-80d4-3c4961f3950d" action="sleep">
                                                                                    <command>
                                                                                        <body>10</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="9fdd99c3-fb3b-4f78-998e-57a7fcb7c51e" action="command" session="fortigateDiscover">
                                                                                    <postProcessing>
                                                                                        <analysisRules>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                        <query>promptName()</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="assert">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                        <expression>str(value) == &quot;prompt1&quot; </expression>
                                                                                                        <actionsWhenTrue>
                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                    <message>For &quot;[device]&quot;: discover operation was successfully</message>
                                                                                                                </actionProperties>
                                                                                                            </item>
                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                            </item>
                                                                                                        </actionsWhenTrue>
                                                                                                        <actionsWhenFalse>
                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                    <message>--- discover operation is still in progress...</message>
                                                                                                                </actionProperties>
                                                                                                            </item>
                                                                                                            <item actionId="RepeatStep">
                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                            </item>
                                                                                                        </actionsWhenFalse>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                        </analysisRules>
                                                                                    </postProcessing>
                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                        <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                        <promptProperties>
                                                                                            <stepPrompts>
                                                                                                <item name="prompt1" MatchMethod="WILDCARD">
                                                                                                    <Content sub="true">* login:</Content>
                                                                                                </item>
                                                                                                <item name="prompt2" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                                    <Content sub="true">* #</Content>
                                                                                                </item>
                                                                                                <item name="prompt3">
                                                                                                    <Content>Password:</Content>
                                                                                                </item>
                                                                                                <item name="prompt4">
                                                                                                    <Content>--More-- </Content>
                                                                                                    <MoreNextCommand> \\r</MoreNextCommand>
                                                                                                </item>
                                                                                                <item name="prompt5">
                                                                                                    <Content>Do you want to continue? (y/n)</Content>
                                                                                                </item>
                                                                                                <item name="prompt6" MatchMethod="WILDCARD">
                                                                                                    <Content sub="true">* (*) #</Content>
                                                                                                </item>
                                                                                                <item name="prompt7" MatchMethod="WILDCARD">
                                                                                                    <Content sub="true">*:</Content>
                                                                                                </item>
                                                                                                <item name="prompt8" MatchMethod="WILDCARD">
                                                                                                    <Content sub="true">*</Content>
                                                                                                </item>
                                                                                            </stepPrompts>
                                                                                        </promptProperties>
                                                                                        <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                            <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                        </completionProperties>
                                                                                    </applicationProperties>
                                                                                    <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                </item>
                                                                                <item guid="ae7e1de4-3c82-46fa-996b-dd55cb8ad978" action="close" session="fortigateDiscover">
                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="4a23e74f-e336-4630-82eb-2c652063eb0e" action="comment" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>Disable Vdom Mode</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="f3d1eecb-f9c6-4834-b94d-4c9bfd7aba7a" action="open" session="vdom">
                                                                                    <command>
                                                                                        <body>project://Fortigate_console/session_profiles/console.ffsp</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                        <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                            <completionProperties>
                                                                                                <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                            </completionProperties>
                                                                                        </stepProperties>
                                                                                        <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                            <ipAddress inherit="false">[device_console_ip]</ipAddress>
                                                                                            <port inherit="false">[device_console]</port>
                                                                                        </sessionProperties>
                                                                                        <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                    </applicationProperties>
                                                                                </item>
                                                                                <item guid="9ebd8ee0-fc70-425e-8d0a-7bead109b505" action="disableVdom" session="vdom" useFieldsInCommand="false">
                                                                                    <postProcessing>
                                                                                        <analysisRules>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query>retCode()</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="assert">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                        <expression>value == &quot;TRUE&quot; </expression>
                                                                                                        <actionsWhenTrue>
                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                    <message>For device [device] disable vdom operation was successful</message>
                                                                                                                </actionProperties>
                                                                                                            </item>
                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                            </item>
                                                                                                        </actionsWhenTrue>
                                                                                                        <actionsWhenFalse>
                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                    <message>Disable vdom operation was not successful, please check other vdoms...</message>
                                                                                                                </actionProperties>
                                                                                                            </item>
                                                                                                        </actionsWhenFalse>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                        </analysisRules>
                                                                                    </postProcessing>
                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                </item>
                                                                                <item guid="83dd375c-8cc7-4a8f-90ee-bde67f21a927" action="consoleExit" session="vdom" useFieldsInCommand="false">
                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                </item>
                                                                                <item guid="5bf5c3bf-4b35-41d2-9982-21219ad7e1be" action="close" session="vdom">
                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="d796e3da-e8f6-465b-af54-e4020be0061d" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Reinit dicts</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="7c01b02e-c608-431c-a49d-770c80fa5f44" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_lag_ports=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="31bee5b8-a9aa-4ced-afd6-5abadd10cd28" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_lag_FGT_ports=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="5aeda2fb-7a45-42ff-aed0-e9a6b40cb0dd" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_lag_CN_ports=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="e32eebd2-aef7-4626-b302-8d9bb603175b" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>conn_port_names=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="2f6c4ccb-df03-4b63-a285-42649b9e89fd" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>conn_port_FGT_names=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="2a57c355-e87d-487b-bfe3-ac58f53f4cc8" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>conn_port_CN_names=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="f99fb11f-e10f-408f-8aec-3a06a99f9b74" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>conn_device_names=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="a23132f2-ceba-4782-a6ae-26b9fc126466" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>conn_device_FGT_names=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="6ed0e0fe-028e-4f11-aa46-5f3ddfc78ce6" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>conn_device_CN_names=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="c490d423-a614-4d74-bf22-0e5467973a75" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_topology_port_ids=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="98d8a907-9316-4a4c-8dd6-b5d9beade4a0" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_ports=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="5daf1e56-fd4a-4b5b-a2a4-ccecebeed3bc" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_FGT_ports=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="f76d8aca-7920-460a-ada6-843560ad1ca9" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_CN_ports=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="18746f15-a33a-4e45-9434-2e28f53dcfb5" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_name_port=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="2c0ee96e-31d6-44b1-a6e5-4e9626e44372" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_FGT_name_port=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="49782d55-7e18-4574-bb2a-1a1c6b1b50eb" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_CN_name_port=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="c8242b40-d027-45b7-a509-21e986e549fe" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_ports_per_lag=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="7ff4e7e4-0a39-480d-8757-954cd83947e3" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_FGT_ports_per_lag=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="d180a08e-980d-4e68-8b10-549a0aa621e4" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_CN_ports_per_lag=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="fdaf5dac-f040-4e20-9657-770e8389f31b" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>conn_device_FGT_ports_per_lag=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="816fff73-984e-4453-80ad-8029d1a68453" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>conn_device_CN_ports_per_lag=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="6a435ced-09b2-473c-9dee-7cf7c48c818c" action="else" useFieldsInCommand="false">
                            <nestedSteps>
                                <item guid="5cef84f4-2b91-46ff-af83-143153699a5d" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>skip operation</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="84454b80-a68f-49fe-a329-6270b02a7c28" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>print(&quot;There are no LAG connections in topology&quot;)</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="none">
                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="message">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                <message> For reservation &quot;[reservationId]&quot; checking LAG connections</message>
                                                                <tag sub="false" defaultValue=""/>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>isEmpty()</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="assert">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                <expression>str(value) == &quot;false&quot; </expression>
                                                                <actionsWhenTrue>
                                                                    <item actionId="DeclareExecutionIssue">
                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                            <message>--- There are no LAG connections in topology, skip operation ...</message>
                                                                        </actionProperties>
                                                                    </item>
                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                    </item>
                                                                </actionsWhenTrue>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="3507d984-be7c-45f7-8365-0a5b3269bcc0" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Close velocity session</body>
                    </command>
                    <nestedSteps>
                        <item guid="84a1ac9a-58c8-45c4-9190-1acb00598f8d" action="close" session="velocity">
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
        </item>
    </procedures>
</testCase>
