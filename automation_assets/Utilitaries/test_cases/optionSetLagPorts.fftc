<?xml version="1.0"?>
<testCase version="8.7.0.202112151246">
    <general>
        <language>Python</language>
    </general>
    <procedures>
        <item name="main">
            <steps>
                <item guid="983fc7e7-2201-4479-8a8e-15b92fc88a90" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Initialization</body>
                    </command>
                    <nestedSteps>
                        <item guid="7e47de52-94d5-4f4c-936d-a3a7053f8a20" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>reservationId = velocity(&quot;reservationId&quot;); print(reservationId)</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="none">
                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                        </extractorInfo>
                                        <processorInfo ruleType="message">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                <message>Found reservationId: &quot;[reservationId]&quot;</message>
                                                <tag sub="false" defaultValue=""/>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="6d0a9a4f-eac7-4c6e-a8b4-6010b8c8b930" action="eval" skip="true" useFieldsInCommand="false">
                            <command>
                                <body>reservationId = &quot;d7f4f422-ab9c-4282-bd29-db38215228f5&quot;</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="none">
                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                        </extractorInfo>
                                        <processorInfo ruleType="message">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                <message>Found reservationId: &quot;[reservationId]&quot;</message>
                                                <tag sub="false" defaultValue=""/>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="84668d55-8466-48ba-af61-31327fb07237" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Init dicts</body>
                            </command>
                            <nestedSteps>
                                <item guid="3e4a9e34-db43-4f55-91ad-c06829d0ffaf" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>link_type={}</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="fa004011-672c-4a25-b8d1-b53f4965343c" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>LAG_port_ids=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="70c605df-dba8-4684-b1bc-575d9b4602d3" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_lag_ports=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="89556048-ef92-445f-8e4b-888ede6942ed" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>conn_port_names=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="8fa44b9b-bf35-4a8c-ba53-030e83d20653" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>conn_device_names=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="6cc46175-0a56-49f6-a78d-09d2d3f53d14" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_topology_port_ids=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="ae42b68a-fd90-49f2-b305-879dcb809d8d" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_ports=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="c4be717f-d2f6-46f0-a34a-04315805a8e9" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_name_port=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="89558249-99a8-4e25-8db6-05fde478706c" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_ports_per_lag=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="5927f8b2-3ee2-4806-82fe-3b75b51ed6e6" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>conn_device_ports_per_lag=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="137da3ba-976d-4b82-908f-86c63eacdb9a" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Open sessions</body>
                    </command>
                    <nestedSteps>
                        <item guid="4aba695e-731a-4f6d-8f0d-b2256f34ffca" action="open" session="velocity" useFieldsInCommand="false">
                            <command>
                                <body>application:com.fnfr.itest.applications.webservices.restful</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                <stepProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                <sessionProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulSessionProperties" url="https://10.210.107.10" url.inherit="false" version="2" version.inherit="false">
                                    <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" authenticationType="Basic" authenticationType.inherit="false" user="superadmin" user.inherit="false" password.masked="false" password="superadmin" password.inherit="false" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                </sessionProperties>
                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            </applicationProperties>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="e26edba6-69b7-453f-be1f-bce91c8e0e0e" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Check LAG connection</body>
                    </command>
                    <nestedSteps>
                        <item guid="6b58181d-bcd6-444a-a513-e69902bdc2c1" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                            <command>
                                <body>/velocity/api/reservation/v18/reservation/[reservationId]/topology</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>mapped/Xml/tbml/body/connectivity/link[*]/property[2]</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>LAG_option</storageLocation>
                                                <storeInAList>true</storeInAList>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/topology" action.inherit="false">
                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                    <memberClasses>
                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                    </memberClasses>
                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="application/tbml" header.inherit="false"/>
                                </httpHeader>
                            </applicationProperties>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="07715382-522f-44e4-9bb1-130ada357b61" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>LAG or skip operation</body>
                    </command>
                    <nestedSteps>
                        <item guid="4151f83e-bf04-48dd-a0be-c3e9bc0d007a" action="if" useFieldsInCommand="false">
                            <command>
                                <body>&quot;LAG&quot; in LAG_option:</body>
                            </command>
                            <nestedSteps>
                                <item guid="73e5d9de-7625-4166-9245-436d6f8f9cfa" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Determine LAG port ids</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="ecd994d3-b184-4afa-88c8-f4d3ffe68d41" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                            <command>
                                                <body>/velocity/api/reservation/v18/reservation/[reservationId]/topology</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>mapped/Xml/tbml/body/connectivity/link[*]/property[1]</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>Links</storageLocation>
                                                                <storeInAList>true</storeInAList>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>mapped/Xml/tbml/body/connectivity/link[*]/property[2]</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>Types</storageLocation>
                                                                <storeInAList>true</storeInAList>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/topology?limit=200" action.inherit="false">
                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                    <memberClasses>
                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                    </memberClasses>
                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="application/tbml" header.inherit="false"/>
                                                </httpHeader>
                                            </applicationProperties>
                                        </item>
                                        <item guid="a28c9e97-b068-4db5-a92b-94c3c3e9696d" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>link_type=dict(zip(Links,Types))</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="de0b8a4f-2aa4-4fce-94d0-a6f9dfdf2f38" action="for" useFieldsInCommand="false">
                                            <command>
                                                <body>item in link_type.keys():</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="a3bc9861-c32d-4dfd-b052-e62483043e3b" action="if" useFieldsInCommand="false">
                                                    <command>
                                                        <body>link_type[item] ==&quot;LAG&quot;:</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="56a482e1-0439-40a4-8b39-ed603544ac4f" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                            <command>
                                                                <body>/velocity/api/reservation/v18/reservation/[reservationId]/topology</body>
                                                            </command>
                                                            <postProcessing>
                                                                <analysisRules>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                <query sub="true">mapped/Xml/tbml/body/connectivity/*\\[property=&quot;[item]&quot;]/*/@id</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="store">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                <storageLocation>LAG_ports_ids</storageLocation>
                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                </analysisRules>
                                                            </postProcessing>
                                                            <nestedSteps>
                                                                <item guid="c0e91b70-3f3c-4e9b-ac35-328a64981f12" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>print(LAG_ports_ids)</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="ec892100-c5be-4185-8ce5-9b9885769d1b" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>LAG_port_ids.append(LAG_ports_ids)</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/topology" action.inherit="false">
                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                    <memberClasses>
                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                    </memberClasses>
                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="application/tbml" header.inherit="false"/>
                                                                </httpHeader>
                                                            </applicationProperties>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="32c097ee-c771-47ae-a0b1-187dd7b338ee" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>print(LAG_port_ids)</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="24d0fd6d-2fe7-4ef1-b192-711439c7b55b" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Get the devices name from Velocity</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="d3d20871-c756-402a-9716-1cedb8df7b38" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                            <command>
                                                <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>mapped/Json/items/*[type = &quot;DEVICE&quot;]/name</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>device_name</storageLocation>
                                                                <storeInAList>true</storeInAList>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                        </item>
                                        <item guid="3bdc9edc-74b4-458a-ab16-8afc7224acb2" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>print(device_name)</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="29e73d85-81f8-4208-b7ec-a26734372149" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Filter devices in order to find fortigate firewalls</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="2bd1824e-b8d9-428d-80be-dab0d2fee6cb" action="for" useFieldsInCommand="false">
                                            <command>
                                                <body>device in device_name:</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="0d5b1cea-8e71-485e-970a-6c2e3b3d8912" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                    <command>
                                                        <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]</body>
                                                    </command>
                                                    <postProcessing>
                                                        <analysisRules>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                        <query>mapped/Json/devices/item/id</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>device_id</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                        <query>mapped/Json/devices/item/properties/item[name = &apos;Console&apos;]/value</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>device_console_ip_addr</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                        <query>mapped/Json/devices/item/properties/item[name = &apos;Console Port&apos;]/value</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>device_console_port</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                        <query>mapped/Json/devices/item/properties/item[name = &apos;username&apos;]/value</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>device_username</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                        <query>mapped/Json/devices/item/properties/item[name = &apos;password&apos;]/value</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>device_password</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                        <query>mapped/Json/devices/item/templateId</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>template_id</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                        </analysisRules>
                                                    </postProcessing>
                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]" action.inherit="false"/>
                                                </item>
                                                <item guid="3917a0a1-cd3a-42c2-932f-1d7e062f967d" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                    <command>
                                                        <body>/velocity/api/inventory/v16/template/[template_id]</body>
                                                    </command>
                                                    <postProcessing>
                                                        <analysisRules>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                        <query>mapped/Json/name</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>template_name</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                        </analysisRules>
                                                    </postProcessing>
                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/template/[template_id]" action.inherit="false"/>
                                                </item>
                                                <item guid="55f83b6a-1ba5-48df-b2a4-b18aed4c5899" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>print(template_name)</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="bd722112-6802-4b28-b621-31daa6dd571b" action="if" useFieldsInCommand="false">
                                                    <command>
                                                        <body>template_name != &quot;Fortigate Firewall&quot;:</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="9f0f1c79-f1b4-4399-8717-5b2e6faa3601" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_name.remove(device)</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="0a474bd4-c865-4480-a612-6a5df40208ad" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>print(device_name)</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="7805bdcc-8623-4433-a4cf-c09e482351b0" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Config LAG on devices</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="b89358b1-16d3-4f9a-bf01-d57668c82a92" action="for" useFieldsInCommand="false">
                                            <command>
                                                <body>device in device_name:</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="6c01b44a-cdf9-45f5-bed7-521edbfe3668" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Check LAG connection on each device - message</body>
                                                    </command>
                                                    <postProcessing>
                                                        <analysisRules>
                                                            <item>
                                                                <extractorInfo extractorType="none">
                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="message">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                        <message>---Checking LAG connections on device &quot;[device]&quot;...</message>
                                                                        <tag sub="false" defaultValue=""/>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                        </analysisRules>
                                                    </postProcessing>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="8d9dd7f9-4090-4c46-ade2-1046ee775bec" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Determine device ports from reservation</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="a10abd51-cc0a-410e-8198-11d3c2565200" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                            <command>
                                                                <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]</body>
                                                            </command>
                                                            <postProcessing>
                                                                <analysisRules>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                <query>mapped/Json/devices/item/id</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="store">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                <storageLocation>device_id</storageLocation>
                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console&apos;]/value</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="store">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                <storageLocation>device_console_ip</storageLocation>
                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console Port&apos;]/value</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="store">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                <storageLocation>device_console</storageLocation>
                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                </analysisRules>
                                                            </postProcessing>
                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]" action.inherit="false"/>
                                                        </item>
                                                        <item guid="267e2900-80a4-43c3-8b01-fc832e8ad47e" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                            <command>
                                                                <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                                            </command>
                                                            <postProcessing>
                                                                <analysisRules>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                <query sub="true">mapped/Json/items/*\\[inventoryParentResourceId=&quot;[device_id]&quot;]/name</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="store">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                <storageLocation>device_reservation_ports</storageLocation>
                                                                                <storeInAList>true</storeInAList>
                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                <query sub="true">mapped/Json/items/*\\[inventoryParentResourceId=&quot;[device_id]&quot;]/inventoryResourceId</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="store">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                <storageLocation>device_inventory_ports</storageLocation>
                                                                                <storeInAList>true</storeInAList>
                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                </analysisRules>
                                                            </postProcessing>
                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                                        </item>
                                                        <item guid="da743790-5197-46b1-8dc2-4fdc6d60836b" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>print(device_reservation_ports)</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="2a81b021-5c77-4fc7-8ff8-e527f1ed45e6" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>print(device_inventory_ports)</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="d5bfec6d-aeed-4607-ba19-822c3f35d532" action="for" useFieldsInCommand="false">
                                                            <command>
                                                                <body>port_name in device_inventory_ports:</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="578e96d4-1ab6-4b63-87fc-ae053b13ccd5" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                    <command>
                                                                        <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                                                    </command>
                                                                    <postProcessing>
                                                                        <analysisRules>
                                                                            <item>
                                                                                <extractorInfo extractorType="query">
                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                        <query sub="true">mapped/Json/items/*\\[inventoryResourceId=&quot;[port_name]&quot;]/topologyResourceId</query>
                                                                                    </extractorProperties>
                                                                                </extractorInfo>
                                                                                <processorInfo ruleType="store">
                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                        <storageLocation>device_topology_port_id</storageLocation>
                                                                                        <storeInAList>true</storeInAList>
                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                    </ruleProperties>
                                                                                </processorInfo>
                                                                            </item>
                                                                        </analysisRules>
                                                                    </postProcessing>
                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                                                </item>
                                                                <item guid="046e1c26-8890-4b68-bcdc-06d5b7f99314" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>device_topology_port_ids.append(device_topology_port_id)</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="23220167-15c4-4841-b08b-1d4e055ec693" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>print(device_topology_port_ids)</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="fb2b3222-80e9-418a-8598-896a39e1c114" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Enable Vdom Mode if needed</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="922b428c-54c8-4907-9bdd-19aff325acf5" action="open" session="vdom">
                                                            <command>
                                                                <body>project://Fortigate_console/session_profiles/console.ffsp</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                    <completionProperties>
                                                                        <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                    </completionProperties>
                                                                </stepProperties>
                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                    <ipAddress inherit="false">[device_console_ip]</ipAddress>
                                                                    <port inherit="false">[device_console]</port>
                                                                </sessionProperties>
                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                            </applicationProperties>
                                                        </item>
                                                        <item guid="86c8378f-8b7d-4942-8801-6de9b979e464" action="consoleLogin" session="vdom" useFieldsInCommand="false">
                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                        </item>
                                                        <item guid="52fe1ae5-be4f-401f-a9c5-af278b7c122b" action="command" session="vdom">
                                                            <command>
                                                                <body>config global</body>
                                                            </command>
                                                            <postProcessing>
                                                                <storeResponseAt>vdom_output</storeResponseAt>
                                                                <storeResponseText>true</storeResponseText>
                                                            </postProcessing>
                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                        </item>
                                                        <item guid="42620d1d-633a-4013-98d9-f54b8966975f" action="if" useFieldsInCommand="false">
                                                            <command>
                                                                <body>&quot;Command fail. Return code 1&quot; in vdom_output:</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="bb0e01a1-4b87-4d65-986e-adc3ea7b557a" action="enableVdom" session="vdom" useFieldsInCommand="false">
                                                                    <postProcessing>
                                                                        <analysisRules>
                                                                            <item>
                                                                                <extractorInfo extractorType="query">
                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                        <query>isEmpty()</query>
                                                                                    </extractorProperties>
                                                                                </extractorInfo>
                                                                                <processorInfo ruleType="assert">
                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                        <expression>str(value) == &quot;false&quot; </expression>
                                                                                        <actionsWhenTrue>
                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                    <message>---For device [device] enable vdom operation was successful</message>
                                                                                                </actionProperties>
                                                                                            </item>
                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                            </item>
                                                                                        </actionsWhenTrue>
                                                                                        <actionsWhenFalse>
                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                    <message>---Enable vdom operation was not successful</message>
                                                                                                </actionProperties>
                                                                                            </item>
                                                                                        </actionsWhenFalse>
                                                                                    </ruleProperties>
                                                                                </processorInfo>
                                                                            </item>
                                                                        </analysisRules>
                                                                    </postProcessing>
                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="001ac79d-8fe6-453c-be24-7ccc17794eac" action="close" session="vdom" useFieldsInCommand="false">
                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="e69d1c30-f991-42c7-b776-a811302a067d" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Determine device ports from LAG and config LAG</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="0238a7d5-8d4c-43ed-bc56-2c397252cacd" action="for" useFieldsInCommand="false">
                                                            <command>
                                                                <body>item in device_topology_port_ids:</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="e8764373-a191-4056-a70c-d98ca9632204" action="for" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>links in LAG_port_ids:</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="f3baf668-54f4-40b7-86cc-5e5ae390a3bc" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(links[1])</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="2957ec91-cb4f-413f-9333-4230cb3480c4" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(links[0])</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="0320be3f-f322-4395-a471-8fc8e891569d" action="if" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>len(item)==2:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="514fae0e-7e2d-480c-863e-8cf961cce547" action="if" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>item[0]==links[0] or item[0]==links[1] or item[1]==links[0] or item[1]==links[1]:</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="3e9048c6-fca7-4064-a692-1c38bb964eee" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>device_lag_ports.append(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="d7e944c1-fec3-42df-a49c-8ccee6699cca" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="83caa4e0-608a-43c0-9b58-38b7c3960cc9" action="elif" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>len(item)==1:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="af4e64bf-482e-4ab4-89eb-15621ac6223d" action="if" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>item[0]==links[0] or item[0]==links[1]:</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="98f8f9f9-91ca-4075-aabd-6bcf31ff5f53" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>device_lag_ports.append(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="252ae800-5bbb-431b-871b-ea9a2bd43031" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="af0d9b2e-9fd9-4946-89db-9d08430bb4bc" action="if" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_lag_ports == []:</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="f5a0c007-33f8-469c-930e-d25cebcbb79e" action="comment" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>skip operation on device</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="aa65053a-e645-4fd8-be7c-17c5e2833a82" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(&quot;Device has no LAG connections&quot;)</body>
                                                                            </command>
                                                                            <postProcessing>
                                                                                <analysisRules>
                                                                                    <item>
                                                                                        <extractorInfo extractorType="query">
                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                <query>isEmpty()</query>
                                                                                            </extractorProperties>
                                                                                        </extractorInfo>
                                                                                        <processorInfo ruleType="assert">
                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                <expression>value == &quot;false&quot; </expression>
                                                                                                <actionsWhenTrue>
                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                            <message>---For device [device] there are no LAG connections, skip operation ...</message>
                                                                                                        </actionProperties>
                                                                                                    </item>
                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                    </item>
                                                                                                </actionsWhenTrue>
                                                                                            </ruleProperties>
                                                                                        </processorInfo>
                                                                                    </item>
                                                                                </analysisRules>
                                                                            </postProcessing>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="d1cdc7c9-51ed-4b55-b0f0-cd4b2b59fa02" action="else" useFieldsInCommand="false">
                                                            <nestedSteps>
                                                                <item guid="1cf4967c-a01d-4fd4-9141-3c5b040cf382" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>print(device_lag_ports)</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="98c5bf9c-22ba-4496-859e-d41d02e44cc8" action="comment" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>Find physical ports from LAG</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="04554bb2-c1aa-4692-89b9-10405c95f088" action="for" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>port_item in device_lag_ports:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="42a63f18-ad2b-4024-98e6-d85ae9a934ff" action="eval" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>port_item=port_item[0]</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="a3630955-41c9-4359-9076-a9174374b568" action="eval" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>print(port_item)</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="b851d365-7f86-42f1-a628-0084abe58315" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                    <command>
                                                                                        <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                                                                    </command>
                                                                                    <postProcessing>
                                                                                        <analysisRules>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query sub="true">mapped/Json/items/*\\[topologyResourceId=&quot;[port_item]&quot;]/name</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>device_port</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query sub="true">mapped/Json/items/*\\[topologyResourceId=&quot;[port_item]&quot;]/inventoryParentResourceId</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>parent_port_id</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                        </analysisRules>
                                                                                    </postProcessing>
                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                                                                </item>
                                                                                <item guid="686d7db3-9d00-486a-978c-4922c9be641b" action="eval" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>print(parent_port_id, device_id)</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="6e04a218-5c32-42f7-acd7-31b542fa21d2" action="if" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>device_id == parent_port_id:</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="b34ba1de-2921-4140-87ac-bfff59cdc61e" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>device_ports.append(device_port)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="9591d454-e644-4edd-9cf6-446c02af6436" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(device_ports)</body>
                                                                            </command>
                                                                            <postProcessing>
                                                                                <analysisRules>
                                                                                    <item>
                                                                                        <extractorInfo extractorType="none">
                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                        </extractorInfo>
                                                                                        <processorInfo ruleType="message">
                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                <message> For device &quot;[device]&quot; ports [device_ports] are included in LAG connections</message>
                                                                                                <tag sub="false" defaultValue=""/>
                                                                                            </ruleProperties>
                                                                                        </processorInfo>
                                                                                    </item>
                                                                                </analysisRules>
                                                                            </postProcessing>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="d0282f0c-944a-4d5d-acaf-8995bcf34b4b" action="comment" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>Determine device ports included in LAG on neighbor-device</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="71b55f6f-76b1-4eee-b674-07270d944262" action="for" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>device_port in device_ports:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="e7bc2339-3c0f-498b-85b4-6f5d173a53d0" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                    <command>
                                                                                        <body>/velocity/api/inventory/v16/device/[device_id]/ports?limit=200</body>
                                                                                    </command>
                                                                                    <postProcessing>
                                                                                        <analysisRules>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query sub="true">mapped/Json/ports/*\\[name=&quot;[device_port]&quot;]/connectedPortName</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>conn_port_name</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                        <query sub="true">mapped/Json/ports/*\\[name=&quot;[device_port]&quot;]/connectedPortParentName</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="store">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                        <storageLocation>conn_device_name</storageLocation>
                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                        </analysisRules>
                                                                                    </postProcessing>
                                                                                    <nestedSteps>
                                                                                        <item guid="0bfb906d-f07b-47de-922a-c791fccf296d" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>conn_port_names.append(conn_port_name)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="3dca7402-0059-4e37-b7f8-27e5be2e6f71" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>conn_device_names.append(conn_device_name)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="d2a341b2-1bdd-4c4e-8f0b-00f12075d50a" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>string=device_port+&quot; : &quot;+conn_port_name +&quot; : &quot;+ conn_device_name</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="525e0e1a-b7ff-4a29-a456-981d4f778e5d" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>device_name_port.append(string)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="edbc1354-e757-409f-bdb4-37e851d35ba4" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>string=&quot;&quot;</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/ports?limit=200" action.inherit="false"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="17694dcb-2fe0-47f7-aedd-2598c89e59d8" action="comment" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>Check device for multiple LAG connections and config LAG </body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="5d0d4e8f-6e34-48ce-b989-54738e413d5f" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(conn_port_names)</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="5a796f85-cbc7-4a81-911d-0edb5e17a540" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(conn_device_names)</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="9f82860c-a8fb-4268-a1a8-d904e5aa0671" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>conn_device_names=list(set(conn_device_names))</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="40b4d032-164c-4903-9b60-5c7fbceb7bba" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(device_name_port)</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="8c829af9-78a4-40f5-a514-7a26f5400958" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(conn_device_names)</body>
                                                                            </command>
                                                                            <postProcessing>
                                                                                <analysisRules>
                                                                                    <item>
                                                                                        <extractorInfo extractorType="none">
                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                        </extractorInfo>
                                                                                        <processorInfo ruleType="message">
                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                <message> For device &quot;[device]&quot; found [len(conn_device_names)] LAG connections</message>
                                                                                                <tag sub="false" defaultValue=""/>
                                                                                            </ruleProperties>
                                                                                        </processorInfo>
                                                                                    </item>
                                                                                </analysisRules>
                                                                            </postProcessing>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="fb1958f5-dfad-4b4e-a495-bfdf628248d4" action="for" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>conn_device_name in conn_device_names:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="cd29d0f0-c1ff-4c94-929b-0be700aa7d2a" action="for" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>element in device_name_port:</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="dc8bacea-cd06-40dd-b38a-2fd69fade6be" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(conn_device_name)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="9861264f-6f02-41d1-9205-40415da25f83" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(element.split(&quot;:&quot;)[2].strip())</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="65b248d8-6e1c-4e55-8c96-8a5a95b604b5" action="if" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>conn_device_name == element.split(&quot;:&quot;)[2].strip():</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="40eaed43-97b1-49cc-a1c3-473f3d84bd7a" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>device_ports_per_lag.append(element.split(&quot;:&quot;)[0].strip())</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="fb45c1e8-1c0d-4bfd-83bf-f16db43291fc" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>conn_device_ports_per_lag.append(element.split(&quot;:&quot;)[1].strip())</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="6fd0eccc-75e6-4755-b597-eb1b94af9934" action="eval" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>print(device_ports_per_lag)</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="2612eae5-1bda-4044-a7cf-0f43036e9ee3" action="eval" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>print(conn_device_ports_per_lag)</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="2adbfe18-66ee-49a2-8cfd-e0525d39faa4" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Get device details</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="0e78d7c4-d58d-456f-9602-9df3c5406020" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                            <command>
                                                                                                <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console&apos;]/value</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>device_console_ip_addr</storageLocation>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console Port&apos;]/value</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>device_console_port</storageLocation>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;username&apos;]/value</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>device_username</storageLocation>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;password&apos;]/value</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>device_password</storageLocation>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]" action.inherit="false"/>
                                                                                        </item>
                                                                                        <item guid="05a40e5f-fc18-4916-bccd-654b6ea07087" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                            <command>
                                                                                                <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[conn_device_name]</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;ipAddress&apos;]/value</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>conn_device_ipAddress</storageLocation>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console&apos;]/value</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>conn_device_console_ip_addr</storageLocation>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console Port&apos;]/value</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>conn_device_console_port</storageLocation>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;username&apos;]/value</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>conn_device_username</storageLocation>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;password&apos;]/value</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>conn_device_password</storageLocation>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                <query>mapped/Json/devices/item/id</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>conn_device_id</storageLocation>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                <query>mapped/Json/devices/item/templateId</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>conn_template_id</storageLocation>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[conn_device_name]" action.inherit="false"/>
                                                                                        </item>
                                                                                        <item guid="83cab9e1-c7a4-43eb-a0e1-b0b506865690" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                            <command>
                                                                                                <body>/velocity/api/inventory/v16/template/[conn_template_id]</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="query">
                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                <query>mapped/Json/name</query>
                                                                                                            </extractorProperties>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="store">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                <storageLocation>conn_template_name</storageLocation>
                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/template/[conn_template_id]" action.inherit="false"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="afde54d8-dbe9-4440-8343-492f827810e5" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Config LAG on device</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="11696135-b3aa-40ad-a5ac-183bf4496f7c" action="comment" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>open session</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="c0382584-9ed5-4d5f-865c-4e87a8eb1577" action="open" session="fortigate">
                                                                                                    <command>
                                                                                                        <body>project://Fortigate_console/session_profiles/console.ffsp</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                        <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                            <completionProperties>
                                                                                                                <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                            </completionProperties>
                                                                                                        </stepProperties>
                                                                                                        <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                            <ipAddress inherit="false">[device_console_ip_addr]</ipAddress>
                                                                                                            <port inherit="false">[device_console_port]</port>
                                                                                                        </sessionProperties>
                                                                                                        <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                    </applicationProperties>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="387ae3e8-a6a5-4c20-a373-c4fdb51e1259" action="comment" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>set parameters based on name convention</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="4b06fd6c-d757-4ca1-8b27-f06e8e4da4f0" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>name=&quot;DATA&quot;+&quot;_&quot;+&quot;_&quot;.join(device_ports_per_lag)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="588333d6-0826-4b9c-bb4f-8d3d21540502" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(name)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="197cb446-e74f-4f2f-97a5-4a453420e7ee" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>ports=&quot; &quot;.join(device_ports_per_lag)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="55b962e7-191b-468b-a621-2723ffdafa84" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(ports)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="d090e011-582e-4ea8-9e48-ef93a589e309" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>lag=&quot;LAG&quot;+&quot;_&quot;+&quot;_&quot;.join(device_ports_per_lag)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="bff9ffc2-32ab-4bc9-b0e3-729e30cef320" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(lag)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="23b9ca89-239d-4792-992c-851531677a8b" action="comment" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>console login and create vdom</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="bd7894a7-d8d6-4d05-9290-9c11c3c7a225" action="configureVdom" session="fortigate" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>-name [name]</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="1d18861b-eab1-404b-8113-68667901b0c2" action="comment" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>assign interfaces to vdom</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="535d1951-cfa4-460d-a4ec-2b91bc5e9db2" action="for" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>port in device_ports_per_lag:</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="87e9d4ab-d041-4468-965a-bffe1e86f538" action="assignInterfacesToVdom" session="fortigate" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>-port [port] -name [name]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="481e44e3-c944-4378-b7c0-e72fb64fd492" action="comment" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>config LAG</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="b92dd56d-9413-4947-98bd-86528e851609" action="configureLag" session="fortigate" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>-port [lag] -name [name] -ports [ports]</body>
                                                                                                    </command>
                                                                                                    <postProcessing>
                                                                                                        <analysisRules>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query>retCode()</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="assert">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                        <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                        <actionsWhenTrue>
                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                    <message>For &quot;[device]&quot; config LAG on ports [device_ports_per_lag] is ok</message>
                                                                                                                                </actionProperties>
                                                                                                                            </item>
                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                            </item>
                                                                                                                        </actionsWhenTrue>
                                                                                                                        <actionsWhenFalse>
                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                    <message>For &quot;[device]&quot; config LAG is not ok</message>
                                                                                                                                </actionProperties>
                                                                                                                            </item>
                                                                                                                        </actionsWhenFalse>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                        </analysisRules>
                                                                                                    </postProcessing>
                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="ed3c330e-aa9f-42e5-8612-4af6a0570256" action="comment" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>console exit</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="076329af-1138-4970-917d-7d4c7fd80e63" action="consoleExit" session="fortigate" useFieldsInCommand="false">
                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="11f5946f-2dcb-4fd7-a0ce-32bc55b17603" action="comment" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>close session</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="614a860a-6d3c-4554-a3b6-2fa46c5095fe" action="close" session="fortigate">
                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="4a07b5a7-4ec4-4c1e-9bdc-3c24423b56c1" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Config LAG on connection device</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="32cb7d19-f1e6-4aee-9f73-119f85d750db" action="if" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>conn_template_name == &quot;Fortinet Switch&quot;:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="33dfc8ea-17ae-460d-83b4-9611b663cb3d" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>info</body>
                                                                                                    </command>
                                                                                                    <postProcessing>
                                                                                                        <analysisRules>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="none">
                                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="message">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                        <message> For device &quot;[conn_device_name]&quot; ports [conn_device_ports_per_lag] are included in LAG</message>
                                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                        </analysisRules>
                                                                                                    </postProcessing>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="0576fa15-a99d-4dc1-b947-e72238330b5b" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>open session</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="7e563aa4-cd2b-4016-a714-09cabefe05c7" action="open" session="fortiswitch" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>project://Fortiswitch_console/session_profiles/console.ffsp</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                    <completionProperties>
                                                                                                                        <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                    </completionProperties>
                                                                                                                </stepProperties>
                                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                    <ipAddress inherit="false">[conn_device_console_ip_addr]</ipAddress>
                                                                                                                    <port inherit="false">[conn_device_console_port]</port>
                                                                                                                </sessionProperties>
                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                            </applicationProperties>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="68b7959a-e86a-4a54-b122-ede2fd7c1284" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>set parameters based on name convention</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="a50bb9f1-b4f4-42c8-8d6a-5898ee2a7030" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>name_tsw=&quot;LAG&quot;+&quot;_&quot;+&quot;_&quot;.join(conn_device_ports_per_lag)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="19ec3a68-320a-4f4f-bde4-0749c3f899ee" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>ports_tsw=&quot; &quot;.join(conn_device_ports_per_lag)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="fabc20be-b427-432a-a9a4-03ffb83a6153" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>mode=&quot;active&quot;</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="9a6155a8-44ba-495a-8e7b-edc34db270a3" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>console login and set trunk</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="70aee17c-34c4-4ad9-b308-0d03300ab998" action="setTrunkModeLag" session="fortiswitch" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>-name [name_tsw] -port [ports_tsw] -mode [mode]</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>retCode()</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                <actionsWhenTrue>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                            <message>For &quot;[conn_device_name]&quot; config LAG on ports [conn_device_ports_per_lag] is ok</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenTrue>
                                                                                                                                <actionsWhenFalse>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                            <message>For &quot;[conn_device_name]&quot; config LAG is not ok</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="FailTest">
                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenFalse>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="5450e391-670a-413d-a14b-33a0359ec153" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>get vlanId for LAG ports</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="adb72bf5-03d1-42ae-8688-8712c18e1d02" action="for" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_port in (conn_device_ports_per_lag):</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="442a88b3-1e27-43a0-be13-79a3482c72f5" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                    <command>
                                                                                                                        <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                                                                                                    </command>
                                                                                                                    <postProcessing>
                                                                                                                        <analysisRules>
                                                                                                                            <item>
                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                        <query sub="true">mapped/Json/items/*\\[name=&quot;[conn_port]&quot;]/vlanIds/item/id</query>
                                                                                                                                    </extractorProperties>
                                                                                                                                </extractorInfo>
                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                        <storageLocation>vlan_id</storageLocation>
                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                    </ruleProperties>
                                                                                                                                </processorInfo>
                                                                                                                            </item>
                                                                                                                        </analysisRules>
                                                                                                                    </postProcessing>
                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="79bbcf85-4573-4c0a-9f7b-da424b6003c2" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>print(vlan_id)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="b957d9cf-56a3-407c-b0f7-7ed5862a675e" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>set native vlan to LAG port</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="ca73c1cb-d0ae-441e-96c2-c615f6edd364" action="addPortToNativeVlan" session="fortiswitch" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>-port [name_tsw] -vlan [vlan_id]</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>retCode()</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                <actionsWhenTrue>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                            <message>For &quot;[conn_device_name]&quot; set native-vlan [vlan_id] for port [name_tsw] is ok</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenTrue>
                                                                                                                                <actionsWhenFalse>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                            <message>For &quot;[conn_device_name]&quot; set native-vlan is not ok</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="FailTest">
                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenFalse>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="a0c64043-c0d9-4113-9f7a-74a7ff3ef0d8" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>discover and update the LAG port </body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="a3ff2cf0-76eb-4815-b587-45a8ed977f74" action="POST" session="velocity">
                                                                                                            <command>
                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_device_id]/action?type=discover</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="message">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                <message> Waiting for discover operation on [conn_device_name]</message>
                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                                                    <memberClasses>
                                                                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                                                    </memberClasses>
                                                                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                                                </httpHeader>
                                                                                                            </applicationProperties>
                                                                                                        </item>
                                                                                                        <item guid="0325b168-b971-4573-8ba6-88d17c96a966" action="sleep">
                                                                                                            <command>
                                                                                                                <body>10</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="f8a5d678-a03f-4dfd-b627-8aa352f8084f" action="consoleLogin" session="fortiswitch" useFieldsInCommand="false">
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>retCode()</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                <actionsWhenFalse>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                            <message>--- console login not ok; fail test</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="FailTest">
                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenFalse>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                        </item>
                                                                                                        <item guid="d3434fb2-05e2-4826-ae80-f393295e48df" action="command" session="fortiswitch">
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>promptName()</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                <expression>str(value) == &quot;prompt1&quot; </expression>
                                                                                                                                <actionsWhenTrue>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                            <message>For &quot;[conn_device_name]&quot;: discover operation was successfully</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenTrue>
                                                                                                                                <actionsWhenFalse>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="RepeatStep">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenFalse>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                                                <promptProperties>
                                                                                                                    <stepPrompts>
                                                                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                                                                            <Content sub="true">* login:</Content>
                                                                                                                        </item>
                                                                                                                        <item name="prompt2" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                                                            <Content sub="true">* #</Content>
                                                                                                                        </item>
                                                                                                                        <item name="prompt3">
                                                                                                                            <Content>Password:</Content>
                                                                                                                        </item>
                                                                                                                        <item name="prompt4">
                                                                                                                            <Content>--More-- </Content>
                                                                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                                                                        </item>
                                                                                                                        <item name="prompt5">
                                                                                                                            <Content>Do you want to continue? (y/n)</Content>
                                                                                                                        </item>
                                                                                                                        <item name="prompt6" MatchMethod="WILDCARD">
                                                                                                                            <Content sub="true">* (*) #</Content>
                                                                                                                        </item>
                                                                                                                        <item name="prompt7" MatchMethod="WILDCARD">
                                                                                                                            <Content sub="true">*:</Content>
                                                                                                                        </item>
                                                                                                                        <item name="prompt8" MatchMethod="WILDCARD">
                                                                                                                            <Content sub="true">*</Content>
                                                                                                                        </item>
                                                                                                                    </stepPrompts>
                                                                                                                </promptProperties>
                                                                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                </completionProperties>
                                                                                                            </applicationProperties>
                                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="1df6212e-0a1f-4e61-9964-6b77d2fa49c5" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>console exit</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="9fbb98a2-4ad2-4448-a6ed-91aa48bef9b4" action="consoleExit" session="fortiswitch" useFieldsInCommand="false">
                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="fda4bcfe-f8ee-4b98-a0ea-b40d9d83dde6" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>close session</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="e1267ac3-40b7-4277-8dd2-914ab44686aa" action="close" session="fortiswitch">
                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="b5202949-1758-4e9d-b575-2a151282075b" action="if" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>conn_template_name == &quot;Arista Switch&quot;:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="c9888f11-030b-4a29-9be0-a9d5abcaaf2d" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>info</body>
                                                                                                    </command>
                                                                                                    <postProcessing>
                                                                                                        <analysisRules>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="none">
                                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="message">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                        <message> For device &quot;[conn_device_name]&quot; ports [conn_device_ports_per_lag] are included in LAG</message>
                                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                        </analysisRules>
                                                                                                    </postProcessing>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="0d556765-23cd-4f4c-b25a-0b8889daefcc" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>open session</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="049cf21d-7303-4d69-97f6-9ec6efc81158" action="open" session="arista" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>project://Arista_console/session_profiles/console.ffsp</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                    <completionProperties>
                                                                                                                        <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                    </completionProperties>
                                                                                                                </stepProperties>
                                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                    <ipAddress inherit="false">[conn_device_console_ip_addr]</ipAddress>
                                                                                                                    <port inherit="false">[conn_device_console_port]</port>
                                                                                                                </sessionProperties>
                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                            </applicationProperties>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="0c8ecb28-8f57-4dd4-a92c-f55058642acb" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>set parameters based on name convention</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="10fbe244-5107-4753-8e13-eeeb65c94af0" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>number = 1</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="88508951-b6c7-44bc-87f8-fbe679815261" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>ports_tsw=&quot;,&quot;.join(conn_device_ports_per_lag)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="c8eded6a-b838-44b2-9239-b841ec57b36d" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>mode=&quot;active&quot;</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="28a9e1e5-93e0-452d-9087-4a472ddb17b6" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>console login and set port-channel</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="ffb928c5-bf4f-4c72-a417-73bc36d4273a" action="setSwitchPortChannel" session="arista" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>-number [number] -interfaces [ports_tsw] -mode [mode]</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>retCode()</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                <actionsWhenTrue>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                            <message>For &quot;[conn_device_name]&quot; config LAG on ports [conn_device_ports_per_lag] is ok</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenTrue>
                                                                                                                                <actionsWhenFalse>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                            <message>For &quot;[conn_device_name]&quot; config LAG is not ok</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="FailTest">
                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenFalse>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="d4d6a30f-5068-49ea-986f-f20ccdc36b51" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>get vlanId for LAG ports</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="087b64fa-051b-451c-9ef4-d1e51b608897" action="for" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_port in conn_device_ports_per_lag:</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="8bfe8d9e-30c5-4dc7-bc6b-0ca43ee49063" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                    <command>
                                                                                                                        <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                                                                                                    </command>
                                                                                                                    <postProcessing>
                                                                                                                        <analysisRules>
                                                                                                                            <item>
                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                        <query sub="true">mapped/Json/items/*\\[name=&quot;[conn_port]&quot;]/vlanIds/item/id</query>
                                                                                                                                    </extractorProperties>
                                                                                                                                </extractorInfo>
                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                        <storageLocation>vlan_id</storageLocation>
                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                    </ruleProperties>
                                                                                                                                </processorInfo>
                                                                                                                            </item>
                                                                                                                            <item>
                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                        <query sub="true">mapped/Json/items/*\\[name=&quot;[conn_port]&quot;]/vlanIds/item/isTagged</query>
                                                                                                                                    </extractorProperties>
                                                                                                                                </extractorInfo>
                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                        <storageLocation>vlan_id_type</storageLocation>
                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                    </ruleProperties>
                                                                                                                                </processorInfo>
                                                                                                                            </item>
                                                                                                                        </analysisRules>
                                                                                                                    </postProcessing>
                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="cc052d35-d714-44aa-b9a7-da73a79915d6" action="if" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>type(vlan_id)==str:</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="9d6ae25c-08e5-4a8d-9117-f3144b570c54" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>vlan_id=vlan_id.split()</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="734daf04-2355-45b8-8b31-7a5f061b9a17" action="if" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>type(vlan_id_type)==str:</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="3c1d7086-59a7-43a9-b277-8de5e3bb36d0" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>vlan_id_type=vlan_id_type.split()</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="fe386093-2077-40f5-87cd-26d329c151ea" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>print(vlan_id)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="34ce094d-7791-4902-9b45-3c8dde99c3ba" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>print(vlan_id_type)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="a368ecb5-1513-469a-89ec-41c7c7a3070e" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>set single vlan to LAG port</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="6f04b722-0416-4828-9818-c122bbd80b9d" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>port_channel=&quot;port-channel&quot;+&quot; &quot;+str(number)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="6e0f8894-1202-4c93-ba77-c8e7df95dc18" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>print(port_channel)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="6012b197-2b2f-4c64-b8e6-179f24249dd4" action="for" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>index in range(len(vlan_id)):</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="d40a989b-869d-413c-a99f-e7f313231d62" action="if" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>vlan_id_type[index]==&quot;false&quot;:</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="a2deb3c3-f6d5-4ae5-b4d6-e33b7eb6c8e9" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>vlanId=vlan_id[index]</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="6d85c896-cc30-4504-b0b9-861bb5d49ecb" action="addPortToSingleVlan" session="arista_lepton" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>-port [port_channel] -vlan [vlanId]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>retCode()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                            <message>For &quot;[conn_device_name]&quot; set native-vlan [vlan_id] for port [port_channel] is ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                            <message>For &quot;[conn_device_name]&quot; set native-vlan is not ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                        <item guid="7d1b2bf5-a38e-4fd4-8da1-dff0905a13e4" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>vlan_id.remove(vlanId)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="024a1148-d153-4b76-a355-022c17a45ace" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>set allowed vlans to LAG port if needed</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="e1197094-8764-423b-b80a-d3e8015066dc" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>print(vlan_id)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="1f5768bb-09bd-4fdd-b135-ac1a827c766d" action="if" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>vlan_id != []:</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="80e99af8-34c9-4f6d-9d2a-6d49db88a897" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>vlanIds=&quot;,&quot;.join(vlan_id)</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="1bb1dc08-ac3c-4b6b-aea0-802b0b0d09e3" action="addPortToAllowedVlans" session="arista_lepton" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>-port [port_channel] -vlan [vlanIds]</body>
                                                                                                                    </command>
                                                                                                                    <postProcessing>
                                                                                                                        <analysisRules>
                                                                                                                            <item>
                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                        <query>retCode()</query>
                                                                                                                                    </extractorProperties>
                                                                                                                                </extractorInfo>
                                                                                                                                <processorInfo ruleType="assert">
                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                        <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                        <actionsWhenTrue>
                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                    <message>For &quot;[conn_device_name]&quot; set allowed vlans [vlanIds] for port [port_channel] is ok</message>
                                                                                                                                                </actionProperties>
                                                                                                                                            </item>
                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                            </item>
                                                                                                                                        </actionsWhenTrue>
                                                                                                                                        <actionsWhenFalse>
                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                    <message>For &quot;[conn_device_name]&quot; set allowed vlans is not ok</message>
                                                                                                                                                </actionProperties>
                                                                                                                                            </item>
                                                                                                                                            <item actionId="FailTest">
                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                            </item>
                                                                                                                                        </actionsWhenFalse>
                                                                                                                                    </ruleProperties>
                                                                                                                                </processorInfo>
                                                                                                                            </item>
                                                                                                                        </analysisRules>
                                                                                                                    </postProcessing>
                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="c3407791-013b-423c-bab5-0ce9439d3e7b" action="else" useFieldsInCommand="false">
                                                                                                            <nestedSteps>
                                                                                                                <item guid="6e856259-be49-4ad0-b5da-968bc45b9069" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>Insert steps here for when the expression evaluates to false</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="8749cda8-e8b9-4ac2-bb81-2829405753e0" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>discover and update the LAG port </body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="e2fd4dc4-2b81-44bb-a807-cfd28f828b8f" action="POST" session="velocity">
                                                                                                            <command>
                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_device_id]/action?type=discover</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="message">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                <message> Waiting for discover operation on [conn_device_name]</message>
                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                                                    <memberClasses>
                                                                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                                                    </memberClasses>
                                                                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                                                </httpHeader>
                                                                                                            </applicationProperties>
                                                                                                        </item>
                                                                                                        <item guid="c76d2760-8dc5-4556-99fe-dd19bcb49eae" action="sleep">
                                                                                                            <command>
                                                                                                                <body>20</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="01e5ce1a-c186-402e-bbb0-4fb9e966a089" action="consoleLogin" session="arista" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>-username [conn_device_username] -password [conn_device_password]</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>retCode()</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                <actionsWhenFalse>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                            <message>--- console login not ok; fail test</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="FailTest">
                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenFalse>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                        </item>
                                                                                                        <item guid="13a8a6d8-1e70-40c5-9bda-d8e99b2982fa" action="command" session="arista">
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>promptName()</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                <expression>str(value) == &quot;prompt1&quot; or str(value) ==&quot;prompt4&quot;</expression>
                                                                                                                                <actionsWhenTrue>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                            <message>For &quot;[conn_device_name]&quot;: discover operation was successfully</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenTrue>
                                                                                                                                <actionsWhenFalse>
                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                                                                        </actionProperties>
                                                                                                                                    </item>
                                                                                                                                    <item actionId="RepeatStep">
                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                                    </item>
                                                                                                                                </actionsWhenFalse>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                                                <promptProperties>
                                                                                                                    <stepPrompts>
                                                                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                                                                            <Content sub="true">* login:</Content>
                                                                                                                        </item>
                                                                                                                        <item name="prompt2">
                                                                                                                            <Content>Password:</Content>
                                                                                                                        </item>
                                                                                                                        <item name="prompt3" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                                                            <Content sub="true">*&gt;</Content>
                                                                                                                        </item>
                                                                                                                        <item name="prompt4" MatchMethod="WILDCARD">
                                                                                                                            <Content sub="true">*#</Content>
                                                                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                                                                        </item>
                                                                                                                        <item name="prompt5" MatchMethod="WILDCARD">
                                                                                                                            <Content sub="true">*(*)#</Content>
                                                                                                                        </item>
                                                                                                                        <item name="prompt6"/>
                                                                                                                    </stepPrompts>
                                                                                                                </promptProperties>
                                                                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                </completionProperties>
                                                                                                            </applicationProperties>
                                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="2276d3b0-b51b-497b-ab2c-9cc6ecf7ae1d" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>console exit</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="df1af8c6-5335-470f-ab85-2ee79bfe83db" action="consoleExit" session="arista" useFieldsInCommand="false">
                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="7d9932ef-915b-477c-b54e-bd93ce167ba4" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>close session</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="b5e7eafb-e005-47f0-8c95-79c516ede28a" action="close" session="arista">
                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="133c9d0e-5d8b-4b1b-9024-9e0fa9c1a5a7" action="if" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>conn_template_name == &quot;Lepton ColdFusion Switch&quot;:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="521c6034-1e85-40d9-8cae-7f5c00f8a9a9" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>open session</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="9e655480-1569-4688-8cb2-811e065b697f" action="open" session="lepton" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>project://Lepton_ssh/session_profiles/ssh.ffsp</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                <sessionProperties type="com.fnfr.svt.applications.ssh.documents.SSHProperties">
                                                                                                                    <ipAddress inherit="false">[conn_device_ipAddress]</ipAddress>
                                                                                                                    <user inherit="false">[conn_device_username]</user>
                                                                                                                    <password inherit="false" masked="false">[conn_device_password]</password>
                                                                                                                </sessionProperties>
                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                            </applicationProperties>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="386d4ece-3999-49ce-b581-63efaa5e5a1f" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>ssh login and get connected port</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="454cf869-c557-4cfd-8a8e-889a9c23ea93" action="for" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_port_name in conn_device_ports_per_lag:</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="76affdf3-25b3-4288-ab27-4211c4543911" action="getConnectedPort" session="lepton" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>-port [conn_port_name]</body>
                                                                                                                    </command>
                                                                                                                    <postProcessing>
                                                                                                                        <analysisRules>
                                                                                                                            <item>
                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                        <query>responseLine()</query>
                                                                                                                                    </extractorProperties>
                                                                                                                                </extractorInfo>
                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                        <storageLocation>conn_port_lepton</storageLocation>
                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                    </ruleProperties>
                                                                                                                                </processorInfo>
                                                                                                                            </item>
                                                                                                                        </analysisRules>
                                                                                                                    </postProcessing>
                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="fe37c653-1b9f-4fc9-8f0f-b05142a9f355" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>print(conn_port_lepton)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="ed3db678-2048-49e0-98dd-f92b0f4f19db" action="if" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>len(conn_port_lepton)==3:</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="49c6b5dd-93c7-4938-a518-75368af50cf8" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>conn_port_lepton=conn_port_lepton[:2]+&quot;0&quot;+conn_port_lepton[2:]</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="f2d28744-5ea6-40d9-b278-0ebf50ef7ed8" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>print(conn_port_lepton)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="7d837ae7-e328-49a1-9e3d-f43bd721b58f" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>check neighbor-device on lepton side</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="883b835f-156b-4064-b749-dd24b4d11429" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                            <command>
                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_device_id]/ports?limit=200</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query sub="true">mapped/Json/ports/*\\[name=&quot;[conn_port_lepton]&quot;]/connectedPortName</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_lepton_port_name</storageLocation>
                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query sub="true">mapped/Json/ports/*\\[name=&quot;[conn_port_lepton]&quot;]/connectedPortParentName</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_lepton_device_name</storageLocation>
                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/ports?limit=200" action.inherit="false"/>
                                                                                                        </item>
                                                                                                        <item guid="2b57befe-ecac-4273-b011-bbdf680803ca" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>print(conn_lepton_port_name, conn_lepton_device_name)</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="message">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                <message>--- found lepton device connection: [conn_lepton_device_name] on port [conn_port_lepton]</message>
                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="ff114746-c315-470e-bac7-ffefadfb85a7" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                            <command>
                                                                                                                <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[conn_lepton_device_name]</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/id</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_lepton_device_id</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/templateId</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_lepton_template_id</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[conn_lepton_device_name]" action.inherit="false"/>
                                                                                                        </item>
                                                                                                        <item guid="d6ef2d4f-37d5-4eea-ad1b-eff00fb82035" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                            <command>
                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_lepton_device_id]</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>mapped/Json/properties/*[name=&quot;ipAddress&quot;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_lepton_device_ip_addr</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>mapped/Json/properties/*[name=&quot;Console&quot;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_lepton_device_console_ip_addr</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>mapped/Json/properties/*[name=&quot;Console Port&quot;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_lepton_device_console_port</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/properties/*[name=&quot;username&quot;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_lepton_device_username</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>mapped/Json/properties/*[name=&quot;password&quot;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_lepton_device_password</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_lepton_device_id]" action.inherit="false"/>
                                                                                                        </item>
                                                                                                        <item guid="0830c9bc-b11a-40b6-9fbd-0c2c7d02ab4c" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                            <command>
                                                                                                                <body>/velocity/api/inventory/v16/template/[conn_lepton_template_id]</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/name</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_lepton_template_name</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/template/[conn_lepton_template_id]" action.inherit="false"/>
                                                                                                        </item>
                                                                                                        <item guid="0a54b4c7-0ff0-4005-b9b9-b00878de8d69" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>print(conn_lepton_template_name)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="db6bc9a5-cab0-4e45-9988-d834191333af" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>login to lepton neighbor-device and config lag</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="6c87668a-02d2-490a-a197-9fed8b04b1a4" action="if" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_lepton_template_name == &quot;Fortinet Switch&quot;:</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="1ef03b55-1d3b-46be-933e-d4441cf7ba6e" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>info</body>
                                                                                                                    </command>
                                                                                                                    <postProcessing>
                                                                                                                        <analysisRules>
                                                                                                                            <item>
                                                                                                                                <extractorInfo extractorType="none">
                                                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                </extractorInfo>
                                                                                                                                <processorInfo ruleType="message">
                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                        <message> For device &quot;[conn_lepton_device_name]&quot; ports [conn_lepton_port_names] are included in LAG</message>
                                                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                                                    </ruleProperties>
                                                                                                                                </processorInfo>
                                                                                                                            </item>
                                                                                                                        </analysisRules>
                                                                                                                    </postProcessing>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="0031b0ac-c3f8-4082-b99e-fdfee5fddce0" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>open session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="ad635a7e-ffb9-4a96-9460-8ac82acbb11d" action="open" session="fortiswitch_lepton" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>project://Fortiswitch_console/session_profiles/console.ffsp</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                    <completionProperties>
                                                                                                                                        <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                    </completionProperties>
                                                                                                                                </stepProperties>
                                                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                                    <ipAddress inherit="false">[conn_lepton_device_console_ip_addr]</ipAddress>
                                                                                                                                    <port inherit="false">[conn_lepton_device_console_port]</port>
                                                                                                                                </sessionProperties>
                                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                            </applicationProperties>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="e8b70d78-b938-42f5-b26d-043aa02dd0c7" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>set parameters based on name convention</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="7697c3ad-d897-483a-887c-5de10a56ab50" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>name_tsw=&quot;LAG&quot;+&quot;_&quot;+&quot;_&quot;.join(conn_lepton_port_name)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="ae7a21f1-d17d-4ddc-a9b5-a9a68c6c684a" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>ports_tsw=&quot; &quot;.join(conn_lepton_port_name)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="6f15a1f8-b59f-4664-b08b-42af1a90af08" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>mode=&quot;active&quot;</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="3f54b355-054f-4c2c-aa3b-b14722ff4316" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>console login and set trunk</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="1ed7f150-4f28-4f6f-869d-cc627ab562ad" action="setTrunkModeLag" session="fortiswitch_lepton" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>-name [name_tsw] -port [ports_tsw] -mode [mode]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>retCode()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot; config LAG on ports [conn_lepton_port_name] is ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot; config LAG is not ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="d6bfdbc1-9e92-4af0-85ec-164105c33a56" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>get vlanId for LAG ports</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="c6e7e3cc-7d6e-4dc3-8e2f-5948275f0bfc" action="for" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>conn_port in (conn_lepton_port_name):</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="5ec7c979-34f8-4c27-b8b2-d628466ad301" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                    <command>
                                                                                                                                        <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                                                                                                                    </command>
                                                                                                                                    <postProcessing>
                                                                                                                                        <analysisRules>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                        <query sub="true">mapped/Json/items/*\\[name=&quot;[conn_port]&quot;]/vlanIds/item/id</query>
                                                                                                                                                    </extractorProperties>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                        <storageLocation>vlan_id</storageLocation>
                                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                        </analysisRules>
                                                                                                                                    </postProcessing>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="1126206d-2fad-49ad-9336-e82a914b9ef6" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(vlan_id)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="bf490326-c801-428e-8be8-8e0acd1a195f" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>set native vlan on LAG port</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="40826a3e-93fb-4ed5-93c1-ab54f98f1d7c" action="addPortToNativeVlan" session="fortiswitch_lepton" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>-port [name_tsw] -vlan [vlan_id]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>retCode()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                            <message>For &quot;[conn_device_name]&quot; set native-vlan [vlan_id] for port [name_tsw] is ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                            <message>For &quot;[conn_device_name]&quot; set native-valn is not ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="d3cb27d8-3df3-47ca-ad7b-244915eee5ae" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>discover and update the LAG port </body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="b1cb7286-e900-4d13-8dd0-c8bf22e5fa6d" action="POST" session="velocity">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_lepton_device_id]/action?type=discover</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="message">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                <message> Waiting for discover operation on [conn_lepton_device_name]</message>
                                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[conn_lepton_device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                                                                    <memberClasses>
                                                                                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                                                                    </memberClasses>
                                                                                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                                                                </httpHeader>
                                                                                                                            </applicationProperties>
                                                                                                                        </item>
                                                                                                                        <item guid="3f4c4df6-2fd5-4bdc-b671-71738c4141e3" action="sleep">
                                                                                                                            <command>
                                                                                                                                <body>10</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="2be06b37-89fb-469e-8c8b-6051afd68a57" action="consoleLogin" session="fortiswitch_lepton" useFieldsInCommand="false">
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>retCode()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                            <message>--- console login not ok; fail test</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                        <item guid="4dd6ded1-c16e-47bc-9479-810fd1b8ad69" action="command" session="fortiswitch_lepton">
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>promptName()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>str(value) == &quot;prompt1&quot; </expression>
                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot;: discover operation was successfully</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="RepeatStep">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                                                                <promptProperties>
                                                                                                                                    <stepPrompts>
                                                                                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">* login:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt2" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                                                                            <Content sub="true">* #</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt3">
                                                                                                                                            <Content>Password:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt4">
                                                                                                                                            <Content>--More-- </Content>
                                                                                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt5">
                                                                                                                                            <Content>Do you want to continue? (y/n)</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt6" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">* (*) #</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt7" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">*:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt8" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">*</Content>
                                                                                                                                        </item>
                                                                                                                                    </stepPrompts>
                                                                                                                                </promptProperties>
                                                                                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                </completionProperties>
                                                                                                                            </applicationProperties>
                                                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="e8af4548-1928-4fa9-9d6b-728845e9ecfa" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>console exit</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="9e3d6f8d-bf57-45d5-937b-da9cad19899c" action="consoleExit" session="fortiswitch_lepton" useFieldsInCommand="false">
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="0fa86ff5-f1c4-428d-a49e-5ca6ff63f4af" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>close session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="6aa4ca5a-6309-4129-a695-79b14cd87996" action="close" session="fortiswitch_lepton">
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="3c6969fe-63c9-4ec7-b6d9-407addbc37ce" action="if" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_lepton_template_name == &quot;Arista Switch&quot;:</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="b0349558-fadc-4515-b76d-49b69917aa91" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>info</body>
                                                                                                                    </command>
                                                                                                                    <postProcessing>
                                                                                                                        <analysisRules>
                                                                                                                            <item>
                                                                                                                                <extractorInfo extractorType="none">
                                                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                </extractorInfo>
                                                                                                                                <processorInfo ruleType="message">
                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                        <message> For device &quot;[conn_lepton_device_name]&quot; ports [conn_lepton_port_name] are included in LAG</message>
                                                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                                                    </ruleProperties>
                                                                                                                                </processorInfo>
                                                                                                                            </item>
                                                                                                                        </analysisRules>
                                                                                                                    </postProcessing>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="bf289e02-f9a2-4669-a1dd-87b36733f91f" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>open session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="59dc6100-8f6b-4c34-a906-448683493209" action="open" session="arista_lepton">
                                                                                                                            <command>
                                                                                                                                <body>project://Arista_console/session_profiles/console.ffsp</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                                    <ipAddress inherit="false">[conn_lepton_device_console_ip_addr]</ipAddress>
                                                                                                                                    <port inherit="false">[conn_lepton_device_console_port]</port>
                                                                                                                                    <TerminalProperties>
                                                                                                                                        <stepDefaults>
                                                                                                                                            <completionProperties>
                                                                                                                                                <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                            </completionProperties>
                                                                                                                                        </stepDefaults>
                                                                                                                                    </TerminalProperties>
                                                                                                                                </sessionProperties>
                                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                            </applicationProperties>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="7a72add3-d5e5-40a6-9ddf-2105158c51f5" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>set parameters based on name convention</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="60174d62-8516-4722-bbff-483fb7854896" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>number = &quot;10&quot;</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="026dcdbd-00a0-4694-9267-cdb71dbd7e49" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>ports_arista=&quot;,&quot;.join(conn_lepton_port_name)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="3634b8ae-eb88-4431-a35d-13bf7b2594bb" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(ports_arista)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="2e2a2856-0c2d-4887-bcae-38e60cdade8e" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>mode=&quot;active&quot;</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="76fa3a4f-c178-42af-adbb-0d21e794e951" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>console login and set port-channel</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="db0e2bb3-e3d9-40ef-8450-90180132d95d" action="setSwitchPortChannel" session="arista_lepton" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>-number [number] -interfaces [ports_arista] -mode [mode]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>retCode()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot; config LAG on ports [conn_lepton_port_name] is ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot; config LAG is not ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="3ee1becb-8ed9-4c42-9a71-87d9df73f236" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>get vlanId for LAG ports</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="c60e4ffa-0b74-4315-a9ec-44060030e3a1" action="for" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>conn_port in (conn_lepton_port_name):</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="12de3142-ecc0-4693-a130-860b0202f7ab" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                    <command>
                                                                                                                                        <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                                                                                                                    </command>
                                                                                                                                    <postProcessing>
                                                                                                                                        <analysisRules>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                        <query sub="true">mapped/Json/items/*\\[name=&quot;[conn_port]&quot;]/vlanIds/item/id</query>
                                                                                                                                                    </extractorProperties>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                        <storageLocation>vlan_id</storageLocation>
                                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                        <query sub="true">mapped/Json/items/*\\[name=&quot;[conn_port]&quot;]/vlanIds/item/isTagged</query>
                                                                                                                                                    </extractorProperties>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                        <storageLocation>vlan_id_type</storageLocation>
                                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                        </analysisRules>
                                                                                                                                    </postProcessing>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="fb01711a-7870-4ab7-9eb0-1af89e3250a6" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>type(vlan_id)==str:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="c8d14117-3eed-4447-a690-4856ef28bec6" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>vlan_id=vlan_id.split()</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="db419896-d72f-401f-a69b-2def982ef18d" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>type(vlan_id_type)==str:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="c5123e8a-13ae-47ca-904b-47a77fbeeda2" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>vlan_id_type=vlan_id_type.split()</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="32443906-8243-4e90-ba46-faeee1f11037" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(vlan_id)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="4d2d3f0c-7a7b-477b-b66e-d189c83f0687" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(vlan_id_type)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="dbd0f428-e3cf-4825-99b9-ae3026de54d7" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>set single vlan to LAG port</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="22d0af38-7de3-4d3d-80ad-309ea5535faa" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>port_channel=&quot;port-channel&quot;+&quot; &quot;+number</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="d14dc469-8539-4d7c-9944-5ac8a90de526" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(port_channel)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="00794f73-8fc3-4003-b1b3-cb4e98385f21" action="for" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>index in range(len(vlan_id)):</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="97aaad36-defc-41c3-b1d1-d0328b027410" action="if" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>vlan_id_type[index]==&quot;false&quot;:</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="bb4d1b2e-e292-4eba-904e-bda3c441538e" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>vlanId=vlan_id[index]</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="78c631a1-6ae1-4d63-b11f-cd452c141531" action="addPortToSingleVlan" session="arista_lepton" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>-port [port_channel] -vlan [vlanId]</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>retCode()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot; set native-vlan [vlanId] for port [port_channel] is ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot; set native-vlan is not ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="b01c1409-2900-479f-86a8-c1e3bcea79cf" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>vlan_id.remove(vlanId)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="f9d4d3ef-3888-4770-ab34-676fa5e76dd8" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>set allowed vlans to LAG port if needed</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="54b92bfe-4fb8-4441-b79f-47d6d899fd09" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(vlan_id)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="d5546f16-8419-4df0-846f-727c6b63d192" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>vlan_id != []:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="3fc8184e-164a-45a9-8080-e836e93966a0" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>vlanIds=&quot;,&quot;.join(vlan_id)</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="f9f58abb-ad29-43fc-b7fc-f78e07498abe" action="addPortToAllowedVlans" session="arista_lepton" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>-port [port_channel] -vlan [vlanIds]</body>
                                                                                                                                    </command>
                                                                                                                                    <postProcessing>
                                                                                                                                        <analysisRules>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                        <query>retCode()</query>
                                                                                                                                                    </extractorProperties>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="assert">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                        <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                        <actionsWhenTrue>
                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                    <message>For &quot;[conn_lepton_device_name]&quot; set allowed vlans [vlanIds] for port [port_channel] is ok</message>
                                                                                                                                                                </actionProperties>
                                                                                                                                                            </item>
                                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                            </item>
                                                                                                                                                        </actionsWhenTrue>
                                                                                                                                                        <actionsWhenFalse>
                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                    <message>For &quot;[conn_lepton_device_name]&quot; set allowed vlans is not ok</message>
                                                                                                                                                                </actionProperties>
                                                                                                                                                            </item>
                                                                                                                                                            <item actionId="FailTest">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                            </item>
                                                                                                                                                        </actionsWhenFalse>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                        </analysisRules>
                                                                                                                                    </postProcessing>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="4d126635-5185-4777-bd0c-4269d4992628" action="else" useFieldsInCommand="false">
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="898ee8f3-9d95-47a3-b2de-74f4fb542a43" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>Insert steps here for when the expression evaluates to false</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="e4e010ae-c553-4f57-b5db-1baf0e31120d" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>discover and update the LAG port </body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="cfc1eda0-b819-474c-a3f4-1eb8cb6786f4" action="POST" session="velocity">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_lepton_device_id]/action?type=discover</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="message">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                <message> Waiting for discover operation on [conn_lepton_device_name]</message>
                                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[conn_lepton_device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                                                                    <memberClasses>
                                                                                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                                                                    </memberClasses>
                                                                                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                                                                </httpHeader>
                                                                                                                            </applicationProperties>
                                                                                                                        </item>
                                                                                                                        <item guid="a4b7cb3a-c445-41b8-8c31-4d8939c5b663" action="sleep">
                                                                                                                            <command>
                                                                                                                                <body>20</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="3643ae82-02f0-4505-982a-3914451f588f" action="consoleLogin" session="arista_lepton" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>-username [conn_lepton_device_username] -password [conn_lepton_device_password]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>retCode()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                            <message>--- console login not ok; fail test</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                        <item guid="bf2af9b8-bed2-47bc-96a4-0e75af46c9b2" action="command" session="arista_lepton">
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>promptName()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>str(value) == &quot;prompt1&quot; or str(value) ==&quot;prompt4&quot;</expression>
                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot;: discover operation was successfully</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="RepeatStep">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                                                                <promptProperties>
                                                                                                                                    <stepPrompts>
                                                                                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">* login:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt2">
                                                                                                                                            <Content>Password:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt3" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                                                                            <Content sub="true">*&gt;</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt4" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">*#</Content>
                                                                                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt5" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">*(*)#</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt6"/>
                                                                                                                                    </stepPrompts>
                                                                                                                                </promptProperties>
                                                                                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                </completionProperties>
                                                                                                                            </applicationProperties>
                                                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="50656243-95c5-47d3-8b70-d18f33093b37" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>console exit</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="ac5d3f63-f5c9-4a5a-b210-cc9ba1b176e7" action="consoleExit" session="arista_lepton" useFieldsInCommand="false">
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="0e4f65b0-193f-46c9-a3f5-a5666b854394" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>close session</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="0930a49c-9455-4dd8-8d2b-274807fc50f0" action="close" session="lepton">
                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="a1d9c026-c046-4423-a8fe-372e6473bbfa" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Reinit dicts</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="b803ee3d-4ff2-4695-a9ea-38eb20c8f19c" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>device_ports_per_lag=[]</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="0b18d9e3-d514-4cf2-b9ab-bcf05aaebfba" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>conn_device_ports_per_lag=[]</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="61f19a3a-dbda-40b0-a7e2-8aa1a5e3fe22" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>device_ports=[]</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="83510587-45d9-4464-8cec-1aa675d79f34" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Discover and update the LAG ports</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="a1d4d086-9222-4a0c-9f82-bbfe7e5582c2" action="open" session="fortigateDiscover" useFieldsInCommand="false">
                                                            <command>
                                                                <body>project://Fortigate_console/session_profiles/console.ffsp</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                    <completionProperties>
                                                                        <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                    </completionProperties>
                                                                </stepProperties>
                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                    <ipAddress inherit="false">[device_console_ip]</ipAddress>
                                                                    <port inherit="false">[device_console]</port>
                                                                </sessionProperties>
                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                            </applicationProperties>
                                                        </item>
                                                        <item guid="16066059-222d-479b-b9e8-29148c45d683" action="POST" session="velocity">
                                                            <command>
                                                                <body>/velocity/api/inventory/v16/device/[device_id]/action?type=discover</body>
                                                            </command>
                                                            <postProcessing>
                                                                <analysisRules>
                                                                    <item>
                                                                        <extractorInfo extractorType="none">
                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="message">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                <message> Waiting for discover operation on [device]</message>
                                                                                <tag sub="false" defaultValue=""/>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                </analysisRules>
                                                            </postProcessing>
                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                    <memberClasses>
                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                    </memberClasses>
                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                </httpHeader>
                                                            </applicationProperties>
                                                        </item>
                                                        <item guid="5b52782e-b184-478f-8e2b-682015bc175a" action="sleep">
                                                            <command>
                                                                <body>10</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="2f01a70b-1448-4447-b6af-82a0adfd71ee" action="command" session="fortigateDiscover">
                                                            <postProcessing>
                                                                <analysisRules>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                <query>promptName()</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="assert">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                <expression>str(value) == &quot;prompt1&quot; </expression>
                                                                                <actionsWhenTrue>
                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                            <message>For &quot;[device]&quot;: discover operation was successfully</message>
                                                                                        </actionProperties>
                                                                                    </item>
                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                    </item>
                                                                                </actionsWhenTrue>
                                                                                <actionsWhenFalse>
                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                        </actionProperties>
                                                                                    </item>
                                                                                    <item actionId="RepeatStep">
                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                    </item>
                                                                                </actionsWhenFalse>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                </analysisRules>
                                                            </postProcessing>
                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                <promptProperties>
                                                                    <stepPrompts>
                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                            <Content sub="true">* login:</Content>
                                                                        </item>
                                                                        <item name="prompt2" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                            <Content sub="true">* #</Content>
                                                                        </item>
                                                                        <item name="prompt3">
                                                                            <Content>Password:</Content>
                                                                        </item>
                                                                        <item name="prompt4">
                                                                            <Content>--More-- </Content>
                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                        </item>
                                                                        <item name="prompt5">
                                                                            <Content>Do you want to continue? (y/n)</Content>
                                                                        </item>
                                                                        <item name="prompt6" MatchMethod="WILDCARD">
                                                                            <Content sub="true">* (*) #</Content>
                                                                        </item>
                                                                        <item name="prompt7" MatchMethod="WILDCARD">
                                                                            <Content sub="true">*:</Content>
                                                                        </item>
                                                                        <item name="prompt8" MatchMethod="WILDCARD">
                                                                            <Content sub="true">*</Content>
                                                                        </item>
                                                                    </stepPrompts>
                                                                </promptProperties>
                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                </completionProperties>
                                                            </applicationProperties>
                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                        </item>
                                                        <item guid="ee14f4cf-6e69-4d09-8862-a1a1faf5f961" action="close" session="fortigateDiscover">
                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="0f6eafb5-208c-4251-bead-cc7ecd0eb828" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Reinit dicts</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="63f3d852-25f3-4eb5-ba26-e10247f92817" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_lag_ports=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="3ca6032b-3a80-4b0e-bd1c-6feadb6e5863" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>conn_port_names=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="fd679b42-fb94-4476-857b-bd6cad13da1b" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>conn_device_names=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="e5263bb6-1b8f-4d85-8016-1d99067aad72" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_topology_port_ids=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="098d0dca-eef5-4a11-8a77-81b26da0815b" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_ports=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="76b4bf14-97e1-4618-9131-05a19e363b80" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_name_port=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="4be4c92d-4f9a-4718-99cf-459857673baf" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_ports_per_lag=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="d6bbace1-5f68-46f6-9830-8185ac7dda87" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>conn_device_ports_per_lag=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="54b09be7-f2fa-47a4-8c3e-e0a87286b75e" action="else" useFieldsInCommand="false">
                            <nestedSteps>
                                <item guid="5e7e4588-d6e7-4a3f-8c87-8cd5329480d2" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>skip operation</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="2a63ded5-419f-4a0f-9e2f-affb00afc96b" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>print(&quot;There are no LAG connections in topology&quot;)</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="none">
                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="message">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                <message> For reservation &quot;[reservationId]&quot; checking LAG connections</message>
                                                                <tag sub="false" defaultValue=""/>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>isEmpty()</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="assert">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                <expression>str(value) == &quot;false&quot; </expression>
                                                                <actionsWhenTrue>
                                                                    <item actionId="DeclareExecutionIssue">
                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                            <message>--- There are no LAG connections in topology, skip operation ...</message>
                                                                        </actionProperties>
                                                                    </item>
                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                    </item>
                                                                </actionsWhenTrue>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="711f3012-dba2-48d7-9134-649eeb1c1856" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Close velocity session</body>
                    </command>
                    <nestedSteps>
                        <item guid="73572d45-0092-470b-8c67-143a61cf5e08" action="close" session="velocity">
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
        </item>
    </procedures>
</testCase>
