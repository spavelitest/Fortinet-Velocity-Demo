<?xml version="1.0"?>
<testCase version="8.7.0.202112151246">
    <general>
        <language>Python</language>
    </general>
    <procedures>
        <item name="main">
            <steps>
                <item guid="a98203a8-5474-43c1-ace5-00ccfac1cd6b" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Initialization</body>
                    </command>
                    <nestedSteps>
                        <item guid="0f639de0-c3c0-47cb-b70c-f019af99ac90" action="eval" useFieldsInCommand="false">
                            <command>
                                <body>reservationId = velocity(&quot;reservationId&quot;); print(reservationId)</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="none">
                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                        </extractorInfo>
                                        <processorInfo ruleType="message">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                <message>Found reservationId: &quot;[reservationId]&quot;</message>
                                                <tag sub="false" defaultValue=""/>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="fcef4de5-a80b-4b9d-937f-2bf4d418dbf0" action="eval" skip="true" useFieldsInCommand="false">
                            <command>
                                <body>reservationId = &quot;7dca4558-f7d3-48c2-8c96-841554852dc4&quot;</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="none">
                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                        </extractorInfo>
                                        <processorInfo ruleType="message">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                <message>Found reservationId: &quot;[reservationId]&quot;</message>
                                                <tag sub="false" defaultValue=""/>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="ef4e0592-5da2-4d3f-bba5-cada5070dfa1" action="eval" skip="true" useFieldsInCommand="false">
                            <command>
                                <body>reservationId = &quot;92f986ab-9b1b-4814-8d7f-1da61cd19fd8&quot;</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="4e7cd205-8a6a-42a0-be2d-6e57b38cc7dc" action="comment" useFieldsInCommand="false">
                            <command>
                                <body>Init dicts</body>
                            </command>
                            <nestedSteps>
                                <item guid="86c0f35f-1aec-4622-8984-d7c0fc44d6f2" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>link_type={}</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="2890d6ad-74ff-4c3d-b0b6-de57e8901949" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>LAG_port_ids=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="94773a75-2413-4463-a832-364d36a45dc6" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>LAG_FGT_port_ids=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="e7f68f42-f45a-460b-90a2-4228816082cf" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>LAG_CN_port_ids=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="ddb056d8-f981-4b59-aa84-8505de4c9cc4" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_names=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="fc4baaee-9e76-475c-913d-e6382bef86a5" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_lag_ports=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="7def28d8-5f00-4f6f-9410-754c471a269a" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_lag_FGT_ports=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="543364e8-79b5-4dab-ba13-cbb459f097a7" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_lag_CN_ports=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="e6c72b0b-beae-4a0f-b809-a0176c965258" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>conn_port_names=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="16e69ea7-c490-4061-88b1-30e26838a9fd" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>conn_port_FGT_names=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="788fc7bb-5714-4adb-ad96-aedc77af853e" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>conn_port_CN_names=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="26e045cd-ff55-4cbf-9d54-4fc7e59e8157" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>conn_device_names=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="c15d8aea-f812-40b3-a07c-17231fea6b90" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>conn_device_FGT_names=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="501edc08-dea7-41b9-8b9b-5fd1db0252e6" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>conn_device_CN_names=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="2eb8915d-c200-4ae8-be5c-2827a9b00f26" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_topology_port_ids=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="7ad4a018-ed51-46e8-baa4-afdb8166d307" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_ports=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="eb6f7b39-388c-4a79-ae9c-327f932b72d9" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_FGT_ports=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="e7ff03cb-e7a4-44d4-910f-b322d85c28d3" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_CN_ports=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="225d1e05-7eb7-437a-b074-3f896a392f08" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_name_port=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="8ff2330b-c420-4223-b792-2f6bea98fb7e" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_FGT_name_port=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="1ac6bcc1-f73a-417f-a411-f44017b00b71" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_CN_name_port=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="1cac43e7-4561-416c-8b18-fd198a64f77c" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_ports_per_lag=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="a1a95204-39ab-4f44-bea2-a9618e8b0d3a" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>conn_device_ports_per_lag=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="b5152141-cd07-4572-bf6a-d11fdec04092" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_FGT_ports_per_lag=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="16484b27-6782-434a-aa5d-706b2bf6f906" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>device_CN_ports_per_lag=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="faa91005-e9d8-4013-b56d-5253b40a7eee" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>conn_device_FGT_ports_per_lag=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="bfb935cd-71cd-445b-a57a-322955e0e0ae" action="eval" useFieldsInCommand="false">
                                    <command>
                                        <body>conn_device_CN_ports_per_lag=[]</body>
                                    </command>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="83574b84-5a25-4444-9202-7f68e0ae02cf" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Open sessions</body>
                    </command>
                    <nestedSteps>
                        <item guid="6160ebb1-d02a-4c07-aeb0-9edace302da9" action="open" session="velocity" useFieldsInCommand="false">
                            <command>
                                <body>application:com.fnfr.itest.applications.webservices.restful</body>
                            </command>
                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                <stepProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                <sessionProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulSessionProperties" url="https://10.210.107.10" url.inherit="false" version="2" version.inherit="false">
                                    <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" authenticationType="Basic" authenticationType.inherit="false" user="superadmin" user.inherit="false" password.masked="false" password="superadmin" password.inherit="false" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                </sessionProperties>
                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                            </applicationProperties>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="2a810bc8-a8b8-4726-acb1-424dad5256b0" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Check LAG connection</body>
                    </command>
                    <nestedSteps>
                        <item guid="a72fad4c-c498-41a1-8d0d-4eb4e9ab9ddb" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                            <command>
                                <body>/velocity/api/reservation/v18/reservation/[reservationId]/topology</body>
                            </command>
                            <postProcessing>
                                <analysisRules>
                                    <item>
                                        <extractorInfo extractorType="query">
                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                <query>mapped/Xml/tbml/body/connectivity/link[*]/property[2]</query>
                                            </extractorProperties>
                                        </extractorInfo>
                                        <processorInfo ruleType="store">
                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                <storageLocation>LAG_option</storageLocation>
                                                <storeInAList>true</storeInAList>
                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                            </ruleProperties>
                                        </processorInfo>
                                    </item>
                                </analysisRules>
                            </postProcessing>
                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/topology" action.inherit="false">
                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                    <memberClasses>
                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                    </memberClasses>
                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="application/tbml" header.inherit="false"/>
                                </httpHeader>
                            </applicationProperties>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="73eaee68-3af5-4ac8-b55c-57cdefb9c9af" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>LAG or skip operation</body>
                    </command>
                    <nestedSteps>
                        <item guid="5b37da1a-8208-4569-983e-c36e8d0cd6e9" action="if" useFieldsInCommand="false">
                            <command>
                                <body>&quot;LAG&quot; or &quot;LAG_FGT&quot; or &quot;LAG_SW&quot; in LAG_option:</body>
                            </command>
                            <nestedSteps>
                                <item guid="05dad45d-5cad-4c47-8ccd-13af3f6c0d80" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Determine LAG port ids</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="6d084358-81e8-4c23-9ca9-eb3437971bc3" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                            <command>
                                                <body>/velocity/api/reservation/v18/reservation/[reservationId]/topology</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>mapped/Xml/tbml/body/connectivity/link[*]/property[1]</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>Links</storageLocation>
                                                                <storeInAList>true</storeInAList>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>mapped/Xml/tbml/body/connectivity/link[*]/property[2]</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>Types</storageLocation>
                                                                <storeInAList>true</storeInAList>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/topology?limit=200" action.inherit="false">
                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                    <memberClasses>
                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                    </memberClasses>
                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="application/tbml" header.inherit="false"/>
                                                </httpHeader>
                                            </applicationProperties>
                                        </item>
                                        <item guid="eec7198a-bff0-4c01-a0e7-53b80e2e81f5" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>link_type=dict(zip(Links,Types))</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="f353f366-603d-4dd0-a385-8922a733fae4" action="for" useFieldsInCommand="false">
                                            <command>
                                                <body>item in link_type.keys():</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="c2361473-e1d9-43b5-81c9-566c6a8d8793" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>LAG: script runs on both devices; LAG_FGT: script runs just on fgts; LAG_CN: script runs just on connected devices (SWs)</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="34d7166c-fb2b-472b-bbfc-b14e2575b111" action="if" useFieldsInCommand="false">
                                                    <command>
                                                        <body>link_type[item] ==&quot;LAG&quot;:</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="adb5d03c-f531-4889-8a9a-9629c120f996" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                            <command>
                                                                <body>/velocity/api/reservation/v18/reservation/[reservationId]/topology</body>
                                                            </command>
                                                            <postProcessing>
                                                                <analysisRules>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                <query sub="true">mapped/Xml/tbml/body/connectivity/*\\[property=&quot;[item]&quot;]/*/@id</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="store">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                <storageLocation>LAG_ports_ids</storageLocation>
                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                </analysisRules>
                                                            </postProcessing>
                                                            <nestedSteps>
                                                                <item guid="6b6de8af-ffdf-4d69-a45f-7a49643e79a9" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>print(LAG_ports_ids)</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="9a381a51-13ea-453b-b15b-213588f568bd" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>LAG_port_ids.append(LAG_ports_ids)</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/topology" action.inherit="false">
                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                    <memberClasses>
                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                    </memberClasses>
                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="application/tbml" header.inherit="false"/>
                                                                </httpHeader>
                                                            </applicationProperties>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="894fe1ef-680d-406e-af90-4e7069df40c8" action="if" useFieldsInCommand="false">
                                                    <command>
                                                        <body>link_type[item] ==&quot;LAG_FGT&quot;:</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="2e9bf156-3319-4ccf-a2a6-259b50c41d9b" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                            <command>
                                                                <body>/velocity/api/reservation/v18/reservation/[reservationId]/topology</body>
                                                            </command>
                                                            <postProcessing>
                                                                <analysisRules>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                <query sub="true">mapped/Xml/tbml/body/connectivity/*\\[property=&quot;[item]&quot;]/*/@id</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="store">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                <storageLocation>LAG_FGT_ports_ids</storageLocation>
                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                </analysisRules>
                                                            </postProcessing>
                                                            <nestedSteps>
                                                                <item guid="fa76ac31-2006-4488-a9bf-96c7b66853af" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>print(LAG_FGT_ports_ids)</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="417dcafb-5fb0-4768-a634-077530d57d35" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>LAG_FGT_port_ids.append(LAG_FGT_ports_ids)</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/topology" action.inherit="false">
                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                    <memberClasses>
                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                    </memberClasses>
                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="application/tbml" header.inherit="false"/>
                                                                </httpHeader>
                                                            </applicationProperties>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="16b8ec18-a542-4434-abb9-70cd2c7627ba" action="if" useFieldsInCommand="false">
                                                    <command>
                                                        <body>link_type[item] ==&quot;LAG_SW&quot;:</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="04b85411-5e44-4e54-81b2-e916c0c11389" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                            <command>
                                                                <body>/velocity/api/reservation/v18/reservation/[reservationId]/topology</body>
                                                            </command>
                                                            <postProcessing>
                                                                <analysisRules>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                <query sub="true">mapped/Xml/tbml/body/connectivity/*\\[property=&quot;[item]&quot;]/*/@id</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="store">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                <storageLocation>LAG_CN_ports_ids</storageLocation>
                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                </analysisRules>
                                                            </postProcessing>
                                                            <nestedSteps>
                                                                <item guid="9ee70a48-941b-45ed-94f3-522ccb9029fc" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>print(LAG_CN_ports_ids)</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                                <item guid="913e350c-fc39-4169-a812-3a4e35d16ec8" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>LAG_CN_port_ids.append(LAG_CN_ports_ids)</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/topology" action.inherit="false">
                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                    <memberClasses>
                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                    </memberClasses>
                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry" header="application/tbml" header.inherit="false"/>
                                                                </httpHeader>
                                                            </applicationProperties>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="79a16de7-d592-4e9c-b109-61f44e9715b3" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>print(LAG_FGT_port_ids)</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="f3f53bbe-7097-4622-b231-aacbbc8b0c7a" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>print(LAG_port_ids)</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="fdf07f07-9713-4d6f-8bb8-2c33b91ae6ad" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>print(LAG_CN_port_ids)</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="68e81532-8bf0-4a47-9cd9-e6128b631849" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Get the devices name from Velocity</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="2e22cf7b-fa72-4a55-8fe9-e902a7949fd8" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                            <command>
                                                <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>mapped/Json/items/*[type = &quot;DEVICE&quot;]/name</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="store">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                <storageLocation>device_name</storageLocation>
                                                                <storeInAList>true</storeInAList>
                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                        </item>
                                        <item guid="fe660923-e71f-4387-bb43-e38c612b5a5d" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>print(device_name)</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="ef44cae4-97bc-44db-b384-9c2726e900ea" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Filter devices in order to find fortigate firewalls</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="b6ae63e0-bca4-48fa-84da-41b20ab58b0f" action="for" useFieldsInCommand="false">
                                            <command>
                                                <body>device in device_name:</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="fa26b401-c25b-4704-bad9-4fb639c11bfa" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                    <command>
                                                        <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]</body>
                                                    </command>
                                                    <postProcessing>
                                                        <analysisRules>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                        <query>mapped/Json/devices/item/id</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>device_id</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                        <query>mapped/Json/devices/item/properties/item[name = &apos;Console&apos;]/value</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>device_console_ip_addr</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                        <query>mapped/Json/devices/item/properties/item[name = &apos;Console Port&apos;]/value</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>device_console_port</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                        <query>mapped/Json/devices/item/properties/item[name = &apos;username&apos;]/value</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>device_username</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                        <query>mapped/Json/devices/item/properties/item[name = &apos;password&apos;]/value</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>device_password</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                        <query>mapped/Json/devices/item/templateId</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>template_id</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                        </analysisRules>
                                                    </postProcessing>
                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]" action.inherit="false"/>
                                                </item>
                                                <item guid="3a6bd56a-0f82-4bab-a964-e1f45fb79086" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                    <command>
                                                        <body>/velocity/api/inventory/v16/template/[template_id]</body>
                                                    </command>
                                                    <postProcessing>
                                                        <analysisRules>
                                                            <item>
                                                                <extractorInfo extractorType="query">
                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                        <query>mapped/Json/name</query>
                                                                    </extractorProperties>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="store">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                        <storageLocation>template_name</storageLocation>
                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                        </analysisRules>
                                                    </postProcessing>
                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/template/[template_id]" action.inherit="false"/>
                                                </item>
                                                <item guid="f601c313-0db3-48b0-866d-8fee1894334b" action="eval" useFieldsInCommand="false">
                                                    <command>
                                                        <body>print(template_name)</body>
                                                    </command>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="c2809006-75c4-4356-90eb-83af8d872936" action="if" useFieldsInCommand="false">
                                                    <command>
                                                        <body>template_name == &quot;Fortigate Firewall&quot;:</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="55a6d5bd-60db-4e7f-b828-63505e1b6b33" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_names.append(device)</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="7e733e09-b108-4945-be6a-0719ccf98dd8" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>device_name=device_names.copy()</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                        <item guid="39070aa7-f262-42f0-9e21-6f328613a9b7" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>print(device_name)</body>
                                            </command>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                                <item guid="b2ece4ba-eba3-439c-98bc-e45420b94255" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>Config LAG on devices</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="5942d73a-9a2d-41c0-8cf9-8b5df97ffb45" action="for" useFieldsInCommand="false">
                                            <command>
                                                <body>device in device_name:</body>
                                            </command>
                                            <nestedSteps>
                                                <item guid="7ab20387-0c24-4ef0-80fb-06021f271d76" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Check LAG connection on each device - message</body>
                                                    </command>
                                                    <postProcessing>
                                                        <analysisRules>
                                                            <item>
                                                                <extractorInfo extractorType="none">
                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                </extractorInfo>
                                                                <processorInfo ruleType="message">
                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                        <message>---Checking LAG connections on device &quot;[device]&quot;...</message>
                                                                        <tag sub="false" defaultValue=""/>
                                                                    </ruleProperties>
                                                                </processorInfo>
                                                            </item>
                                                        </analysisRules>
                                                    </postProcessing>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="248dbf72-9b26-42e6-9266-1925b068dd25" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Determine device ports from reservation</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="922800e0-67b7-4ad9-83ba-8e477c6a8eec" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                            <command>
                                                                <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]</body>
                                                            </command>
                                                            <postProcessing>
                                                                <analysisRules>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                <query>mapped/Json/devices/item/id</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="store">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                <storageLocation>device_id</storageLocation>
                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console&apos;]/value</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="store">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                <storageLocation>device_console_ip</storageLocation>
                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console Port&apos;]/value</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="store">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                <storageLocation>device_console</storageLocation>
                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                </analysisRules>
                                                            </postProcessing>
                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]" action.inherit="false"/>
                                                        </item>
                                                        <item guid="f5f1dd92-976c-4d07-817f-27419793b6f8" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                            <command>
                                                                <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                                            </command>
                                                            <postProcessing>
                                                                <analysisRules>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                <query sub="true">mapped/Json/items/*\\[inventoryParentResourceId=&quot;[device_id]&quot;]/name</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="store">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                <storageLocation>device_reservation_ports</storageLocation>
                                                                                <storeInAList>true</storeInAList>
                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                    <item>
                                                                        <extractorInfo extractorType="query">
                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                <query sub="true">mapped/Json/items/*\\[inventoryParentResourceId=&quot;[device_id]&quot;]/inventoryResourceId</query>
                                                                            </extractorProperties>
                                                                        </extractorInfo>
                                                                        <processorInfo ruleType="store">
                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                <storageLocation>device_inventory_ports</storageLocation>
                                                                                <storeInAList>true</storeInAList>
                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                            </ruleProperties>
                                                                        </processorInfo>
                                                                    </item>
                                                                </analysisRules>
                                                            </postProcessing>
                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                                        </item>
                                                        <item guid="a70dbc1e-2596-458b-aef5-ee342433a325" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>print(device_reservation_ports)</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="1a6f20f1-530c-451c-8bc1-b8477d364f10" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>print(device_inventory_ports)</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="44460a8a-b9fe-4aae-b631-b75b40d4fd2b" action="for" useFieldsInCommand="false">
                                                            <command>
                                                                <body>port_name in device_inventory_ports:</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="8e3e32da-194b-4ab4-a87d-8bb6070f1a1a" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                    <command>
                                                                        <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                                                    </command>
                                                                    <postProcessing>
                                                                        <analysisRules>
                                                                            <item>
                                                                                <extractorInfo extractorType="query">
                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                        <query sub="true">mapped/Json/items/*\\[inventoryResourceId=&quot;[port_name]&quot;]/topologyResourceId</query>
                                                                                    </extractorProperties>
                                                                                </extractorInfo>
                                                                                <processorInfo ruleType="store">
                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                        <storageLocation>device_topology_port_id</storageLocation>
                                                                                        <storeInAList>true</storeInAList>
                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                    </ruleProperties>
                                                                                </processorInfo>
                                                                            </item>
                                                                        </analysisRules>
                                                                    </postProcessing>
                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                                                </item>
                                                                <item guid="a275f784-7bd3-4fdf-a862-133a20a3e848" action="eval" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>device_topology_port_ids.append(device_topology_port_id)</body>
                                                                    </command>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="80c3b417-6dc0-4437-a250-d29925e82663" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>print(device_topology_port_ids)</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="0e148d79-5e1c-4bd7-ad81-e38e9ec16554" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Determine device ports from LAG types and config LAG</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="b6c179a2-4f00-432a-a577-c322639f2681" action="for" useFieldsInCommand="false">
                                                            <command>
                                                                <body>item in device_topology_port_ids:</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="4a37ad98-197f-48dc-a7ff-764ba1016114" action="for" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>links in LAG_port_ids:</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="1f088d6f-78c0-400c-b88d-8717be9ae698" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(links[1])</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="1d2c2e93-2189-4247-942d-ffeee2e57f18" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(links[0])</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="233f850b-bdc1-413a-bcd5-380e0643d6f4" action="if" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>len(item)==2:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="b9d2f23c-675e-4250-a2c5-3f2d235179e6" action="if" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>item[0]==links[0] or item[0]==links[1] or item[1]==links[0] or item[1]==links[1]:</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="6eae9b77-0f19-4483-8fbf-2939253f7ab1" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>device_lag_ports.append(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="31be876b-26f7-456e-b1ba-1c87c2acca51" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="3d0de2bf-7e5c-4590-b475-f9236798395d" action="elif" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>len(item)==1:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="11991a89-25de-4494-ad48-0fe781c57f53" action="if" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>item[0]==links[0] or item[0]==links[1]:</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="4e8d5ce8-24de-4bbd-89d1-317514d69321" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>device_lag_ports.append(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="84ccc11e-a5b3-467c-b24d-97f703a7c947" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="b9cb560d-ec85-4876-b057-b1baff7c94c8" action="for" useFieldsInCommand="false">
                                                            <command>
                                                                <body>item in device_topology_port_ids:</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="5bc9679f-63dd-4335-b10a-ae988574a085" action="for" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>links in LAG_FGT_port_ids:</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="16f36cdc-defd-40ec-86f8-0cfc45063be5" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(links[1])</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="c36199ae-d1a2-4417-b804-4183ba72c395" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(links[0])</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="9b6b16b1-bdf3-4b23-8983-b6d02236b1a1" action="if" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>len(item)==2:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="245ba47f-a037-4ea6-90b4-4cefe20b7a39" action="if" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>item[0]==links[0] or item[0]==links[1] or item[1]==links[0] or item[1]==links[1]:</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="fab9b5eb-ba78-4d2c-8018-3271787851cc" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>device_lag_FGT_ports.append(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="a59a9c34-0e10-4641-aa2c-bc8201e4b688" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="b4a06b95-3309-4696-b284-ae44054e3c2a" action="elif" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>len(item)==1:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="b82d1f17-12df-4ffc-99e7-f3e8a9dbce10" action="if" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>item[0]==links[0] or item[0]==links[1]:</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="bb58b757-9d9e-4060-914f-fbbf50156f8e" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>device_lag_FGT_ports.append(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="b045f08f-d2d1-4246-9d25-100b0070e31b" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="9962d385-efa3-4e16-9242-52c09ed07ccc" action="for" useFieldsInCommand="false">
                                                            <command>
                                                                <body>item in device_topology_port_ids:</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="61ea6a53-05da-4d92-8152-f6522d26ebd0" action="for" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>links in LAG_CN_port_ids:</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="cb906989-9989-4329-89aa-bfdbd6ed7a1e" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(links[1])</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="f2bb19cc-3429-480d-a491-7b8e327f5037" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(links[0])</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="55429800-2513-4945-b96a-163928867783" action="if" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>len(item)==2:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="4778e781-7927-421b-bc41-14e45ee31c2b" action="if" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>item[0]==links[0] or item[0]==links[1] or item[1]==links[0] or item[1]==links[1]:</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="26b1113f-3174-4352-8670-1df9f0b41103" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>device_lag_CN_ports.append(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="8549b7c9-23ad-4812-928e-ee1da88d59cd" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="8d9c28a2-d28e-4288-a866-fa9f8251ea0e" action="elif" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>len(item)==1:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="a08fcacd-1d30-449c-a2e5-9cf6868220d5" action="if" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>item[0]==links[0] or item[0]==links[1]:</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="3953b3ff-cc90-43ea-8949-7e5583e24833" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>device_lag_CN_ports.append(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="cd9dc808-d11a-4c1f-abf6-32bbd1d0e9ed" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(item)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="1b005fa9-4e02-45d8-ab1f-8d302afed1b3" action="if" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_lag_ports == [] and device_lag_FGT_ports ==[] and device_lag_CN_ports ==[]:</body>
                                                            </command>
                                                            <nestedSteps>
                                                                <item guid="e5d051a9-4ae2-4733-9cd9-5ef7a4607570" action="comment" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>skip operation on device</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="19b3d450-ea11-4f29-abef-efe21b66e8cf" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(&quot;Device has no LAG connections&quot;)</body>
                                                                            </command>
                                                                            <postProcessing>
                                                                                <analysisRules>
                                                                                    <item>
                                                                                        <extractorInfo extractorType="query">
                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                <query>isEmpty()</query>
                                                                                            </extractorProperties>
                                                                                        </extractorInfo>
                                                                                        <processorInfo ruleType="assert">
                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                <expression>value == &quot;false&quot; </expression>
                                                                                                <actionsWhenTrue>
                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                            <message>---For device [device] there are no LAG connections, skip operation ...</message>
                                                                                                        </actionProperties>
                                                                                                    </item>
                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                    </item>
                                                                                                </actionsWhenTrue>
                                                                                            </ruleProperties>
                                                                                        </processorInfo>
                                                                                    </item>
                                                                                </analysisRules>
                                                                            </postProcessing>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="58bc5879-fd48-41c0-9d73-5cbf166bac99" action="else" useFieldsInCommand="false">
                                                            <nestedSteps>
                                                                <item guid="6becf67c-1b41-4e93-bbcc-72c0f5dd9074" action="comment" useFieldsInCommand="false">
                                                                    <command>
                                                                        <body>Config LAG on devices per each LAG type</body>
                                                                    </command>
                                                                    <nestedSteps>
                                                                        <item guid="202f468f-de8f-40b8-a604-cf3fd3a8c447" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(device_lag_ports)</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="d002f59b-0565-44c6-8027-698a57a6477e" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(device_lag_FGT_ports)</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="a1b613ca-8c16-49c2-b210-88091f71da20" action="eval" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>print(device_lag_CN_ports)</body>
                                                                            </command>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="6f062884-3e55-434c-9bb5-cec648c86513" action="if" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>device_lag_ports != []:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="15fc75dc-35c2-46c3-a47f-f576d2b82b2a" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Enable Vdom Mode </body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="6651cf47-8ed5-41dd-bd39-7438d537910d" action="open" session="vdom">
                                                                                            <command>
                                                                                                <body>project://Fortigate_console/session_profiles/console.ffsp</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                    <completionProperties>
                                                                                                        <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                    </completionProperties>
                                                                                                </stepProperties>
                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                    <ipAddress inherit="false">[device_console_ip]</ipAddress>
                                                                                                    <port inherit="false">[device_console]</port>
                                                                                                </sessionProperties>
                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                            </applicationProperties>
                                                                                        </item>
                                                                                        <item guid="000e56db-a1d9-4ad0-b071-34c925a9caa2" action="consoleLogin" session="vdom" useFieldsInCommand="false">
                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                        </item>
                                                                                        <item guid="02d037fb-ea14-4621-9b2c-dca76cec5dbb" action="command" session="vdom">
                                                                                            <command>
                                                                                                <body>config global</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <storeResponseAt>vdom_output</storeResponseAt>
                                                                                                <storeResponseText>true</storeResponseText>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                        </item>
                                                                                        <item guid="68e0fc3f-cb77-4ee0-9eb7-061be59d9221" action="if" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>&quot;Command fail. Return code 1&quot; in vdom_output:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="588f7864-39a5-4c73-ac54-355179ed0ae5" action="enableVdom" session="vdom" useFieldsInCommand="false">
                                                                                                    <postProcessing>
                                                                                                        <analysisRules>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query>isEmpty()</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="assert">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                        <expression>str(value) == &quot;false&quot; </expression>
                                                                                                                        <actionsWhenTrue>
                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                    <message>For device [device] enable vdom operation was successful</message>
                                                                                                                                </actionProperties>
                                                                                                                            </item>
                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                            </item>
                                                                                                                        </actionsWhenTrue>
                                                                                                                        <actionsWhenFalse>
                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                    <message>Enable vdom operation was not successful</message>
                                                                                                                                </actionProperties>
                                                                                                                            </item>
                                                                                                                        </actionsWhenFalse>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                        </analysisRules>
                                                                                                    </postProcessing>
                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="18246b1c-1258-4137-b08a-1c6c610beea7" action="close" session="vdom" useFieldsInCommand="false">
                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="c3ea2b5d-a5f0-4342-9eed-031b22b6adea" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Find physical ports from LAG</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="95fd1860-38c4-4e18-8305-dd08e15999ee" action="for" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>port_item in device_lag_ports:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="37f916dd-ff1b-4f62-9c38-4aeec7166037" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>port_item=port_item[0]</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="bec6c483-b5f2-49df-b303-2810a5060865" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(port_item)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="e555c1d3-0822-4de3-8b21-7b6d0e183be3" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                    <command>
                                                                                                        <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                                                                                    </command>
                                                                                                    <postProcessing>
                                                                                                        <analysisRules>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query sub="true">mapped/Json/items/*\\[topologyResourceId=&quot;[port_item]&quot;]/name</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="store">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                        <storageLocation>device_port</storageLocation>
                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query sub="true">mapped/Json/items/*\\[topologyResourceId=&quot;[port_item]&quot;]/inventoryParentResourceId</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="store">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                        <storageLocation>parent_port_id</storageLocation>
                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                        </analysisRules>
                                                                                                    </postProcessing>
                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                                                                                </item>
                                                                                                <item guid="f473fd26-2855-4489-80c8-6830a1a1511a" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(parent_port_id, device_id)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="40c70895-dda5-4f7d-b247-e0580a439345" action="if" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>device_id == parent_port_id:</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="84989f3f-d998-4760-9d5c-f31257e36545" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>device_ports.append(device_port)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="81e76e7e-924a-448a-ae95-c59e41710e06" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(device_ports)</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="none">
                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="message">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                <message> For device &quot;[device]&quot; ports [device_ports] are included in LAG connections</message>
                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="94b700b2-72d5-4be9-ac82-ce0ee2523086" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Determine device ports included in LAG on neighbor-device</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="437abd28-4df3-463e-9ec3-dc9d8a098abf" action="for" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>device_port in device_ports:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="3d1f7d6a-391d-4fd3-9bbe-bfb4c0bb3f2d" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                    <command>
                                                                                                        <body>/velocity/api/inventory/v16/device/[device_id]/ports?limit=200</body>
                                                                                                    </command>
                                                                                                    <postProcessing>
                                                                                                        <analysisRules>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query sub="true">mapped/Json/ports/*\\[name=&quot;[device_port]&quot;]/connectedPortName</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="store">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                        <storageLocation>conn_port_name</storageLocation>
                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query sub="true">mapped/Json/ports/*\\[name=&quot;[device_port]&quot;]/connectedPortParentName</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="store">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                        <storageLocation>conn_device_name</storageLocation>
                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                        </analysisRules>
                                                                                                    </postProcessing>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="6682c835-3858-47f3-86c8-84dd1eeb07e1" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_port_names.append(conn_port_name)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="3896a19d-cbca-49dd-abf8-4195ad63b52c" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_device_names.append(conn_device_name)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="ab95ade2-e9c6-4b40-8ad3-15b2b2418e8a" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>string=device_port+&quot; : &quot;+conn_port_name +&quot; : &quot;+ conn_device_name</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="226c02c7-2c79-490f-ace9-23d2b37594d7" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>device_name_port.append(string)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="2728efc8-a41f-474a-be2a-8143c8ca4366" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>string=&quot;&quot;</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/ports?limit=200" action.inherit="false"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="241cd918-2b07-443a-a176-6f0b9d316902" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Check device for multiple LAG connections and config LAG </body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="2c0514a0-1540-4ce7-8868-938cd149f444" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(conn_port_names)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="d284fd61-f04c-47c4-a82f-2465d7d0ac08" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(conn_device_names)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="7dc0c65d-958e-4276-8bfb-13818d0d84ad" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>conn_device_names=list(set(conn_device_names))</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="97d58fea-bae8-4e2c-8ae1-dd4b63d73902" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(device_name_port)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="5424f662-3a08-4a6a-acb0-f1a6e6c94faa" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(conn_device_names)</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="none">
                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="message">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                <message> For device &quot;[device]&quot; found [len(conn_device_names)] LAG connections</message>
                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="ba162413-48a1-4d85-8ef2-4d67fea9a956" action="for" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>conn_device_name in conn_device_names:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="e181be1c-e606-4cb1-aa61-1091f1d1ecf9" action="for" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>element in device_name_port:</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="3c26797b-279d-4e8f-837d-e79c0443f88b" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>print(conn_device_name)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="990280e8-ac5d-4d10-a30f-ef53d7babdde" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>print(element.split(&quot;:&quot;)[2].strip())</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="8c333954-4fe9-4475-8e66-cf02f72e73df" action="if" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_device_name == element.split(&quot;:&quot;)[2].strip():</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="3a126c93-2a7b-4ef6-824c-ffad246c1d55" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>device_ports_per_lag.append(element.split(&quot;:&quot;)[0].strip())</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="c4de5504-88ef-46d7-ac80-ee2a15680969" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>conn_device_ports_per_lag.append(element.split(&quot;:&quot;)[1].strip())</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="f18110fc-704e-4880-80ac-b7cb6a6476c5" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(device_ports_per_lag)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="701249fe-461e-4d9b-ae8d-c3a293e41471" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(conn_device_ports_per_lag)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="73f4a53d-a3ec-4ed5-b71c-6d3f0170805d" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>Get device details</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="6675e354-b532-41ac-b5b2-6736163e62c0" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                            <command>
                                                                                                                <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>device_console_ip_addr</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console Port&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>device_console_port</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;username&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>device_username</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;password&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>device_password</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]" action.inherit="false"/>
                                                                                                        </item>
                                                                                                        <item guid="dbf5d872-0061-4d64-91e0-dc9f62666762" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                            <command>
                                                                                                                <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[conn_device_name]</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;ipAddress&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_device_ipAddress</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_device_console_ip_addr</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console Port&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_device_console_port</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;username&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_device_username</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;password&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_device_password</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>mapped/Json/devices/item/id</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_device_id</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>mapped/Json/devices/item/templateId</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_template_id</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[conn_device_name]" action.inherit="false"/>
                                                                                                        </item>
                                                                                                        <item guid="96b75b92-9469-4330-bffc-86d61cae9d6b" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                            <command>
                                                                                                                <body>/velocity/api/inventory/v16/template/[conn_template_id]</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>mapped/Json/name</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_template_name</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/template/[conn_template_id]" action.inherit="false"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="a8513ce2-6b0e-4aa1-8285-5936ee524a05" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>Config LAG on device</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="9b2dc4ee-a094-40fd-8077-c0ddf05d9f6b" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>open session</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="0ae8c596-6958-448c-bf38-d654aad6cb39" action="open" session="fortigate">
                                                                                                                    <command>
                                                                                                                        <body>project://Fortigate_console/session_profiles/console.ffsp</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                        <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                            <completionProperties>
                                                                                                                                <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                            </completionProperties>
                                                                                                                        </stepProperties>
                                                                                                                        <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                            <ipAddress inherit="false">[device_console_ip_addr]</ipAddress>
                                                                                                                            <port inherit="false">[device_console_port]</port>
                                                                                                                        </sessionProperties>
                                                                                                                        <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                    </applicationProperties>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="d75b7a4e-e62c-4245-8379-a821502a9f33" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>set parameters based on name convention</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="38fd0f6c-be3a-47bc-b777-11413b32beee" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>name=&quot;DATA&quot;+&quot;_&quot;+&quot;_&quot;.join(device_ports_per_lag).replace(&quot;port&quot;,&quot;&quot;)</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="f2737360-0b62-4edd-bb7f-53bc727ea91d" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>name=name[:10]</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="d0b5915e-96b2-4623-a62c-5078d986b64f" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>print(name)</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="6c89da21-afae-4e8e-9a4d-b836609d2515" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>ports=&quot; &quot;.join(device_ports_per_lag)</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="056c169d-4c61-4c90-a515-0737a548a3c9" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>print(ports)</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="9d9e21f3-a748-4868-bfe6-848e20b4b49a" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>lag=&quot;LAG&quot;+&quot;_&quot;+&quot;_&quot;.join(device_ports_per_lag).replace(&quot;port&quot;,&quot;&quot;)</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="9e07bfea-c5bd-4dcc-bd22-908e02c0e247" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>lag=lag[:13]</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="c0fb74d8-f9f6-4f15-950e-c379159939aa" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>print(lag)</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="da4351f7-4ab5-4de1-8eae-66cadb0195ff" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>console login and create vdom</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="fe6f20ea-9452-4e67-9b7b-4eb6742ee366" action="configureVdom" session="fortigate" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>-name [name]</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="47e3817e-42e7-48a9-a98f-0ec10e005591" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>assign interfaces to vdom</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="9ed48e44-8248-43ea-8eab-16cc2405e6a1" action="for" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>port in device_ports_per_lag:</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="32a2d2f2-7ee9-4635-8c0f-9c54f4a6371d" action="assignInterfacesToVdom" session="fortigate" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>-port [port] -name [name]</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="2c871342-3512-4f51-b13f-d3d518917f53" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>config LAG</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="9d66de3a-b7b4-4458-8f6e-f90d0238bccb" action="configureLag" session="fortigate" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>-port [lag] -name [name] -ports [ports]</body>
                                                                                                                    </command>
                                                                                                                    <postProcessing>
                                                                                                                        <analysisRules>
                                                                                                                            <item>
                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                        <query>retCode()</query>
                                                                                                                                    </extractorProperties>
                                                                                                                                </extractorInfo>
                                                                                                                                <processorInfo ruleType="assert">
                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                        <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                        <actionsWhenTrue>
                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                    <message>For &quot;[device]&quot; config LAG on ports [device_ports_per_lag] is ok</message>
                                                                                                                                                </actionProperties>
                                                                                                                                            </item>
                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                            </item>
                                                                                                                                        </actionsWhenTrue>
                                                                                                                                        <actionsWhenFalse>
                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                    <message>For &quot;[device]&quot; config LAG is not ok</message>
                                                                                                                                                </actionProperties>
                                                                                                                                            </item>
                                                                                                                                        </actionsWhenFalse>
                                                                                                                                    </ruleProperties>
                                                                                                                                </processorInfo>
                                                                                                                            </item>
                                                                                                                        </analysisRules>
                                                                                                                    </postProcessing>
                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="20db156f-340c-4ed7-838a-a7804a21e3e7" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>console exit</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="1d13a606-9d05-4736-bde4-841804577866" action="consoleExit" session="fortigate" useFieldsInCommand="false">
                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="d5cd9b56-9af3-4e9d-99e4-b726de51a04f" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>close session</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="8892fe1c-7478-4147-ac87-4e43a64e478c" action="close" session="fortigate">
                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="f3c3b748-a357-454b-995a-27bdab8ec68d" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>Check LAG connection on each neighbor device - message</body>
                                                                                                    </command>
                                                                                                    <postProcessing>
                                                                                                        <analysisRules>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="none">
                                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="message">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                        <message>---Checking LAG connections on connected device &quot;[conn_device_name]&quot;...</message>
                                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                        </analysisRules>
                                                                                                    </postProcessing>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="a3b82492-11ec-421e-80f7-f5b7fa83d811" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>Config LAG on connection device</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="3ec5ac70-c271-4c8a-86ce-b5856a3af922" action="if" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_template_name == &quot;Fortinet Switch&quot;:</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="1258c178-f8f9-4acb-9487-d1c3982b1f5f" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>info</body>
                                                                                                                    </command>
                                                                                                                    <postProcessing>
                                                                                                                        <analysisRules>
                                                                                                                            <item>
                                                                                                                                <extractorInfo extractorType="none">
                                                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                </extractorInfo>
                                                                                                                                <processorInfo ruleType="message">
                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                        <message> For device &quot;[conn_device_name]&quot; ports [conn_device_ports_per_lag] are included in LAG</message>
                                                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                                                    </ruleProperties>
                                                                                                                                </processorInfo>
                                                                                                                            </item>
                                                                                                                        </analysisRules>
                                                                                                                    </postProcessing>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="9b0f8b26-63bd-45f8-bd3e-70c8320b00a4" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>open session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="66c40d41-5c61-4388-a535-877ad1179728" action="open" session="fortiswitch" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>project://Fortiswitch_console/session_profiles/console.ffsp</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                    <completionProperties>
                                                                                                                                        <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                    </completionProperties>
                                                                                                                                </stepProperties>
                                                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                                    <ipAddress inherit="false">[conn_device_console_ip_addr]</ipAddress>
                                                                                                                                    <port inherit="false">[conn_device_console_port]</port>
                                                                                                                                </sessionProperties>
                                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                            </applicationProperties>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="bacc561d-56fb-4882-85ba-7264443175d4" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>set parameters based on name convention</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="177f3894-61ef-4009-a874-83643668c4bf" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>name_tsw=&quot;LAG&quot;+&quot;_&quot;+&quot;_&quot;.join(conn_device_ports_per_lag)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="606bc23a-8632-4e8a-9741-ad262c8e5f0f" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>ports_tsw=&quot; &quot;.join(conn_device_ports_per_lag)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="ac639e02-c56c-451e-8c6f-36b1f5e80db3" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>mode=&quot;active&quot;</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="c5e86bba-7d1a-4969-b3aa-9a35ebec4eaf" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>console login and set trunk</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="b6448cef-3b05-4b26-94b6-5d8ac6d5007f" action="setTrunkModeLag" session="fortiswitch" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>-name [name_tsw] -port [ports_tsw] -mode [mode]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>retCode()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                            <message>For &quot;[conn_device_name]&quot; config LAG on ports [conn_device_ports_per_lag] is ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                            <message>For &quot;[conn_device_name]&quot; config LAG is not ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="be1812c1-44fd-4d64-937b-51f301def051" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>get vlanId for LAG ports</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="676451d0-9862-4295-93f6-396fec6df8d0" action="for" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>conn_port in (conn_device_ports_per_lag):</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="ac5f54d8-a25c-4d26-834c-7d0be6974ef5" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                    <command>
                                                                                                                                        <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                                                                                                                    </command>
                                                                                                                                    <postProcessing>
                                                                                                                                        <analysisRules>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                        <query sub="true">mapped/Json/items/*\\[name=&quot;[conn_port]&quot;]/vlanIds/item/id</query>
                                                                                                                                                    </extractorProperties>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                        <storageLocation>vlan_id</storageLocation>
                                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                        </analysisRules>
                                                                                                                                    </postProcessing>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="e9a054fb-6f2f-4934-b6b3-8dc66dcdb38f" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(vlan_id)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="131de364-131d-449e-9bfd-f89ccacd6ec3" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>set native vlan to LAG port</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="08ae9d7a-af69-415a-892a-923b4b141c54" action="addPortToNativeVlan" session="fortiswitch" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>-port [name_tsw] -vlan [vlan_id]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>retCode()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                            <message>For &quot;[conn_device_name]&quot; set native-vlan [vlan_id] for port [name_tsw] is ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                            <message>For &quot;[conn_device_name]&quot; set native-vlan is not ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="42729aa8-48e3-4c1b-9c2d-029f4680b743" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>discover and update the LAG port </body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="0bc09a7a-6059-4db1-8d43-6c6adabac2f1" action="POST" session="velocity">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_device_id]/action?type=discover</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="message">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                <message> Waiting for discover operation on [conn_device_name]</message>
                                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                                                                    <memberClasses>
                                                                                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                                                                    </memberClasses>
                                                                                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                                                                </httpHeader>
                                                                                                                            </applicationProperties>
                                                                                                                        </item>
                                                                                                                        <item guid="ac7e6fab-d0cb-4c6a-a030-c71e6720cc2f" action="sleep">
                                                                                                                            <command>
                                                                                                                                <body>10</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="f61418c7-5a0c-46bd-b158-46eebc55058f" action="consoleLogin" session="fortiswitch" useFieldsInCommand="false">
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>retCode()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                            <message>--- console login not ok; fail test</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                        <item guid="d9b93cc0-543b-4c36-a6fc-3478b113814d" action="command" session="fortiswitch">
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>promptName()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>str(value) == &quot;prompt1&quot; </expression>
                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                            <message>For &quot;[conn_device_name]&quot;: discover operation was successfully</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="RepeatStep">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                                                                <promptProperties>
                                                                                                                                    <stepPrompts>
                                                                                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">* login:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt2" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                                                                            <Content sub="true">* #</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt3">
                                                                                                                                            <Content>Password:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt4">
                                                                                                                                            <Content>--More-- </Content>
                                                                                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt5">
                                                                                                                                            <Content>Do you want to continue? (y/n)</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt6" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">* (*) #</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt7" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">*:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt8" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">*</Content>
                                                                                                                                        </item>
                                                                                                                                    </stepPrompts>
                                                                                                                                </promptProperties>
                                                                                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                </completionProperties>
                                                                                                                            </applicationProperties>
                                                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="995e3dec-a59f-41aa-aee9-b8ee24fbf6aa" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>console exit</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="0ce83c20-74fa-4d23-86bc-550ebb15f8cd" action="consoleExit" session="fortiswitch" useFieldsInCommand="false">
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="a4f05722-7594-4786-896c-8f20efe19d72" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>close session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="af45e368-6ee6-4151-bcf0-890b0ddb150b" action="close" session="fortiswitch">
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="8e741362-84a1-422b-a464-0e07ed3e738b" action="if" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_template_name == &quot;Arista Switch&quot;:</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="259079c5-8076-4f95-a22a-ebfc06ecd95e" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>info</body>
                                                                                                                    </command>
                                                                                                                    <postProcessing>
                                                                                                                        <analysisRules>
                                                                                                                            <item>
                                                                                                                                <extractorInfo extractorType="none">
                                                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                </extractorInfo>
                                                                                                                                <processorInfo ruleType="message">
                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                        <message> For device &quot;[conn_device_name]&quot; ports [conn_device_ports_per_lag] are included in LAG</message>
                                                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                                                    </ruleProperties>
                                                                                                                                </processorInfo>
                                                                                                                            </item>
                                                                                                                        </analysisRules>
                                                                                                                    </postProcessing>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="45f880ab-c558-45bd-bfb7-8b27673d4616" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>open session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="a58413b4-a3ce-414a-9b4b-dee4fe026c0e" action="open" session="arista" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>project://Arista_console/session_profiles/console.ffsp</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                    <completionProperties>
                                                                                                                                        <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                    </completionProperties>
                                                                                                                                </stepProperties>
                                                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                                    <ipAddress inherit="false">[conn_device_console_ip_addr]</ipAddress>
                                                                                                                                    <port inherit="false">[conn_device_console_port]</port>
                                                                                                                                </sessionProperties>
                                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                            </applicationProperties>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="92f8fc44-c20d-4b31-bde0-f6d655be7541" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>set parameters based on name convention</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="6cb772f8-c3ef-453b-b426-01b4a5d9677a" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>number = 1</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="cb8420e4-a1f2-4ed4-8bd1-bd4bcaa94c16" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>ports_tsw=&quot;,&quot;.join(conn_device_ports_per_lag)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="07c3a5f3-fa22-42b7-a094-3b706c1d86cd" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>mode=&quot;active&quot;</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="2abd611a-caf9-4aaf-9328-4aff56eeae32" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>console login and set port-channel</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="4e3ac9b1-92dc-4989-a8b1-283ca31626a5" action="setSwitchPortChannel" session="arista" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>-number [number] -interfaces [ports_tsw] -mode [mode]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>retCode()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                            <message>For &quot;[conn_device_name]&quot; config LAG on ports [conn_device_ports_per_lag] is ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                            <message>For &quot;[conn_device_name]&quot; config LAG is not ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="e6db405b-4b5d-4ac5-96c8-0d2facaa48ca" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>get vlanId for LAG ports</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="005fbe61-35fc-4cd5-9457-4d7e8a964304" action="for" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>conn_port in conn_device_ports_per_lag:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="70778100-29de-493c-bec3-3351633d64ed" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                    <command>
                                                                                                                                        <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                                                                                                                    </command>
                                                                                                                                    <postProcessing>
                                                                                                                                        <analysisRules>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                        <query sub="true">mapped/Json/items/*\\[name=&quot;[conn_port]&quot;]/vlanIds/item/id</query>
                                                                                                                                                    </extractorProperties>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                        <storageLocation>vlan_id</storageLocation>
                                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                        <query sub="true">mapped/Json/items/*\\[name=&quot;[conn_port]&quot;]/vlanIds/item/isTagged</query>
                                                                                                                                                    </extractorProperties>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                        <storageLocation>vlan_id_type</storageLocation>
                                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                        </analysisRules>
                                                                                                                                    </postProcessing>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="4e5b63f8-8e57-4580-9905-36605743fae3" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>type(vlan_id)==str:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="c3c02e66-b7fa-4d44-b750-7d17e1fe3aa9" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>vlan_id=vlan_id.split()</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="1fc4e367-381c-418e-8d0e-26dbf264d381" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>type(vlan_id_type)==str:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="f4569f41-a2a4-433e-ab81-a0e45cd90153" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>vlan_id_type=vlan_id_type.split()</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="e9bdff31-ea8b-49b2-9908-f052f46979f6" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(vlan_id)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="ce54113b-e2c1-4e6c-aa42-9d5e3eebf933" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(vlan_id_type)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="a473fc40-a539-459e-9e5c-4ba51c431f2e" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>set native vlan to LAG port</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="054725c2-425f-4e4c-bcd7-f02994b250de" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>port_channel=&quot;port-channel&quot;+&quot; &quot;+str(number)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="382fda35-6809-4b34-923a-65404bfb68ad" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(port_channel)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="946e11d4-9eea-4503-b4a3-7095862d36f4" action="for" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>index in range(len(vlan_id)):</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="f03dcd77-dbd9-46de-addc-26ef9e24488a" action="if" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>vlan_id_type[index]==&quot;false&quot;:</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="3107be8b-f2df-4219-8027-7d2e63e4c60b" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>vlanId=vlan_id[index]</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="2987199e-7932-43b4-a755-c093f969fb0e" action="addPortToSingleVlan" session="arista_lepton" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>-port [port_channel] -vlan [vlanId]</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>retCode()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                            <message>For &quot;[conn_device_name]&quot; set native-vlan [vlan_id] for port [port_channel] is ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                            <message>For &quot;[conn_device_name]&quot; set native-vlan is not ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="f3806a84-8efa-4af1-973b-a4685c25b7ab" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>vlan_id.remove(vlanId)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="7aac69f2-49bf-4bee-becd-36ff16bbaa75" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>set allowed vlans to LAG port if needed</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="cc420422-cd0a-4368-b0ff-60664e734a0b" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(vlan_id)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="94edbd1f-dd93-494d-bd0c-530870fd5c84" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>vlan_id != []:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="3454abcf-01ea-491c-ad9f-8fe8adbc8dce" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>vlanIds=&quot;,&quot;.join(vlan_id)</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="a749b4eb-3756-4785-ae9c-d928683fd16a" action="addPortToAllowedVlans" session="arista_lepton" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>-port [port_channel] -vlan [vlanIds]</body>
                                                                                                                                    </command>
                                                                                                                                    <postProcessing>
                                                                                                                                        <analysisRules>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                        <query>retCode()</query>
                                                                                                                                                    </extractorProperties>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="assert">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                        <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                        <actionsWhenTrue>
                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                    <message>For &quot;[conn_device_name]&quot; set allowed vlans [vlanIds] for port [port_channel] is ok</message>
                                                                                                                                                                </actionProperties>
                                                                                                                                                            </item>
                                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                            </item>
                                                                                                                                                        </actionsWhenTrue>
                                                                                                                                                        <actionsWhenFalse>
                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                    <message>For &quot;[conn_device_name]&quot; set allowed vlans is not ok</message>
                                                                                                                                                                </actionProperties>
                                                                                                                                                            </item>
                                                                                                                                                            <item actionId="FailTest">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                            </item>
                                                                                                                                                        </actionsWhenFalse>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                        </analysisRules>
                                                                                                                                    </postProcessing>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="2c49ad1a-e02e-45b7-8ffd-3fd391da0745" action="else" useFieldsInCommand="false">
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="17282299-4101-4e7c-a464-99640de29f69" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>Insert steps here for when the expression evaluates to false</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="cfa9365c-f39f-460e-a42e-6393a049e621" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>discover and update the LAG port </body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="54401b62-b088-4cd5-a52c-da0f5ff94097" action="POST" session="velocity">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_device_id]/action?type=discover</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="message">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                <message> Waiting for discover operation on [conn_device_name]</message>
                                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                                                                    <memberClasses>
                                                                                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                                                                    </memberClasses>
                                                                                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                                                                </httpHeader>
                                                                                                                            </applicationProperties>
                                                                                                                        </item>
                                                                                                                        <item guid="7f9d99d7-ef8d-4b47-a9c4-59b4eb51f077" action="sleep" skip="true">
                                                                                                                            <command>
                                                                                                                                <body>20</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="74ca910b-3c34-4411-b23d-cb277e20500a" action="consoleLogin" session="arista" skip="true" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>-username [conn_device_username] -password [conn_device_password]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>retCode()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                            <message>--- console login not ok; fail test</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                        <item guid="f89c035b-419f-41ff-810d-dc6d4d999468" action="command" session="arista" skip="true">
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>promptName()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>str(value) == &quot;prompt1&quot; or str(value) ==&quot;prompt4&quot;</expression>
                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                            <message>For &quot;[conn_device_name]&quot;: discover operation was successfully</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="RepeatStep">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                                                                <promptProperties>
                                                                                                                                    <stepPrompts>
                                                                                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">* login:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt2">
                                                                                                                                            <Content>Password:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt3" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                                                                            <Content sub="true">*&gt;</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt4" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">*#</Content>
                                                                                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt5" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">*(*)#</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt6"/>
                                                                                                                                    </stepPrompts>
                                                                                                                                </promptProperties>
                                                                                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                </completionProperties>
                                                                                                                            </applicationProperties>
                                                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                                                        </item>
                                                                                                                        <item guid="27adc547-7e46-41c3-841e-ff95699f9d1e" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>i=0</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="c4a0f7b2-4808-4296-86db-2f4f9b4067ea" action="while" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>i&lt;10:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="db9afc93-c2d7-45c4-9b69-f632ce8f8fbf" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>i = i + 2</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="5f4a109d-32c7-4d9d-a46e-3bc045984c55" action="sleep">
                                                                                                                                    <command>
                                                                                                                                        <body>3</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="cc969638-6650-413f-a459-5ba11ac036a9" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>print(i)</body>
                                                                                                                                    </command>
                                                                                                                                    <postProcessing>
                                                                                                                                        <analysisRules>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                        <query>responseLine()</query>
                                                                                                                                                    </extractorProperties>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="assert">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                        <expression>int(value) == 9</expression>
                                                                                                                                                        <actionsWhenTrue>
                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                    <message>For &quot;[conn_device_name]&quot;: discover operation was successfully</message>
                                                                                                                                                                </actionProperties>
                                                                                                                                                            </item>
                                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                            </item>
                                                                                                                                                        </actionsWhenTrue>
                                                                                                                                                        <actionsWhenFalse>
                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                                    <message>--- discover operation is still in progress...</message>
                                                                                                                                                                </actionProperties>
                                                                                                                                                            </item>
                                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                            </item>
                                                                                                                                                        </actionsWhenFalse>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                        </analysisRules>
                                                                                                                                    </postProcessing>
                                                                                                                                    <eventHandlers>
                                                                                                                                        <item name="OnQueryExtractorInvalidQuery">
                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Information">
                                                                                                                                                    <message>{auto_message_wait}</message>
                                                                                                                                                </actionProperties>
                                                                                                                                            </item>
                                                                                                                                            <item actionId="RepeatStep">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup"/>
                                                                                                                                            </item>
                                                                                                                                        </item>
                                                                                                                                        <item name="OnNoMatchesFound">
                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Information">
                                                                                                                                                    <message>{auto_message_wait}</message>
                                                                                                                                                </actionProperties>
                                                                                                                                            </item>
                                                                                                                                            <item actionId="RepeatStep">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup"/>
                                                                                                                                            </item>
                                                                                                                                        </item>
                                                                                                                                    </eventHandlers>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="edafc12a-d7f3-4677-9204-367740e33610" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>console exit</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="ed6329e5-615b-46e0-bfe5-1a0074411fc3" action="consoleExit" session="arista" useFieldsInCommand="false">
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="21106822-f2a1-498c-9088-349338e19a38" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>close session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="46962910-0db3-479a-9828-78e15f676c96" action="close" session="arista">
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="6f6cd6c4-05a4-4a0a-860b-ad96241ba98a" action="if" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_template_name == &quot;Lepton ColdFusion Switch&quot;:</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="b1bab78f-6c87-4e74-ac03-5bff918b9541" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>open session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="fd63d806-971f-4c03-abec-8beebd9aea64" action="open" session="lepton" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>project://Lepton_ssh/session_profiles/ssh.ffsp</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                <sessionProperties type="com.fnfr.svt.applications.ssh.documents.SSHProperties">
                                                                                                                                    <ipAddress inherit="false">[conn_device_ipAddress]</ipAddress>
                                                                                                                                    <user inherit="false">[conn_device_username]</user>
                                                                                                                                    <password inherit="false" masked="false">[conn_device_password]</password>
                                                                                                                                </sessionProperties>
                                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                            </applicationProperties>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="dc8d1531-9904-4e69-839a-3c222678c8f0" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>ssh login and get connected port</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="c3a51ebf-2bed-43b1-bbef-b004d43fec27" action="for" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>conn_port_name in conn_device_ports_per_lag:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="0b8e0fc2-8b63-428a-a739-f4cf098ac383" action="getConnectedPort" session="lepton" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>-port [conn_port_name]</body>
                                                                                                                                    </command>
                                                                                                                                    <postProcessing>
                                                                                                                                        <analysisRules>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                        <query>responseLine()</query>
                                                                                                                                                    </extractorProperties>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                        <storageLocation>conn_port_lepton</storageLocation>
                                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                        </analysisRules>
                                                                                                                                    </postProcessing>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="e2e6750a-918d-4ffa-8a6d-331b1a4038ac" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(conn_port_lepton)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="9b214164-67dc-41be-afe4-e19a06380fe8" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>len(conn_port_lepton)==3:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="6ea303a5-9740-44d1-9948-6eeb0b3eb1fe" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>conn_port_lepton=conn_port_lepton[:2]+&quot;0&quot;+conn_port_lepton[2:]</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="c3593005-3b66-419f-b1f5-6acef95026e3" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(conn_port_lepton)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="77ae90de-9499-411e-909e-bd5a7493a5a0" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>check neighbor-device on lepton side</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="99871e5f-17b5-4c53-94a1-99be65083870" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_device_id]/ports?limit=200</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query sub="true">mapped/Json/ports/*\\[name=&quot;[conn_port_lepton]&quot;]/connectedPortName</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_port_name</storageLocation>
                                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query sub="true">mapped/Json/ports/*\\[name=&quot;[conn_port_lepton]&quot;]/connectedPortParentName</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_name</storageLocation>
                                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/ports?limit=200" action.inherit="false"/>
                                                                                                                        </item>
                                                                                                                        <item guid="833408f8-578f-427c-8d1f-2da81bea4993" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(conn_lepton_port_name, conn_lepton_device_name)</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="message">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                <message>--- found lepton device connection: [conn_lepton_device_name] on port [conn_port_lepton]</message>
                                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="809eb005-1093-414c-9120-bfa96ccc6932" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                            <command>
                                                                                                                                <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[conn_lepton_device_name]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>mapped/Json/devices/item/id</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_id</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>mapped/Json/devices/item/templateId</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_template_id</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[conn_lepton_device_name]" action.inherit="false"/>
                                                                                                                        </item>
                                                                                                                        <item guid="681c0084-bb2a-4859-a981-66951ce36a43" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_lepton_device_id]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>mapped/Json/properties/*[name=&quot;ipAddress&quot;]/value</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_ip_addr</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>mapped/Json/properties/*[name=&quot;Console&quot;]/value</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_console_ip_addr</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>mapped/Json/properties/*[name=&quot;Console Port&quot;]/value</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_console_port</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>mapped/Json/properties/*[name=&quot;username&quot;]/value</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_username</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>mapped/Json/properties/*[name=&quot;password&quot;]/value</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_password</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_lepton_device_id]" action.inherit="false"/>
                                                                                                                        </item>
                                                                                                                        <item guid="785646c1-e831-4aa3-bbc8-356092d5bccb" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/template/[conn_lepton_template_id]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>mapped/Json/name</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_template_name</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/template/[conn_lepton_template_id]" action.inherit="false"/>
                                                                                                                        </item>
                                                                                                                        <item guid="22c56184-20f7-43a6-87b7-8f0c890b537c" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(conn_lepton_template_name)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="93afdc85-1699-4598-8d82-8d20af37addf" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>login to lepton neighbor-device and config lag</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="7733deee-6017-4c30-8616-8544d0b281a7" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>conn_lepton_template_name == &quot;Fortinet Switch&quot;:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="897b9627-b580-40a0-9c5f-33caefc4bddb" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>info</body>
                                                                                                                                    </command>
                                                                                                                                    <postProcessing>
                                                                                                                                        <analysisRules>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="none">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="message">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                        <message> For device &quot;[conn_lepton_device_name]&quot; ports [conn_lepton_port_names] are included in LAG</message>
                                                                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                        </analysisRules>
                                                                                                                                    </postProcessing>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="d73dd777-d75e-4afb-8c34-5bc8f5f860c5" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>open session</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="efe0ba76-c925-47c5-94dc-b2c96446d478" action="open" session="fortiswitch_lepton" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>project://Fortiswitch_console/session_profiles/console.ffsp</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                                    <completionProperties>
                                                                                                                                                        <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                                    </completionProperties>
                                                                                                                                                </stepProperties>
                                                                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                                                    <ipAddress inherit="false">[conn_lepton_device_console_ip_addr]</ipAddress>
                                                                                                                                                    <port inherit="false">[conn_lepton_device_console_port]</port>
                                                                                                                                                </sessionProperties>
                                                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                            </applicationProperties>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="40ff2e2a-64a5-4085-833d-84e1152418bb" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>set parameters based on name convention</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="6bea1ae4-5a7d-49bb-b6d8-f77582897ecf" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>name_tsw=&quot;LAG&quot;+&quot;_&quot;+&quot;_&quot;.join(conn_lepton_port_name)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="004e8bf9-a130-4054-9358-867718aec4d3" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>ports_tsw=&quot; &quot;.join(conn_lepton_port_name)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="f06cbc38-f66c-4c64-a6bb-b82232afa698" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>mode=&quot;active&quot;</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="80c725ee-68a3-4b16-8319-6f3d864efde9" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>console login and set trunk</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="48b9571d-c5e4-4210-9d53-99d1b10df8ab" action="setTrunkModeLag" session="fortiswitch_lepton" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>-name [name_tsw] -port [ports_tsw] -mode [mode]</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>retCode()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot; config LAG on ports [conn_lepton_port_name] is ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot; config LAG is not ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="2f54c799-d40e-4505-980b-e413adcc42b8" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>get vlanId for LAG ports</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="5ef3cbcb-72c1-4243-9a2f-2c3d82027792" action="for" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>conn_port in (conn_lepton_port_name):</body>
                                                                                                                                            </command>
                                                                                                                                            <nestedSteps>
                                                                                                                                                <item guid="162424ba-351a-4072-9c97-6cc03a245875" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                                    <command>
                                                                                                                                                        <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                                                                                                                                    </command>
                                                                                                                                                    <postProcessing>
                                                                                                                                                        <analysisRules>
                                                                                                                                                            <item>
                                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                        <query sub="true">mapped/Json/items/*\\[name=&quot;[conn_port]&quot;]/vlanIds/item/id</query>
                                                                                                                                                                    </extractorProperties>
                                                                                                                                                                </extractorInfo>
                                                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                                        <storageLocation>vlan_id</storageLocation>
                                                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                                    </ruleProperties>
                                                                                                                                                                </processorInfo>
                                                                                                                                                            </item>
                                                                                                                                                        </analysisRules>
                                                                                                                                                    </postProcessing>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                                                                                                                                </item>
                                                                                                                                            </nestedSteps>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="cb165ed4-cda8-445f-9b1d-769969e0626d" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>print(vlan_id)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="6cd1834a-a90c-4ecd-82d6-e15271af3e91" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>set native vlan on LAG port</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="23e3a263-fd2f-487b-b530-aeb7c0355fdf" action="addPortToNativeVlan" session="fortiswitch_lepton" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>-port [name_tsw] -vlan [vlan_id]</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>retCode()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                            <message>For &quot;[conn_device_name]&quot; set native-vlan [vlan_id] for port [name_tsw] is ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                            <message>For &quot;[conn_device_name]&quot; set native-valn is not ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="49db92cf-a274-45aa-8d0f-2a759846112a" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>discover and update the LAG port </body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="1250fedd-ad83-493a-8978-bada5a7bb824" action="POST" session="velocity">
                                                                                                                                            <command>
                                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_lepton_device_id]/action?type=discover</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="message">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                                <message> Waiting for discover operation on [conn_lepton_device_name]</message>
                                                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[conn_lepton_device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                                                                                    <memberClasses>
                                                                                                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                                                                                    </memberClasses>
                                                                                                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                                                                                </httpHeader>
                                                                                                                                            </applicationProperties>
                                                                                                                                        </item>
                                                                                                                                        <item guid="ae683e89-d738-48eb-ba9d-d567ad6aebb7" action="sleep">
                                                                                                                                            <command>
                                                                                                                                                <body>10</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="bf65b5d0-149e-403f-b739-7ea336768278" action="consoleLogin" session="fortiswitch_lepton" useFieldsInCommand="false">
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>retCode()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                            <message>--- console login not ok; fail test</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="126c5b83-8c11-403d-a31a-f1e12d7dcb54" action="command" session="fortiswitch_lepton">
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                                <query>promptName()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>str(value) == &quot;prompt1&quot; </expression>
                                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot;: discover operation was successfully</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="RepeatStep">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                                                                                <promptProperties>
                                                                                                                                                    <stepPrompts>
                                                                                                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">* login:</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt2" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                                                                                            <Content sub="true">* #</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt3">
                                                                                                                                                            <Content>Password:</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt4">
                                                                                                                                                            <Content>--More-- </Content>
                                                                                                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt5">
                                                                                                                                                            <Content>Do you want to continue? (y/n)</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt6" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">* (*) #</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt7" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">*:</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt8" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">*</Content>
                                                                                                                                                        </item>
                                                                                                                                                    </stepPrompts>
                                                                                                                                                </promptProperties>
                                                                                                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                                </completionProperties>
                                                                                                                                            </applicationProperties>
                                                                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="d4835ebd-9035-4fd2-bd82-871485377a33" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>console exit</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="96aeb7db-d0e9-4c4e-bb86-a91e47f15138" action="consoleExit" session="fortiswitch_lepton" useFieldsInCommand="false">
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="f3bfc48b-b0fd-4602-94e1-65be48b644bb" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>close session</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="a99dd2a4-2bec-4df3-80ca-08b179bb4d90" action="close" session="fortiswitch_lepton">
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="e798f6b9-18df-471b-af28-b5f10665ea97" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>conn_lepton_template_name == &quot;Arista Switch&quot;:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="8365038f-ab2b-463d-8e4d-64f2aac6438a" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>info</body>
                                                                                                                                    </command>
                                                                                                                                    <postProcessing>
                                                                                                                                        <analysisRules>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="none">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="message">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                        <message> For device &quot;[conn_lepton_device_name]&quot; ports [conn_lepton_port_name] are included in LAG</message>
                                                                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                        </analysisRules>
                                                                                                                                    </postProcessing>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="62a8632b-24f1-4a07-ae29-e48b5ced814e" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>open session</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="4552aef6-8a18-4558-8331-dad505e24a5b" action="open" session="arista_lepton">
                                                                                                                                            <command>
                                                                                                                                                <body>project://Arista_console/session_profiles/console.ffsp</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                                                    <ipAddress inherit="false">[conn_lepton_device_console_ip_addr]</ipAddress>
                                                                                                                                                    <port inherit="false">[conn_lepton_device_console_port]</port>
                                                                                                                                                    <TerminalProperties>
                                                                                                                                                        <stepDefaults>
                                                                                                                                                            <completionProperties>
                                                                                                                                                                <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                                            </completionProperties>
                                                                                                                                                        </stepDefaults>
                                                                                                                                                    </TerminalProperties>
                                                                                                                                                </sessionProperties>
                                                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                            </applicationProperties>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="4291f5f1-ffe3-4b34-8182-0ef5b9172ea7" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>set parameters based on name convention</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="9b9cea9f-523f-401c-bab1-956aa6f0b0b9" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>number = &quot;10&quot;</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="53675cf5-6d5b-41c0-87d4-c9c70faf9e6e" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>ports_arista=&quot;,&quot;.join(conn_lepton_port_name)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="b252394a-fad2-4154-ae9f-03e0527ce8f4" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>print(ports_arista)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="de8e79d3-d3ff-4975-8de8-5e6c995f00e4" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>mode=&quot;active&quot;</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="adbb8f05-04da-490e-8a64-0c9a40b37648" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>console login and set port-channel</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="ab25696c-f326-4c4c-8d59-6b74dd965487" action="setSwitchPortChannel" session="arista_lepton" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>-number [number] -interfaces [ports_arista] -mode [mode]</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>retCode()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot; config LAG on ports [conn_lepton_port_name] is ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot; config LAG is not ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="98ff694b-d971-414e-bfc4-95863bb40330" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>get vlanId for LAG ports</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="9186ba46-9640-4432-b580-8cf93013939d" action="for" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>conn_port in (conn_lepton_port_name):</body>
                                                                                                                                            </command>
                                                                                                                                            <nestedSteps>
                                                                                                                                                <item guid="f2201c14-9145-4cc4-a2e5-983c145819e0" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                                    <command>
                                                                                                                                                        <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                                                                                                                                    </command>
                                                                                                                                                    <postProcessing>
                                                                                                                                                        <analysisRules>
                                                                                                                                                            <item>
                                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                        <query sub="true">mapped/Json/items/*\\[name=&quot;[conn_port]&quot;]/vlanIds/item/id</query>
                                                                                                                                                                    </extractorProperties>
                                                                                                                                                                </extractorInfo>
                                                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                                        <storageLocation>vlan_id</storageLocation>
                                                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                                    </ruleProperties>
                                                                                                                                                                </processorInfo>
                                                                                                                                                            </item>
                                                                                                                                                            <item>
                                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                        <query sub="true">mapped/Json/items/*\\[name=&quot;[conn_port]&quot;]/vlanIds/item/isTagged</query>
                                                                                                                                                                    </extractorProperties>
                                                                                                                                                                </extractorInfo>
                                                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                                        <storageLocation>vlan_id_type</storageLocation>
                                                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                                    </ruleProperties>
                                                                                                                                                                </processorInfo>
                                                                                                                                                            </item>
                                                                                                                                                        </analysisRules>
                                                                                                                                                    </postProcessing>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                                                                                                                                </item>
                                                                                                                                            </nestedSteps>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="b8d335b9-0beb-48c8-a263-80422647fb1d" action="if" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>type(vlan_id)==str:</body>
                                                                                                                                            </command>
                                                                                                                                            <nestedSteps>
                                                                                                                                                <item guid="b059f7f4-453e-4daa-b207-88a0a58080c8" action="eval" useFieldsInCommand="false">
                                                                                                                                                    <command>
                                                                                                                                                        <body>vlan_id=vlan_id.split()</body>
                                                                                                                                                    </command>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                            </nestedSteps>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="2842f283-78fc-4f0c-aa40-4544b076f364" action="if" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>type(vlan_id_type)==str:</body>
                                                                                                                                            </command>
                                                                                                                                            <nestedSteps>
                                                                                                                                                <item guid="8c0cbcaa-3c19-4ed2-a007-8ea50da7edf2" action="eval" useFieldsInCommand="false">
                                                                                                                                                    <command>
                                                                                                                                                        <body>vlan_id_type=vlan_id_type.split()</body>
                                                                                                                                                    </command>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                            </nestedSteps>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="7d33f966-b9d8-4da6-b51c-59097dadff85" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>print(vlan_id)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="2db31df1-d89f-471e-868a-3e97363a778e" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>print(vlan_id_type)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="0d247c41-c94d-4171-8498-45545fff38e9" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>set native vlan to LAG port</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="9ab347ca-5af0-4a7e-8adf-dc8970464df9" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>port_channel=&quot;port-channel&quot;+&quot; &quot;+number</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="ebce10e2-ca91-44f1-9585-93f0f7702dfd" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>print(port_channel)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="caafa166-4a6a-4b53-9a0e-af4c2f97cae1" action="for" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>index in range(len(vlan_id)):</body>
                                                                                                                                            </command>
                                                                                                                                            <nestedSteps>
                                                                                                                                                <item guid="3da6d21a-3567-418e-bde8-416631e298b3" action="if" useFieldsInCommand="false">
                                                                                                                                                    <command>
                                                                                                                                                        <body>vlan_id_type[index]==&quot;false&quot;:</body>
                                                                                                                                                    </command>
                                                                                                                                                    <nestedSteps>
                                                                                                                                                        <item guid="eedb2280-b1d1-4134-ba71-2c42ab5ca6e2" action="eval" useFieldsInCommand="false">
                                                                                                                                                            <command>
                                                                                                                                                                <body>vlanId=vlan_id[index]</body>
                                                                                                                                                            </command>
                                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                        </item>
                                                                                                                                                        <item guid="492b1025-689d-4240-b01b-cb68b8e697fc" action="addPortToSingleVlan" session="arista_lepton" useFieldsInCommand="false">
                                                                                                                                                            <command>
                                                                                                                                                                <body>-port [port_channel] -vlan [vlanId]</body>
                                                                                                                                                            </command>
                                                                                                                                                            <postProcessing>
                                                                                                                                                                <analysisRules>
                                                                                                                                                                    <item>
                                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                                <query>retCode()</query>
                                                                                                                                                                            </extractorProperties>
                                                                                                                                                                        </extractorInfo>
                                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot; set native-vlan [vlanId] for port [port_channel] is ok</message>
                                                                                                                                                                                        </actionProperties>
                                                                                                                                                                                    </item>
                                                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                                    </item>
                                                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot; set native-vlan is not ok</message>
                                                                                                                                                                                        </actionProperties>
                                                                                                                                                                                    </item>
                                                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                                    </item>
                                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                                            </ruleProperties>
                                                                                                                                                                        </processorInfo>
                                                                                                                                                                    </item>
                                                                                                                                                                </analysisRules>
                                                                                                                                                            </postProcessing>
                                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                                        </item>
                                                                                                                                                        <item guid="6e9c20db-ca84-4089-9128-5ddee37e8502" action="eval" useFieldsInCommand="false">
                                                                                                                                                            <command>
                                                                                                                                                                <body>vlan_id.remove(vlanId)</body>
                                                                                                                                                            </command>
                                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                        </item>
                                                                                                                                                    </nestedSteps>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                            </nestedSteps>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="cbd72448-a6a9-4783-a69f-ef3dc7de7f47" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>set allowed vlans to LAG port if needed</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="790c9c3d-ae74-457e-932d-5de68c79f3a4" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>print(vlan_id)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="fbaebd54-98c1-4115-85f7-b1d38e194780" action="if" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>vlan_id != []:</body>
                                                                                                                                            </command>
                                                                                                                                            <nestedSteps>
                                                                                                                                                <item guid="145b2c98-6620-415d-8030-fb8061c439d6" action="eval" useFieldsInCommand="false">
                                                                                                                                                    <command>
                                                                                                                                                        <body>vlanIds=&quot;,&quot;.join(vlan_id)</body>
                                                                                                                                                    </command>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                                <item guid="ec7c187b-b140-470a-9f06-44b33cbd5e02" action="addPortToAllowedVlans" session="arista_lepton" useFieldsInCommand="false">
                                                                                                                                                    <command>
                                                                                                                                                        <body>-port [port_channel] -vlan [vlanIds]</body>
                                                                                                                                                    </command>
                                                                                                                                                    <postProcessing>
                                                                                                                                                        <analysisRules>
                                                                                                                                                            <item>
                                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                        <query>retCode()</query>
                                                                                                                                                                    </extractorProperties>
                                                                                                                                                                </extractorInfo>
                                                                                                                                                                <processorInfo ruleType="assert">
                                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                        <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                                        <actionsWhenTrue>
                                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                                    <message>For &quot;[conn_lepton_device_name]&quot; set allowed vlans [vlanIds] for port [port_channel] is ok</message>
                                                                                                                                                                                </actionProperties>
                                                                                                                                                                            </item>
                                                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                            </item>
                                                                                                                                                                        </actionsWhenTrue>
                                                                                                                                                                        <actionsWhenFalse>
                                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                                    <message>For &quot;[conn_lepton_device_name]&quot; set allowed vlans is not ok</message>
                                                                                                                                                                                </actionProperties>
                                                                                                                                                                            </item>
                                                                                                                                                                            <item actionId="FailTest">
                                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                            </item>
                                                                                                                                                                        </actionsWhenFalse>
                                                                                                                                                                    </ruleProperties>
                                                                                                                                                                </processorInfo>
                                                                                                                                                            </item>
                                                                                                                                                        </analysisRules>
                                                                                                                                                    </postProcessing>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                                </item>
                                                                                                                                            </nestedSteps>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="648e5082-e8ff-454f-9dbb-c4df2c27671b" action="else" useFieldsInCommand="false">
                                                                                                                                            <nestedSteps>
                                                                                                                                                <item guid="6f21e036-1bf4-442c-b898-0b12b7937402" action="comment" useFieldsInCommand="false">
                                                                                                                                                    <command>
                                                                                                                                                        <body>Insert steps here for when the expression evaluates to false</body>
                                                                                                                                                    </command>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                            </nestedSteps>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="8d919e00-f73e-44cd-ba77-fb9dedfc2705" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>discover and update the LAG port </body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="deecfe12-a89f-45b4-959d-7aaf8b75a7ba" action="POST" session="velocity">
                                                                                                                                            <command>
                                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_lepton_device_id]/action?type=discover</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="message">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                                <message> Waiting for discover operation on [conn_lepton_device_name]</message>
                                                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[conn_lepton_device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                                                                                    <memberClasses>
                                                                                                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                                                                                    </memberClasses>
                                                                                                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                                                                                </httpHeader>
                                                                                                                                            </applicationProperties>
                                                                                                                                        </item>
                                                                                                                                        <item guid="341c54cc-edd3-4ba8-9ee4-3eccb795fc0b" action="sleep" skip="true">
                                                                                                                                            <command>
                                                                                                                                                <body>20</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="f23936dd-263b-4bfb-bdd1-a912d0eb5726" action="consoleLogin" session="arista_lepton" skip="true" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>-username [conn_lepton_device_username] -password [conn_lepton_device_password]</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>retCode()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                            <message>--- console login not ok; fail test</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="2a5e3990-f48d-4b60-a2ca-ce07520c189b" action="command" session="arista_lepton" skip="true">
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                                <query>promptName()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>str(value) == &quot;prompt1&quot; or str(value) ==&quot;prompt4&quot;</expression>
                                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot;: discover operation was successfully</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="RepeatStep">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                                                                                <promptProperties>
                                                                                                                                                    <stepPrompts>
                                                                                                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">* login:</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt2">
                                                                                                                                                            <Content>Password:</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt3" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                                                                                            <Content sub="true">*&gt;</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt4" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">*#</Content>
                                                                                                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt5" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">*(*)#</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt6"/>
                                                                                                                                                    </stepPrompts>
                                                                                                                                                </promptProperties>
                                                                                                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                                </completionProperties>
                                                                                                                                            </applicationProperties>
                                                                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="c569aab7-9a51-44ef-b5e6-4d7b9f2d339f" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>i=0</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="df3fd9ab-a1ea-4774-9d91-ccae1231e693" action="while" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>i&lt;10:</body>
                                                                                                                                            </command>
                                                                                                                                            <nestedSteps>
                                                                                                                                                <item guid="12d04af1-e514-4fd6-8782-fdd8500019c1" action="eval" useFieldsInCommand="false">
                                                                                                                                                    <command>
                                                                                                                                                        <body>i = i + 2</body>
                                                                                                                                                    </command>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                                <item guid="fc5345b6-71f8-43b4-a581-d9f74392ec02" action="sleep">
                                                                                                                                                    <command>
                                                                                                                                                        <body>3</body>
                                                                                                                                                    </command>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                                <item guid="64e5de4e-5d10-4820-9bdd-ff45019ac092" action="eval" useFieldsInCommand="false">
                                                                                                                                                    <command>
                                                                                                                                                        <body>print(i)</body>
                                                                                                                                                    </command>
                                                                                                                                                    <postProcessing>
                                                                                                                                                        <analysisRules>
                                                                                                                                                            <item>
                                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                                        <query>responseLine()</query>
                                                                                                                                                                    </extractorProperties>
                                                                                                                                                                </extractorInfo>
                                                                                                                                                                <processorInfo ruleType="assert">
                                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                        <expression>int(value) == 9</expression>
                                                                                                                                                                        <actionsWhenTrue>
                                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                                    <message>For &quot;[conn_lepton_device_name]&quot;: discover operation was successfully</message>
                                                                                                                                                                                </actionProperties>
                                                                                                                                                                            </item>
                                                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                            </item>
                                                                                                                                                                        </actionsWhenTrue>
                                                                                                                                                                        <actionsWhenFalse>
                                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                                                    <message>--- discover operation is still in progress...</message>
                                                                                                                                                                                </actionProperties>
                                                                                                                                                                            </item>
                                                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                            </item>
                                                                                                                                                                        </actionsWhenFalse>
                                                                                                                                                                    </ruleProperties>
                                                                                                                                                                </processorInfo>
                                                                                                                                                            </item>
                                                                                                                                                        </analysisRules>
                                                                                                                                                    </postProcessing>
                                                                                                                                                    <eventHandlers>
                                                                                                                                                        <item name="OnQueryExtractorInvalidQuery">
                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Information">
                                                                                                                                                                    <message>{auto_message_wait}</message>
                                                                                                                                                                </actionProperties>
                                                                                                                                                            </item>
                                                                                                                                                            <item actionId="RepeatStep">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup"/>
                                                                                                                                                            </item>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="OnNoMatchesFound">
                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Information">
                                                                                                                                                                    <message>{auto_message_wait}</message>
                                                                                                                                                                </actionProperties>
                                                                                                                                                            </item>
                                                                                                                                                            <item actionId="RepeatStep">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup"/>
                                                                                                                                                            </item>
                                                                                                                                                        </item>
                                                                                                                                                    </eventHandlers>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                            </nestedSteps>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="e20fbd1a-e07e-4058-8e3d-f2676b53be0e" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>console exit</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="7345251d-ea8d-47c7-b5f4-769c357947e1" action="consoleExit" session="arista_lepton" useFieldsInCommand="false">
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="ab99c016-5916-4f91-8632-e03309c9d721" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>close session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="e74ccc8b-d7a2-40eb-98f3-f75da95528a5" action="close" session="lepton">
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="d0ed7fe2-11a0-4655-9283-51e58964f06a" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>Reinit dicts</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="f3b86ae8-7dfc-47dc-b0df-b70a43a21afb" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>device_ports_per_lag=[]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="32734917-9aa8-4416-80a3-02f62e78c7ae" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_device_ports_per_lag=[]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="f6e7d925-8898-4d2c-bc9c-922bc25407fc" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>device_ports=[]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="a6b221b3-18b6-4574-a641-8e38b5c423b6" action="if" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>device_lag_FGT_ports != []:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="dac8b8a6-494a-47e2-82d5-950766ef4417" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Enable Vdom Mode </body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="3170efc6-b617-4bc3-bbc5-484778b88fa2" action="open" session="vdom_fgt" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>project://Fortigate_console/session_profiles/console.ffsp</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                    <completionProperties>
                                                                                                        <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                    </completionProperties>
                                                                                                </stepProperties>
                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                    <ipAddress inherit="false">[device_console_ip]</ipAddress>
                                                                                                    <port inherit="false">[device_console]</port>
                                                                                                </sessionProperties>
                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                            </applicationProperties>
                                                                                        </item>
                                                                                        <item guid="0143d905-2866-4232-bc12-f459af59b0b9" action="consoleLogin" session="vdom_fgt" useFieldsInCommand="false">
                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                        </item>
                                                                                        <item guid="57873de8-07f6-4486-88db-811afab9f412" action="command" session="vdom_fgt">
                                                                                            <command>
                                                                                                <body>config global</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <storeResponseAt>vdom_output</storeResponseAt>
                                                                                                <storeResponseText>true</storeResponseText>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                        </item>
                                                                                        <item guid="96808026-6580-4877-b108-5d6ef959a2f3" action="if" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>&quot;Command fail. Return code 1&quot; in vdom_output:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="dac0358d-b51a-4230-82b3-ec496d27461e" action="enableVdom" session="vdom_fgt" useFieldsInCommand="false">
                                                                                                    <postProcessing>
                                                                                                        <analysisRules>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query>isEmpty()</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="assert">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                        <expression>str(value) == &quot;false&quot; </expression>
                                                                                                                        <actionsWhenTrue>
                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                    <message>For device [device] enable vdom operation was successful</message>
                                                                                                                                </actionProperties>
                                                                                                                            </item>
                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                            </item>
                                                                                                                        </actionsWhenTrue>
                                                                                                                        <actionsWhenFalse>
                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                    <message>Enable vdom operation was not successful</message>
                                                                                                                                </actionProperties>
                                                                                                                            </item>
                                                                                                                        </actionsWhenFalse>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                        </analysisRules>
                                                                                                    </postProcessing>
                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="f966fb25-e66f-4b8c-87ab-16c4dce565e8" action="close" session="vdom_fgt">
                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="ff2a3af4-a828-4433-b1d6-5b3d91849f26" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Find physical ports from LAG </body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="2711167a-51a2-47c6-9394-55af27f155c5" action="for" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>port_item in device_lag_FGT_ports:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="235fcd9a-a278-42c7-bb42-bc40bd5bac40" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>port_item=port_item[0]</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="ee23d4b1-7129-4b39-aa06-ad9d413cc90c" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(port_item)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="7fba7502-7e9f-4bf4-8bfa-a495bfcbd444" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                    <command>
                                                                                                        <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                                                                                    </command>
                                                                                                    <postProcessing>
                                                                                                        <analysisRules>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query sub="true">mapped/Json/items/*\\[topologyResourceId=&quot;[port_item]&quot;]/name</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="store">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                        <storageLocation>device_port</storageLocation>
                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query sub="true">mapped/Json/items/*\\[topologyResourceId=&quot;[port_item]&quot;]/inventoryParentResourceId</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="store">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                        <storageLocation>parent_port_id</storageLocation>
                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                        </analysisRules>
                                                                                                    </postProcessing>
                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                                                                                </item>
                                                                                                <item guid="6bd9ae8f-cab5-4d35-bbc6-29b40c87c50f" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(parent_port_id, device_id)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="f1a3a864-ecc7-40e9-8c11-aba421d5d51d" action="if" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>device_id == parent_port_id:</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="d90e6de2-76c6-4354-88eb-fa47bcac9109" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>device_FGT_ports.append(device_port)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="104a2e27-2e81-43a2-9a4c-5c289559a900" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(device_FGT_ports)</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="none">
                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="message">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                <message> For device &quot;[device]&quot; ports [device_FGT_ports] are included in LAG connections</message>
                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="e8903a12-5ecc-46d5-974f-8ed22b2a52c5" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Determine device ports included in LAG on neighbor-device</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="8d144af0-9951-4a5a-bbce-9683bc015e98" action="for" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>device_port in device_FGT_ports:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="639c6968-9b73-40cf-ae20-56d7b4782f1e" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                    <command>
                                                                                                        <body>/velocity/api/inventory/v16/device/[device_id]/ports?limit=200</body>
                                                                                                    </command>
                                                                                                    <postProcessing>
                                                                                                        <analysisRules>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query sub="true">mapped/Json/ports/*\\[name=&quot;[device_port]&quot;]/connectedPortName</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="store">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                        <storageLocation>conn_port_FGT_name</storageLocation>
                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query sub="true">mapped/Json/ports/*\\[name=&quot;[device_port]&quot;]/connectedPortParentName</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="store">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                        <storageLocation>conn_device_FGT_name</storageLocation>
                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                        </analysisRules>
                                                                                                    </postProcessing>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="cfc1ea29-818f-4d51-9207-ab3cc7c5c7dd" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_port_FGT_names.append(conn_port_FGT_name)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="366490d0-3b6c-4fe9-a8f5-eac466863312" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_device_FGT_names.append(conn_device_FGT_name)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="084eb7cf-ba7d-4c43-bd8c-b2e8da72aeea" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>string=device_port+&quot; : &quot;+conn_port_FGT_name +&quot; : &quot;+ conn_device_FGT_name</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="fe535d82-a734-46bd-88b2-0ad80f6ad820" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>device_FGT_name_port.append(string)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="89f0bd3b-2e63-4d46-93b0-3830ea6a6178" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>string=&quot;&quot;</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/ports?limit=200" action.inherit="false"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="df37fdc7-a5c5-4fa5-929a-0f6ddef970ba" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Check device for multiple LAG connections and config LAG </body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="1d9c9e4b-d8e1-484f-b751-c723baf1cbbb" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>conn_device_FGT_names=list(set(conn_device_FGT_names))</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="ad5ea0ef-1db7-4015-95c5-4f814b752909" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(conn_device_FGT_names)</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="none">
                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="message">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                <message> For device &quot;[device]&quot; found [len(conn_device_FGT_names)] LAG connections</message>
                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="8b21856d-a6f5-40b8-8b3b-f2074b75fd49" action="for" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>conn_device_FGT_name in conn_device_FGT_names:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="3579ad31-817a-4c79-bd56-e024ab09c604" action="for" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>element in device_FGT_name_port:</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="fcf82524-cfda-4fe1-8845-56e269fd819d" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>print(conn_device_FGT_name)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="cb036533-06df-4c79-8a34-26bc7bd7c6fb" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>print(element.split(&quot;:&quot;)[2].strip())</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="ef58fc85-2bbe-4b6f-90f3-fd00c84bbecb" action="if" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_device_FGT_name == element.split(&quot;:&quot;)[2].strip():</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="ae67b012-e5b4-41ca-a1d8-82ef6efd9a32" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>device_FGT_ports_per_lag.append(element.split(&quot;:&quot;)[0].strip())</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="057dc56b-8e0c-4463-af49-2762a0ed6a97" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>conn_device_FGT_ports_per_lag.append(element.split(&quot;:&quot;)[1].strip())</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="1607dd4f-537e-4225-bd40-523b9ec6e249" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(device_FGT_ports_per_lag)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="4e531bce-7334-4435-baee-f34be8bd4e5f" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(conn_device_FGT_ports_per_lag)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="dae5e36e-c081-4a56-b2de-521044c2baec" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>Get device details</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="647bdbe7-35f3-4fbf-8979-26e9e9f2b91f" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                            <command>
                                                                                                                <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>device_console_ip_addr</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console Port&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>device_console_port</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;username&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>device_username</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;password&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>device_password</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]" action.inherit="false"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="b13c1ab7-86bd-41db-ba28-8ff7195a40aa" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>Config LAG on device</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="7c339526-6565-4e25-96f1-a945e4d12b9e" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>open session</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="a3e2bfa5-f294-4a21-8ef6-6953080ce092" action="open" session="fortigate_FGT" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>project://Fortigate_console/session_profiles/console.ffsp</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                        <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                            <completionProperties>
                                                                                                                                <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                            </completionProperties>
                                                                                                                        </stepProperties>
                                                                                                                        <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                            <ipAddress inherit="false">[device_console_ip_addr]</ipAddress>
                                                                                                                            <port inherit="false">[device_console_port]</port>
                                                                                                                        </sessionProperties>
                                                                                                                        <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                    </applicationProperties>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="b6569214-c450-4406-aad7-5e31e66dcbd9" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>set parameters based on name convention</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="ec4a5523-2f80-4897-9686-8469a64b5b15" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>name=&quot;DATA&quot;+&quot;_&quot;+&quot;_&quot;.join(device_FGT_ports_per_lag).replace(&quot;port&quot;,&quot;&quot;)</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="0350dbb5-0f00-4074-a086-bc714c2635ba" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>name=name[:10]</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="894e45f4-21e0-4b18-8260-6bec5b022acd" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>print(name)</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="16b2aafa-529c-4198-b997-11d06ab1176b" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>ports=&quot; &quot;.join(device_FGT_ports_per_lag)</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="a376b6c4-0a1d-47d4-a51f-7af35ac2b31c" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>print(ports)</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="ba0e0f81-e2d9-4e05-9d79-38691d709f15" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>lag=&quot;LAG&quot;+&quot;_&quot;+&quot;_&quot;.join(device_FGT_ports_per_lag).replace(&quot;port&quot;,&quot;&quot;)</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="6f65022e-cdd6-464d-a85f-70c88a30d475" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>lag=lag[:13]</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="a3315285-948d-426f-b4fc-c19ddaed4f9a" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>print(lag)</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="8fc53a19-0e1f-4508-88c4-58cd1104aca0" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>console login and create vdom</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="e356bcca-9f6e-4f19-8933-ede37e75ada8" action="configureVdom" session="fortigate_FGT" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>-name [name]</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="ccdce3d0-2580-4e8f-b164-c12a9a8bd58d" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>assign interfaces to vdom</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="85183e48-f70a-4bec-82c9-82653cd578a0" action="for" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>port in device_FGT_ports_per_lag:</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="b5de5673-9372-4e15-9eb8-a31a399013e5" action="assignInterfacesToVdom" session="fortigate_FGT" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>-port [port] -name [name]</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="a0bb8f8a-d26f-4f71-978a-34981168a1fc" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>config LAG</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="061ca0dd-024a-486f-a9b4-6852fd78b6e7" action="configureLag" session="fortigate_FGT" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>-port [lag] -name [name] -ports [ports]</body>
                                                                                                                    </command>
                                                                                                                    <postProcessing>
                                                                                                                        <analysisRules>
                                                                                                                            <item>
                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                        <query>retCode()</query>
                                                                                                                                    </extractorProperties>
                                                                                                                                </extractorInfo>
                                                                                                                                <processorInfo ruleType="assert">
                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                        <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                        <actionsWhenTrue>
                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                    <message>For &quot;[device]&quot; config LAG on ports [device_FGT_ports_per_lag] is ok</message>
                                                                                                                                                </actionProperties>
                                                                                                                                            </item>
                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                            </item>
                                                                                                                                        </actionsWhenTrue>
                                                                                                                                        <actionsWhenFalse>
                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                    <message>For &quot;[device]&quot; config LAG is not ok</message>
                                                                                                                                                </actionProperties>
                                                                                                                                            </item>
                                                                                                                                        </actionsWhenFalse>
                                                                                                                                    </ruleProperties>
                                                                                                                                </processorInfo>
                                                                                                                            </item>
                                                                                                                        </analysisRules>
                                                                                                                    </postProcessing>
                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="2badc611-45e0-47f1-9ba8-27ea29f07164" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>console exit</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="53d635cb-b61d-45de-a126-ccbe0ca56a9d" action="consoleExit" session="fortigate_FGT" useFieldsInCommand="false">
                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="7b3746cb-2f24-4fd9-822e-d2d40e4c9a27" action="comment" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>close session</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="864249a7-6e2e-4c18-a146-e8f16aab624d" action="close" session="fortigate_FGT">
                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="0cc83eb4-bc51-42fd-84b3-87bdb78abb9b" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>Reinit dicts</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="ee65f85f-b4b7-4f70-8b95-042b1b7bb7e7" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>device_ports_per_lag=[]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="c25cfe84-c08b-460e-b093-17b7d3d29805" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>device_FGT_ports_per_lag=[]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="f7fa7e15-83c1-475a-ad34-26f1e2ff8e80" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_device_ports_per_lag=[]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="87a91f7a-3bd3-45ba-b298-688a9703eccd" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_device_FGT_ports_per_lag=[]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="c74a24c2-c55d-4ccf-a9cd-a2bf9841005e" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>device_ports=[]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="8de689f8-686e-435d-b185-9b4ccd39e994" action="if" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>device_lag_CN_ports != []:</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="c5ed255d-f56b-478d-a0ef-752de016d31d" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Find physical ports from LAG</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="6be16d0b-eb7d-4b0b-aa60-d4ce98d50fa5" action="for" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>port_item in device_lag_CN_ports:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="bdcd9c62-813a-4214-91d5-9c1ebb90729c" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>port_item=port_item[0]</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="950a6e16-fb0d-4713-853a-efd2b4673fd9" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(port_item)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="95579c8c-c8dc-4040-a98f-075e8582fea1" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                    <command>
                                                                                                        <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                                                                                    </command>
                                                                                                    <postProcessing>
                                                                                                        <analysisRules>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query sub="true">mapped/Json/items/*\\[topologyResourceId=&quot;[port_item]&quot;]/name</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="store">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                        <storageLocation>device_port</storageLocation>
                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query sub="true">mapped/Json/items/*\\[topologyResourceId=&quot;[port_item]&quot;]/inventoryParentResourceId</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="store">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                        <storageLocation>parent_port_id</storageLocation>
                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                        </analysisRules>
                                                                                                    </postProcessing>
                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                                                                                </item>
                                                                                                <item guid="8457bb9d-48c5-4078-8e8e-9bf1bd1d3931" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(parent_port_id, device_id)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="9fbb0a8b-622c-41e7-9d67-4a037e3e57d5" action="if" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>device_id == parent_port_id:</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="f3264632-1eeb-40ad-8cbc-437d7e147cd5" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>device_CN_ports.append(device_port)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="74f56903-dad5-4be3-88a4-f0b1336ce0c2" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(device_CN_ports)</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="12e3939c-5de6-4217-b498-13d368344752" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Determine device ports included in LAG on neighbor-device</body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="ae9f8a64-75a5-4bf4-af01-36c94ab3a99c" action="for" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>device_port in device_CN_ports:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="65f39e2b-2722-4ea8-a88c-c4b2a67b9195" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                    <command>
                                                                                                        <body>/velocity/api/inventory/v16/device/[device_id]/ports?limit=200</body>
                                                                                                    </command>
                                                                                                    <postProcessing>
                                                                                                        <analysisRules>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query sub="true">mapped/Json/ports/*\\[name=&quot;[device_port]&quot;]/connectedPortName</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="store">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                        <storageLocation>conn_port_CN_name</storageLocation>
                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="query">
                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                        <query sub="true">mapped/Json/ports/*\\[name=&quot;[device_port]&quot;]/connectedPortParentName</query>
                                                                                                                    </extractorProperties>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="store">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                        <storageLocation>conn_device_CN_name</storageLocation>
                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                        </analysisRules>
                                                                                                    </postProcessing>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="683c1334-6e3c-404a-8add-169ece12592f" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_port_CN_names.append(conn_port_CN_name)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="34bf6a0d-a977-4c98-bbbd-20baa4aa6d29" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_device_CN_names.append(conn_device_CN_name)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="896ed583-b45a-42cd-a02c-bd81f6f8b1a0" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>string=device_port+&quot; : &quot;+conn_port_CN_name +&quot; : &quot;+ conn_device_CN_name</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="522c8fc1-42b9-4c8f-9f04-e45a7295264d" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>device_CN_name_port.append(string)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="9d15b596-5a10-4c08-a450-8856b8fa1fef" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>string=&quot;&quot;</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/ports?limit=200" action.inherit="false"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="a7ff17e2-697a-42eb-8900-df154ce1c060" action="comment" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>Check device for multiple LAG connections and config LAG </body>
                                                                                    </command>
                                                                                    <nestedSteps>
                                                                                        <item guid="a1cedfe6-76c6-43f4-854c-63870b700a08" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>conn_device_CN_names=list(set(conn_device_CN_names))</body>
                                                                                            </command>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="9911d5f8-91e6-4868-a20c-25b45c538fc7" action="eval" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>print(conn_device_CN_names)</body>
                                                                                            </command>
                                                                                            <postProcessing>
                                                                                                <analysisRules>
                                                                                                    <item>
                                                                                                        <extractorInfo extractorType="none">
                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                        </extractorInfo>
                                                                                                        <processorInfo ruleType="message">
                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                <message> For device &quot;[device]&quot; found [len(conn_device_CN_names)] LAG connections</message>
                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                            </ruleProperties>
                                                                                                        </processorInfo>
                                                                                                        <skip>true</skip>
                                                                                                    </item>
                                                                                                </analysisRules>
                                                                                            </postProcessing>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                        <item guid="4b0d251f-be3c-4f92-a2a6-2bfb486090ab" action="for" useFieldsInCommand="false">
                                                                                            <command>
                                                                                                <body>conn_device_CN_name in conn_device_CN_names:</body>
                                                                                            </command>
                                                                                            <nestedSteps>
                                                                                                <item guid="1a394918-c7cd-450f-af6f-4d69839e306b" action="for" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>element in device_CN_name_port:</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="d0ed1222-cf17-47c7-918f-8cf879473121" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>print(conn_device_CN_name)</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="534706bf-ba6b-46fb-9d3f-3572ba8b0149" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>print(element.split(&quot;:&quot;)[2].strip())</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="c2fa6053-ee23-4b04-98d7-922dfc23be4e" action="if" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_device_CN_name == element.split(&quot;:&quot;)[2].strip():</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="0ecefd4d-cc65-48bf-944f-0b8fe606d543" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>device_CN_ports_per_lag.append(element.split(&quot;:&quot;)[0].strip())</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="09f1b7cc-d823-4257-a97c-7f68c2413d5d" action="eval" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>conn_device_CN_ports_per_lag.append(element.split(&quot;:&quot;)[1].strip())</body>
                                                                                                                    </command>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="eef837af-f225-4199-a6d5-0de5018511a7" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(device_CN_ports_per_lag)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="9c470388-4d8e-4916-a2de-1a6fa939bdd7" action="eval" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>print(conn_device_CN_ports_per_lag)</body>
                                                                                                    </command>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="530638c8-ba02-40e9-80ed-e06240db00c9" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>Check LAG connection on each neighbor device - message</body>
                                                                                                    </command>
                                                                                                    <postProcessing>
                                                                                                        <analysisRules>
                                                                                                            <item>
                                                                                                                <extractorInfo extractorType="none">
                                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                </extractorInfo>
                                                                                                                <processorInfo ruleType="message">
                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                        <message>---Checking LAG connections on connected device &quot;[conn_device_CN_name]&quot;...</message>
                                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                                    </ruleProperties>
                                                                                                                </processorInfo>
                                                                                                            </item>
                                                                                                        </analysisRules>
                                                                                                    </postProcessing>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="db5f0901-71f3-438a-9499-41483d06ae0e" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>Get device details</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="dcfcae60-7041-4f9f-8fa8-bdd2b524e17a" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                            <command>
                                                                                                                <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>device_console_ip_addr</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console Port&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>device_console_port</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;username&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>device_username</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;password&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>device_password</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[device]" action.inherit="false"/>
                                                                                                        </item>
                                                                                                        <item guid="eefe9b22-e7c3-41d4-bc49-fd980d9275c2" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                            <command>
                                                                                                                <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[conn_device_CN_name]</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;ipAddress&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_device_ipAddress</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_device_console_ip_addr</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;Console Port&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_device_console_port</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;username&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_device_username</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                <query>mapped/Json/devices/item/properties/item[name = &apos;password&apos;]/value</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_device_password</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>mapped/Json/devices/item/id</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_device_id</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>mapped/Json/devices/item/templateId</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_template_id</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[conn_device_CN_name]" action.inherit="false"/>
                                                                                                        </item>
                                                                                                        <item guid="69662dfd-1d55-4877-8725-1a8d683432fd" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                            <command>
                                                                                                                <body>/velocity/api/inventory/v16/template/[conn_template_id]</body>
                                                                                                            </command>
                                                                                                            <postProcessing>
                                                                                                                <analysisRules>
                                                                                                                    <item>
                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                <query>mapped/Json/name</query>
                                                                                                                            </extractorProperties>
                                                                                                                        </extractorInfo>
                                                                                                                        <processorInfo ruleType="store">
                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                <storageLocation>conn_template_name</storageLocation>
                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                            </ruleProperties>
                                                                                                                        </processorInfo>
                                                                                                                    </item>
                                                                                                                </analysisRules>
                                                                                                            </postProcessing>
                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/template/[conn_template_id]" action.inherit="false"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="c88047e0-7b9a-427e-bdc9-ac61554056bb" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>Config LAG on connection device</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="3ea5818f-2403-4e80-84a7-c9b972f6520d" action="if" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_template_name == &quot;Fortinet Switch&quot;:</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="f0f55e7f-d3db-4563-af55-8e477e59cd5a" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>info</body>
                                                                                                                    </command>
                                                                                                                    <postProcessing>
                                                                                                                        <analysisRules>
                                                                                                                            <item>
                                                                                                                                <extractorInfo extractorType="none">
                                                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                </extractorInfo>
                                                                                                                                <processorInfo ruleType="message">
                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                        <message> For device &quot;[conn_device_CN_name]&quot; ports [conn_device_CN_ports_per_lag] are included in LAG</message>
                                                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                                                    </ruleProperties>
                                                                                                                                </processorInfo>
                                                                                                                            </item>
                                                                                                                        </analysisRules>
                                                                                                                    </postProcessing>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="0d058026-a96e-4d4f-ba3f-1d4c14f2f247" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>open session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="59472822-78bb-43de-920f-6c60c68f3ff1" action="open" session="fortiswitch_CN" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>project://Fortiswitch_console/session_profiles/console.ffsp</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                    <completionProperties>
                                                                                                                                        <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                    </completionProperties>
                                                                                                                                </stepProperties>
                                                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                                    <ipAddress inherit="false">[conn_device_console_ip_addr]</ipAddress>
                                                                                                                                    <port inherit="false">[conn_device_console_port]</port>
                                                                                                                                </sessionProperties>
                                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                            </applicationProperties>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="44195df8-b210-4fb0-9bd0-2147d6676384" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>set parameters based on name convention</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="100daa31-53e9-4eb1-8d01-c4bc0a23ba39" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>name_tsw=&quot;LAG&quot;+&quot;_&quot;+&quot;_&quot;.join(conn_device_CN_ports_per_lag)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="5b51ed31-884f-44c3-a3a5-688aabfe05f8" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>ports_tsw=&quot; &quot;.join(conn_device_CN_ports_per_lag)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="d25568dd-69f4-470b-9dd6-a076f1f57d0c" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>mode=&quot;active&quot;</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="572c7197-43cc-4c2d-9428-0ca8aa0a6ca5" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>console login and set trunk</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="a670b681-45bf-4259-b240-c987c5e3a2f3" action="setTrunkModeLag" session="fortiswitch_CN" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>-name [name_tsw] -port [ports_tsw] -mode [mode]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>retCode()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                            <message>For &quot;[conn_device_CN_name]&quot; config LAG on ports [conn_device_CN_ports_per_lag] is ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                            <message>For &quot;[conn_device_CN_name]&quot; config LAG is not ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="7488618c-a327-43cc-89dc-e381b76ba7ad" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>get vlanId for LAG ports</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="7782509c-ca11-4ec1-89dd-de263a44dfef" action="for" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>conn_port in (conn_device_CN_ports_per_lag):</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="4d32d9fb-09bf-404b-9ee3-a7963b507570" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                    <command>
                                                                                                                                        <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                                                                                                                    </command>
                                                                                                                                    <postProcessing>
                                                                                                                                        <analysisRules>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                        <query sub="true">mapped/Json/items/*\\[name=&quot;[conn_port]&quot;]/vlanIds/item/id</query>
                                                                                                                                                    </extractorProperties>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                        <storageLocation>vlan_id</storageLocation>
                                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                        </analysisRules>
                                                                                                                                    </postProcessing>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="f377ec6d-e9f0-437a-9210-2eeb84aae3bc" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(vlan_id)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="74b69c8a-19a7-4a78-861d-8f1f77ca34c8" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>set native vlan to LAG port</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="fc769f73-67e3-4fee-9d65-978fb370f5b3" action="addPortToNativeVlan" session="fortiswitch_CN" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>-port [name_tsw] -vlan [vlan_id]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>retCode()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                            <message>For &quot;[conn_device_CN_name]&quot; set native-vlan [vlan_id] for port [name_tsw] is ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                            <message>For &quot;[conn_device_CN_name]&quot; set native-vlan is not ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="23b875a0-b75a-4b97-86cc-315e57cd8f3a" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>discover and update the LAG port </body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="044696f8-31bd-4330-9a97-a8e8a1106067" action="POST" session="velocity">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_device_id]/action?type=discover</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="message">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                <message> Waiting for discover operation on [conn_device_CN_name]</message>
                                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                                                                    <memberClasses>
                                                                                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                                                                    </memberClasses>
                                                                                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                                                                </httpHeader>
                                                                                                                            </applicationProperties>
                                                                                                                        </item>
                                                                                                                        <item guid="c1f50f03-5adc-44ef-a416-e63627125442" action="sleep">
                                                                                                                            <command>
                                                                                                                                <body>10</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="87481790-9d8a-42c3-8767-f8878923cd24" action="consoleLogin" session="fortiswitch_CN" useFieldsInCommand="false">
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>retCode()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                            <message>--- console login not ok; fail test</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                        <item guid="2a22ef3c-bb3d-49a4-8e3e-d0ccd711e5e4" action="command" session="fortiswitch_CN">
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>promptName()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>str(value) == &quot;prompt1&quot; </expression>
                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                            <message>For &quot;[conn_device_CN_name]&quot;: discover operation was successfully</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="RepeatStep">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                                                                <promptProperties>
                                                                                                                                    <stepPrompts>
                                                                                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">* login:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt2" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                                                                            <Content sub="true">* #</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt3">
                                                                                                                                            <Content>Password:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt4">
                                                                                                                                            <Content>--More-- </Content>
                                                                                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt5">
                                                                                                                                            <Content>Do you want to continue? (y/n)</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt6" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">* (*) #</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt7" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">*:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt8" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">*</Content>
                                                                                                                                        </item>
                                                                                                                                    </stepPrompts>
                                                                                                                                </promptProperties>
                                                                                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                </completionProperties>
                                                                                                                            </applicationProperties>
                                                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="87d3b83c-0130-4f78-83b4-6a2984631c32" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>console exit</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="042f2c2d-f9d8-495b-ad13-8e3f74fb3e12" action="consoleExit" session="fortiswitch_CN" useFieldsInCommand="false">
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="1d8d52b5-d032-4d6f-8073-2e4bbc4fed6f" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>close session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="399a2aa4-7719-4244-9356-462f54c125be" action="close" session="fortiswitch_CN">
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="4793cb53-43f7-459c-bd9e-1e72337ef59c" action="if" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_template_name == &quot;Arista Switch&quot;:</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="3f904f28-d5ae-4484-bc82-d803997b6397" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>info</body>
                                                                                                                    </command>
                                                                                                                    <postProcessing>
                                                                                                                        <analysisRules>
                                                                                                                            <item>
                                                                                                                                <extractorInfo extractorType="none">
                                                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                </extractorInfo>
                                                                                                                                <processorInfo ruleType="message">
                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                        <message> For device &quot;[conn_device_CN_name]&quot; ports [conn_device_CN_ports_per_lag] are included in LAG</message>
                                                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                                                    </ruleProperties>
                                                                                                                                </processorInfo>
                                                                                                                            </item>
                                                                                                                        </analysisRules>
                                                                                                                    </postProcessing>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="7b3a02dc-a9b6-4c05-9d57-8cc7b060df5b" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>open session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="96d65068-46d3-41aa-9b09-12b871efebc6" action="open" session="arista_CN" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>project://Arista_console/session_profiles/console.ffsp</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                    <completionProperties>
                                                                                                                                        <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                    </completionProperties>
                                                                                                                                </stepProperties>
                                                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                                    <ipAddress inherit="false">[conn_device_console_ip_addr]</ipAddress>
                                                                                                                                    <port inherit="false">[conn_device_console_port]</port>
                                                                                                                                </sessionProperties>
                                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                            </applicationProperties>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="44b148a1-2d3a-453b-b31d-e45958c73171" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>set parameters based on name convention</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="5b202b62-7871-4e05-992b-56de13dbdd79" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>number = 1</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="2cba9b1d-a3fc-43ab-9fce-f65f2450c6bd" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>ports_tsw=&quot;,&quot;.join(conn_device_CN_ports_per_lag)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="28853347-5a61-4a12-807c-f5fb5efc67f9" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>mode=&quot;active&quot;</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="b0bd5fec-5d93-4ca4-9e8e-57cbbffcd09d" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>console login and set port-channel</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="d6b7109b-4fb5-4daa-9d91-c646b43fce90" action="setSwitchPortChannel" session="arista_CN" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>-number [number] -interfaces [ports_tsw] -mode [mode]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>retCode()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                            <message>For &quot;[conn_device_CN_name]&quot; config LAG on ports [conn_device_CN_ports_per_lag] is ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                            <message>For &quot;[conn_device_CN_name]&quot; config LAG is not ok</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="4434c85f-9018-4866-a0f9-fde1bef48793" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>get vlanId for LAG ports</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="d71b6a5c-89c1-4244-955d-bf3006a23b29" action="for" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>conn_port in conn_device_CN_ports_per_lag:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="a779a9eb-9858-4b46-a790-82344c9c4b62" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                    <command>
                                                                                                                                        <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                                                                                                                    </command>
                                                                                                                                    <postProcessing>
                                                                                                                                        <analysisRules>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                        <query sub="true">mapped/Json/items/*\\[name=&quot;[conn_port]&quot;]/vlanIds/item/id</query>
                                                                                                                                                    </extractorProperties>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                        <storageLocation>vlan_id</storageLocation>
                                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                        <query sub="true">mapped/Json/items/*\\[name=&quot;[conn_port]&quot;]/vlanIds/item/isTagged</query>
                                                                                                                                                    </extractorProperties>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                        <storageLocation>vlan_id_type</storageLocation>
                                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                        </analysisRules>
                                                                                                                                    </postProcessing>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="a2fce309-dbc7-413e-987f-cac84d6f7c90" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>type(vlan_id)==str:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="8d779086-6b80-4a5f-aa1d-f44c2cdab14c" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>vlan_id=vlan_id.split()</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="7fc0df75-a2d2-4591-87f7-2a533f640d1b" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>type(vlan_id_type)==str:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="89395676-aaf2-4781-bace-a4a9d21ee4e9" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>vlan_id_type=vlan_id_type.split()</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="8c9742f5-8f5e-42dd-8715-4d7870e678c2" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(vlan_id)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="d43de8cd-df6d-48cf-a6da-f89db818b75b" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(vlan_id_type)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="4a8c4e92-ce9a-4c8b-9538-f515cd790b68" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>set native vlan to LAG port</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="edaa31f1-499b-4028-869d-ac78d734af0b" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>port_channel=&quot;port-channel&quot;+&quot; &quot;+str(number)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="9974070e-5df5-4203-85a5-f698ee07dbd5" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(port_channel)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="a0fd5b23-81e8-4510-bf4a-1219de5e577e" action="for" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>index in range(len(vlan_id)):</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="76b43bda-d3ce-4539-bda5-7a74095663d4" action="if" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>vlan_id_type[index]==&quot;false&quot;:</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="f4e6f9e7-af6e-46e3-919c-f8684cc94962" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>vlanId=vlan_id[index]</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="b1acf0a6-9c55-4aaa-9718-f4820b8c0edf" action="addPortToSingleVlan" session="arista_CN" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>-port [port_channel] -vlan [vlanId]</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>retCode()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                            <message>For &quot;[conn_device_CN_name]&quot; set native-vlan [vlan_id] for port [port_channel] is ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                            <message>For &quot;[conn_device_CN_name]&quot; set native-vlan is not ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="a95ae29f-609b-49c5-8d59-d28b97403614" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>vlan_id.remove(vlanId)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="05278de6-5374-4b68-8312-9ea900a26aac" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>set allowed vlans to LAG port if needed</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="82b86fa7-fed8-46db-9b38-186954ba7e39" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(vlan_id)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="786a3513-58ce-4088-bc95-974cdda8ea60" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>vlan_id != []:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="3ad99133-fa47-4b09-b2a4-d3556c57c187" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>vlanIds=&quot;,&quot;.join(vlan_id)</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="5121a241-6caa-46c0-b31f-42948f08253a" action="addPortToAllowedVlans" session="arista_CN" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>-port [port_channel] -vlan [vlanIds]</body>
                                                                                                                                    </command>
                                                                                                                                    <postProcessing>
                                                                                                                                        <analysisRules>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                        <query>retCode()</query>
                                                                                                                                                    </extractorProperties>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="assert">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                        <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                        <actionsWhenTrue>
                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                    <message>For &quot;[conn_device_CN_name]&quot; set allowed vlans [vlanIds] for port [port_channel] is ok</message>
                                                                                                                                                                </actionProperties>
                                                                                                                                                            </item>
                                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                            </item>
                                                                                                                                                        </actionsWhenTrue>
                                                                                                                                                        <actionsWhenFalse>
                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                    <message>For &quot;[conn_device_CN_name]&quot; set allowed vlans is not ok</message>
                                                                                                                                                                </actionProperties>
                                                                                                                                                            </item>
                                                                                                                                                            <item actionId="FailTest">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                            </item>
                                                                                                                                                        </actionsWhenFalse>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                        </analysisRules>
                                                                                                                                    </postProcessing>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="f31832a6-e31b-4e1a-9acd-24a455387c45" action="else" useFieldsInCommand="false">
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="f3c656f8-8180-4a77-b2ba-c20319ec2ce2" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>Insert steps here for when the expression evaluates to false</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="8126ed9b-2fe0-4f3d-ba3f-d80c85f422d0" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>discover and update the LAG port </body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="13986d9b-fea4-4fe1-b31c-b9b624f5e20f" action="POST" session="velocity">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_device_id]/action?type=discover</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="message">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                <message> Waiting for discover operation on [conn_device_CN_name]</message>
                                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                                                                    <memberClasses>
                                                                                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                                                                    </memberClasses>
                                                                                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                                                                </httpHeader>
                                                                                                                            </applicationProperties>
                                                                                                                        </item>
                                                                                                                        <item guid="8e7a942a-36f1-4c93-8934-f7703d104986" action="sleep" skip="true">
                                                                                                                            <command>
                                                                                                                                <body>20</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="f51269d2-496b-4f39-a090-73972bb5bfd1" action="consoleLogin" session="arista_CN" skip="true" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>-username [conn_device_username] -password [conn_device_password]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>retCode()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                            <message>--- console login not ok; fail test</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                        <item guid="c4fc3f5f-6113-4ba1-b91b-afccce5b3c7a" action="command" session="arista_CN" skip="true">
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>promptName()</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                <expression>str(value) == &quot;prompt1&quot; or str(value) ==&quot;prompt4&quot;</expression>
                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                            <message>For &quot;[conn_device_CN_name]&quot;: discover operation was successfully</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                                                                                        </actionProperties>
                                                                                                                                                    </item>
                                                                                                                                                    <item actionId="RepeatStep">
                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                                                    </item>
                                                                                                                                                </actionsWhenFalse>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                                                                <promptProperties>
                                                                                                                                    <stepPrompts>
                                                                                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">* login:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt2">
                                                                                                                                            <Content>Password:</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt3" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                                                                            <Content sub="true">*&gt;</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt4" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">*#</Content>
                                                                                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt5" MatchMethod="WILDCARD">
                                                                                                                                            <Content sub="true">*(*)#</Content>
                                                                                                                                        </item>
                                                                                                                                        <item name="prompt6"/>
                                                                                                                                    </stepPrompts>
                                                                                                                                </promptProperties>
                                                                                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                </completionProperties>
                                                                                                                            </applicationProperties>
                                                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                                                        </item>
                                                                                                                        <item guid="cd7f941d-b66a-4aad-94e5-181c61b22ba7" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>i=0</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="b8ef12bc-c109-4ab1-ac3f-ba3f15376121" action="while" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>i&lt;10:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="9f4d97b2-2047-4d8f-b1cf-44e280400714" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>i = i + 2</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="3ac2503d-4a7c-4960-be09-d0cd7220ebe0" action="sleep">
                                                                                                                                    <command>
                                                                                                                                        <body>3</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="b2396a62-48e2-4e75-9b3f-2e9faddb6857" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>print(i)</body>
                                                                                                                                    </command>
                                                                                                                                    <postProcessing>
                                                                                                                                        <analysisRules>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                        <query>responseLine()</query>
                                                                                                                                                    </extractorProperties>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="assert">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                        <expression>int(value) == 9</expression>
                                                                                                                                                        <actionsWhenTrue>
                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                    <message>For &quot;[conn_device_CN_name]&quot;: discover operation was successfully</message>
                                                                                                                                                                </actionProperties>
                                                                                                                                                            </item>
                                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                            </item>
                                                                                                                                                        </actionsWhenTrue>
                                                                                                                                                        <actionsWhenFalse>
                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                                    <message>--- discover operation is still in progress...</message>
                                                                                                                                                                </actionProperties>
                                                                                                                                                            </item>
                                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                            </item>
                                                                                                                                                        </actionsWhenFalse>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                        </analysisRules>
                                                                                                                                    </postProcessing>
                                                                                                                                    <eventHandlers>
                                                                                                                                        <item name="OnQueryExtractorInvalidQuery">
                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Information">
                                                                                                                                                    <message>{auto_message_wait}</message>
                                                                                                                                                </actionProperties>
                                                                                                                                            </item>
                                                                                                                                            <item actionId="RepeatStep">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup"/>
                                                                                                                                            </item>
                                                                                                                                        </item>
                                                                                                                                        <item name="OnNoMatchesFound">
                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Information">
                                                                                                                                                    <message>{auto_message_wait}</message>
                                                                                                                                                </actionProperties>
                                                                                                                                            </item>
                                                                                                                                            <item actionId="RepeatStep">
                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup"/>
                                                                                                                                            </item>
                                                                                                                                        </item>
                                                                                                                                    </eventHandlers>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="e960c561-c4a2-41e2-bfdd-cb88f3d45a3f" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>console exit</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="12e002b9-b86e-4558-98c8-f25ab570f416" action="consoleExit" session="arista_CN" useFieldsInCommand="false">
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="2b9e99d2-2cb7-4114-ab8f-85aee7634bfe" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>close session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="cc6f9a13-e24c-4c0f-babf-d6aadee7d532" action="close" session="arista">
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="8979f13c-0c50-413b-b560-8c276d79c628" action="if" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_template_name == &quot;Lepton ColdFusion Switch&quot;:</body>
                                                                                                            </command>
                                                                                                            <nestedSteps>
                                                                                                                <item guid="b70d4d5b-5e65-4092-a382-6b58455f6654" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>open session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="b4eed26c-2516-4829-9e6d-7d4795c05211" action="open" session="lepton_CN" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>project://Lepton_ssh/session_profiles/ssh.ffsp</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                <sessionProperties type="com.fnfr.svt.applications.ssh.documents.SSHProperties">
                                                                                                                                    <ipAddress inherit="false">[conn_device_ipAddress]</ipAddress>
                                                                                                                                    <user inherit="false">[conn_device_username]</user>
                                                                                                                                    <password inherit="false" masked="false">[conn_device_password]</password>
                                                                                                                                </sessionProperties>
                                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                            </applicationProperties>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="583c4cfc-a8a9-4fae-b3bd-c8d4b4abeadd" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>ssh login and get connected port</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="9a1f02bc-b959-4559-bc6a-277e75beec8c" action="for" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>conn_port_name in conn_device_CN_ports_per_lag:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="42a50850-3e9b-4a90-a559-26cf8002b6eb" action="getConnectedPort" session="lepton_CN" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>-port [conn_port_name]</body>
                                                                                                                                    </command>
                                                                                                                                    <postProcessing>
                                                                                                                                        <analysisRules>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                        <query>responseLine()</query>
                                                                                                                                                    </extractorProperties>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                        <storageLocation>conn_port_lepton</storageLocation>
                                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                        </analysisRules>
                                                                                                                                    </postProcessing>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="0a26cc07-98ca-488e-84e8-ccbab8506a84" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(conn_port_lepton)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="de48067b-b573-41a4-9f0d-ccceec3d5fbf" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>len(conn_port_lepton)==3:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="6cfd269a-31da-4d82-8262-04f8e35e3ed2" action="eval" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>conn_port_lepton=conn_port_lepton[:2]+&quot;0&quot;+conn_port_lepton[2:]</body>
                                                                                                                                    </command>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="c1e5f8f5-1adc-46a8-80cf-91a76aae77ec" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(conn_port_lepton)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="774ee735-8e0a-4147-8a7a-dafe47a740ad" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>check neighbor-device on lepton side</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="ae31b0cd-d0b4-4150-b8ef-2e953574e24f" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_device_id]/ports?limit=200</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query sub="true">mapped/Json/ports/*\\[name=&quot;[conn_port_lepton]&quot;]/connectedPortName</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_port_name</storageLocation>
                                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query sub="true">mapped/Json/ports/*\\[name=&quot;[conn_port_lepton]&quot;]/connectedPortParentName</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_name</storageLocation>
                                                                                                                                                <storeInAList>true</storeInAList>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_device_id]/ports?limit=200" action.inherit="false"/>
                                                                                                                        </item>
                                                                                                                        <item guid="23bfa545-f1c0-42c8-afc0-0b309f44cbca" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(conn_lepton_port_name, conn_lepton_device_name)</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="message">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                <message>--- found lepton device connection: [conn_lepton_device_name] on port [conn_port_lepton]</message>
                                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="62a16f9e-a6b9-40bc-bad4-73957e1e0272" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                            <command>
                                                                                                                                <body>velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[conn_lepton_device_name]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>mapped/Json/devices/item/id</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_id</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>mapped/Json/devices/item/templateId</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_template_id</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="velocity/api/inventory/v16/devices?includeProperties=true&amp;searchString=[conn_lepton_device_name]" action.inherit="false"/>
                                                                                                                        </item>
                                                                                                                        <item guid="2ba57146-4beb-4b80-a8dd-3d33cd7d5061" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_lepton_device_id]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>mapped/Json/properties/*[name=&quot;ipAddress&quot;]/value</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_ip_addr</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>mapped/Json/properties/*[name=&quot;Console&quot;]/value</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_console_ip_addr</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>mapped/Json/properties/*[name=&quot;Console Port&quot;]/value</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_console_port</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>mapped/Json/properties/*[name=&quot;username&quot;]/value</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_username</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                <query>mapped/Json/properties/*[name=&quot;password&quot;]/value</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_device_password</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/device/[conn_lepton_device_id]" action.inherit="false"/>
                                                                                                                        </item>
                                                                                                                        <item guid="624f3f72-7a61-478b-b860-b01c1c59adbb" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                            <command>
                                                                                                                                <body>/velocity/api/inventory/v16/template/[conn_lepton_template_id]</body>
                                                                                                                            </command>
                                                                                                                            <postProcessing>
                                                                                                                                <analysisRules>
                                                                                                                                    <item>
                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                <query>mapped/Json/name</query>
                                                                                                                                            </extractorProperties>
                                                                                                                                        </extractorInfo>
                                                                                                                                        <processorInfo ruleType="store">
                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                <storageLocation>conn_lepton_template_name</storageLocation>
                                                                                                                                                <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                            </ruleProperties>
                                                                                                                                        </processorInfo>
                                                                                                                                    </item>
                                                                                                                                </analysisRules>
                                                                                                                            </postProcessing>
                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/inventory/v16/template/[conn_lepton_template_id]" action.inherit="false"/>
                                                                                                                        </item>
                                                                                                                        <item guid="553063d3-a5a3-4ca3-9647-f8a5475cd629" action="eval" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>print(conn_lepton_template_name)</body>
                                                                                                                            </command>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="ecf37a38-166c-482c-9a0b-eb0b5d97ec33" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>login to lepton neighbor-device and config lag</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="c3c713ee-2adf-4d86-9caa-a12d9ca40f1d" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>conn_lepton_template_name == &quot;Fortinet Switch&quot;:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="c3c16b4c-3613-46dc-b4df-1c69c9db6b8d" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>info</body>
                                                                                                                                    </command>
                                                                                                                                    <postProcessing>
                                                                                                                                        <analysisRules>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="none">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="message">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                        <message> For device &quot;[conn_lepton_device_name]&quot; ports [conn_lepton_port_names] are included in LAG</message>
                                                                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                        </analysisRules>
                                                                                                                                    </postProcessing>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="385349b9-953e-40ac-8248-0d1042b337e5" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>open session</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="596c1f9c-d850-4fb2-b79c-6597c1a90c9e" action="open" session="fortiswitch_lepton_CN" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>project://Fortiswitch_console/session_profiles/console.ffsp</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                                    <completionProperties>
                                                                                                                                                        <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                                    </completionProperties>
                                                                                                                                                </stepProperties>
                                                                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                                                    <ipAddress inherit="false">[conn_lepton_device_console_ip_addr]</ipAddress>
                                                                                                                                                    <port inherit="false">[conn_lepton_device_console_port]</port>
                                                                                                                                                </sessionProperties>
                                                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                            </applicationProperties>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="5be823e6-bf9d-422a-87cb-c6effbabc3dc" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>set parameters based on name convention</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="fbf3aa35-5fbb-4d37-bc75-83db9e3f6615" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>name_tsw=&quot;LAG&quot;+&quot;_&quot;+&quot;_&quot;.join(conn_lepton_port_name)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="a8e581bf-c3ef-40e9-b982-2c3c20c92701" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>ports_tsw=&quot; &quot;.join(conn_lepton_port_name)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="bc5daa37-5f4e-49ef-9a26-491a1458be9f" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>mode=&quot;active&quot;</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="3d0cb08a-c3bf-432c-9375-bf00ab730db6" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>console login and set trunk</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="61b299c2-81c7-4aea-b813-f05cc9bb3e5e" action="setTrunkModeLag" session="fortiswitch_lepton_CN" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>-name [name_tsw] -port [ports_tsw] -mode [mode]</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>retCode()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot; config LAG on ports [conn_lepton_port_name] is ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot; config LAG is not ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="ce8a9be9-eb54-43b5-b7a9-98fd8821063b" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>get vlanId for LAG ports</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="3518ba07-78e7-48ea-acb5-1c1ce8ba8bb3" action="for" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>conn_port in (conn_lepton_port_name):</body>
                                                                                                                                            </command>
                                                                                                                                            <nestedSteps>
                                                                                                                                                <item guid="d0928a8e-4b5c-4b5c-91bb-e06e73eb1926" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                                    <command>
                                                                                                                                                        <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                                                                                                                                    </command>
                                                                                                                                                    <postProcessing>
                                                                                                                                                        <analysisRules>
                                                                                                                                                            <item>
                                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                        <query sub="true">mapped/Json/items/*\\[name=&quot;[conn_port]&quot;]/vlanIds/item/id</query>
                                                                                                                                                                    </extractorProperties>
                                                                                                                                                                </extractorInfo>
                                                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                                        <storageLocation>vlan_id</storageLocation>
                                                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                                    </ruleProperties>
                                                                                                                                                                </processorInfo>
                                                                                                                                                            </item>
                                                                                                                                                        </analysisRules>
                                                                                                                                                    </postProcessing>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                                                                                                                                </item>
                                                                                                                                            </nestedSteps>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="52b01edb-0991-4107-bace-9a4b99b1ecc7" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>print(vlan_id)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="f7c2d086-0413-4e27-9dd2-a3fb98c442aa" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>set native vlan on LAG port</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="fa82e99b-d4d3-4b3a-8fa3-ba6e4de18022" action="addPortToNativeVlan" session="fortiswitch_lepton_CN" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>-port [name_tsw] -vlan [vlan_id]</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>retCode()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                            <message>For &quot;[conn_device_name]&quot; set native-vlan [vlan_id] for port [name_tsw] is ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                            <message>For &quot;[conn_device_name]&quot; set native-valn is not ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="ca10506a-0173-45f1-a4f1-6de3b79fff08" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>discover and update the LAG port </body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="a0fe8d8d-529e-4c3a-b63e-eb652fb78dd2" action="POST" session="velocity">
                                                                                                                                            <command>
                                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_lepton_device_id]/action?type=discover</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="message">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                                <message> Waiting for discover operation on [conn_lepton_device_name]</message>
                                                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[conn_lepton_device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                                                                                    <memberClasses>
                                                                                                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                                                                                    </memberClasses>
                                                                                                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                                                                                </httpHeader>
                                                                                                                                            </applicationProperties>
                                                                                                                                        </item>
                                                                                                                                        <item guid="4fe417e1-2b89-47e9-bd1f-0e8d9049bb05" action="sleep">
                                                                                                                                            <command>
                                                                                                                                                <body>10</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="9547d42d-2bae-4c3d-96f2-ae0174f8c4ca" action="consoleLogin" session="fortiswitch_lepton_CN" useFieldsInCommand="false">
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>retCode()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                            <message>--- console login not ok; fail test</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="62f5cb4b-1437-4646-b359-ba21f0dbc0bb" action="command" session="fortiswitch_lepton_CN">
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                                <query>promptName()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>str(value) == &quot;prompt1&quot; </expression>
                                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot;: discover operation was successfully</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="RepeatStep">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                                                                                <promptProperties>
                                                                                                                                                    <stepPrompts>
                                                                                                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">* login:</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt2" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                                                                                            <Content sub="true">* #</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt3">
                                                                                                                                                            <Content>Password:</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt4">
                                                                                                                                                            <Content>--More-- </Content>
                                                                                                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt5">
                                                                                                                                                            <Content>Do you want to continue? (y/n)</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt6" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">* (*) #</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt7" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">*:</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt8" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">*</Content>
                                                                                                                                                        </item>
                                                                                                                                                    </stepPrompts>
                                                                                                                                                </promptProperties>
                                                                                                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                                </completionProperties>
                                                                                                                                            </applicationProperties>
                                                                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="752f06c2-fe1a-4206-a556-286167adce32" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>console exit</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="0834f086-fc0e-436c-bde3-63d44fcf322f" action="consoleExit" session="fortiswitch_lepton_CN" useFieldsInCommand="false">
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="e117e77b-00dc-4919-a6fc-f9630ec98e70" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>close session</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="d05207a4-8c64-4e79-9c91-3a7e14641e7a" action="close" session="fortiswitch_lepton_CN">
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="5a8efb7d-77ec-4a95-8118-79a4e680d70c" action="close" session="lepton_CN">
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                        <item guid="04aad76c-e0df-42db-8600-dc80018da0a8" action="if" useFieldsInCommand="false">
                                                                                                                            <command>
                                                                                                                                <body>conn_lepton_template_name == &quot;Arista Switch&quot;:</body>
                                                                                                                            </command>
                                                                                                                            <nestedSteps>
                                                                                                                                <item guid="d0e96b82-3bd9-4f46-8968-8d75b4aad4a5" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>info</body>
                                                                                                                                    </command>
                                                                                                                                    <postProcessing>
                                                                                                                                        <analysisRules>
                                                                                                                                            <item>
                                                                                                                                                <extractorInfo extractorType="none">
                                                                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                                </extractorInfo>
                                                                                                                                                <processorInfo ruleType="message">
                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                        <message> For device &quot;[conn_lepton_device_name]&quot; ports [conn_lepton_port_name] are included in LAG</message>
                                                                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                                                                    </ruleProperties>
                                                                                                                                                </processorInfo>
                                                                                                                                            </item>
                                                                                                                                        </analysisRules>
                                                                                                                                    </postProcessing>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="07656c24-20da-4296-b0bb-939e57d8dfac" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>open session</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="0d81429c-3db8-400b-881c-9dc40a4f20aa" action="open" session="arista_lepton_CN" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>project://Arista_console/session_profiles/console.ffsp</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                                                                                <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                                <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                                                                                    <ipAddress inherit="false">[conn_lepton_device_console_ip_addr]</ipAddress>
                                                                                                                                                    <port inherit="false">[conn_lepton_device_console_port]</port>
                                                                                                                                                    <TerminalProperties>
                                                                                                                                                        <stepDefaults>
                                                                                                                                                            <completionProperties>
                                                                                                                                                                <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                                            </completionProperties>
                                                                                                                                                        </stepDefaults>
                                                                                                                                                    </TerminalProperties>
                                                                                                                                                </sessionProperties>
                                                                                                                                                <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                            </applicationProperties>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="8bf7f2de-af56-4115-87ff-d2e2330cf988" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>set parameters based on name convention</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="a760ceac-5367-4dc6-ac97-0c48473b4b05" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>number = &quot;10&quot;</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="02185e75-85a7-42c5-9bc9-ef4555267890" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>ports_arista=&quot;,&quot;.join(conn_lepton_port_name)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="cf0a8b7e-6906-47fc-97d1-660eb32f0404" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>print(ports_arista)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="a92c66ea-fb88-4c93-82d8-260bab1db002" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>mode=&quot;active&quot;</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="9703b76f-57e9-402a-9697-542131dc4933" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>console login and set port-channel</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="39b7e227-4c60-4486-b1d6-960d629a1f50" action="setSwitchPortChannel" session="arista_lepton_CN" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>-number [number] -interfaces [ports_arista] -mode [mode]</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>retCode()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot; config LAG on ports [conn_lepton_port_name] is ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot; config LAG is not ok</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="f706cb55-9a2f-4af4-9708-58c77bd49c79" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>get vlanId for LAG ports</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="6baff72d-9ac2-42e5-8656-df394c9f59b2" action="for" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>conn_port in (conn_lepton_port_name):</body>
                                                                                                                                            </command>
                                                                                                                                            <nestedSteps>
                                                                                                                                                <item guid="ef2cc7b2-a314-4f47-bfb8-7db7119b0f33" action="GET" session="velocity" estimatedStepExecutionTime="0.305">
                                                                                                                                                    <command>
                                                                                                                                                        <body>/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200</body>
                                                                                                                                                    </command>
                                                                                                                                                    <postProcessing>
                                                                                                                                                        <analysisRules>
                                                                                                                                                            <item>
                                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                        <query sub="true">mapped/Json/items/*\\[name=&quot;[conn_port]&quot;]/vlanIds/item/id</query>
                                                                                                                                                                    </extractorProperties>
                                                                                                                                                                </extractorInfo>
                                                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                                        <storageLocation>vlan_id</storageLocation>
                                                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                                    </ruleProperties>
                                                                                                                                                                </processorInfo>
                                                                                                                                                            </item>
                                                                                                                                                            <item>
                                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                        <query sub="true">mapped/Json/items/*\\[name=&quot;[conn_port]&quot;]/vlanIds/item/isTagged</query>
                                                                                                                                                                    </extractorProperties>
                                                                                                                                                                </extractorInfo>
                                                                                                                                                                <processorInfo ruleType="store">
                                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.StoreProcessorPropertyGroup">
                                                                                                                                                                        <storageLocation>vlan_id_type</storageLocation>
                                                                                                                                                                        <responseValue type="com.fnfr.documents.PropertyBoolean">false</responseValue>
                                                                                                                                                                        <variable type="com.fnfr.documents.PropertyBoolean">true</variable>
                                                                                                                                                                        <secret type="com.fnfr.documents.PropertyBoolean">false</secret>
                                                                                                                                                                    </ruleProperties>
                                                                                                                                                                </processorInfo>
                                                                                                                                                            </item>
                                                                                                                                                        </analysisRules>
                                                                                                                                                    </postProcessing>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" httpMethod="GET" httpMethod.inherit="false" action="/velocity/api/reservation/v18/reservation/[reservationId]/resources?limit=200" action.inherit="false"/>
                                                                                                                                                </item>
                                                                                                                                            </nestedSteps>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="e74efe93-45b8-4ff3-8607-a3473beca3ed" action="if" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>type(vlan_id)==str:</body>
                                                                                                                                            </command>
                                                                                                                                            <nestedSteps>
                                                                                                                                                <item guid="c0a61bda-b491-426a-8fcc-b4cd1c1b403c" action="eval" useFieldsInCommand="false">
                                                                                                                                                    <command>
                                                                                                                                                        <body>vlan_id=vlan_id.split()</body>
                                                                                                                                                    </command>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                            </nestedSteps>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="d878ffa1-80f0-4efd-8603-3669e60a0f3c" action="if" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>type(vlan_id_type)==str:</body>
                                                                                                                                            </command>
                                                                                                                                            <nestedSteps>
                                                                                                                                                <item guid="d2745b6b-4a5a-449b-a25d-3e49fc95403f" action="eval" useFieldsInCommand="false">
                                                                                                                                                    <command>
                                                                                                                                                        <body>vlan_id_type=vlan_id_type.split()</body>
                                                                                                                                                    </command>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                            </nestedSteps>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="6a57256a-3003-4bcd-924e-42b7f4f3f9f8" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>print(vlan_id)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="cec271d0-594f-48ab-b6a4-c467260d9283" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>print(vlan_id_type)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="a852255d-391f-43cf-97cc-d7c0bcb40f37" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>set native vlan to LAG port</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="f2206b2a-c0f4-49f9-8a1a-1a03a5eaabb6" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>port_channel=&quot;port-channel&quot;+&quot; &quot;+number</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="0e1a7e7f-2c52-472d-a45f-716c8d9cb437" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>print(port_channel)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="d53b0a9a-14d2-4f0a-ae7f-a7fcfb81de09" action="for" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>index in range(len(vlan_id)):</body>
                                                                                                                                            </command>
                                                                                                                                            <nestedSteps>
                                                                                                                                                <item guid="b875fc47-a978-4b3b-8eea-8221ec131bae" action="if" useFieldsInCommand="false">
                                                                                                                                                    <command>
                                                                                                                                                        <body>vlan_id_type[index]==&quot;false&quot;:</body>
                                                                                                                                                    </command>
                                                                                                                                                    <nestedSteps>
                                                                                                                                                        <item guid="7c171183-2f5e-4f6a-bbb0-85e7d326d6fd" action="eval" useFieldsInCommand="false">
                                                                                                                                                            <command>
                                                                                                                                                                <body>vlanId=vlan_id[index]</body>
                                                                                                                                                            </command>
                                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                        </item>
                                                                                                                                                        <item guid="2cdf2727-dcac-4e40-976e-7dfb037e209c" action="addPortToSingleVlan" session="arista_lepton_CN" useFieldsInCommand="false">
                                                                                                                                                            <command>
                                                                                                                                                                <body>-port [port_channel] -vlan [vlanId]</body>
                                                                                                                                                            </command>
                                                                                                                                                            <postProcessing>
                                                                                                                                                                <analysisRules>
                                                                                                                                                                    <item>
                                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                                <query>retCode()</query>
                                                                                                                                                                            </extractorProperties>
                                                                                                                                                                        </extractorInfo>
                                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                                <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot; set native-vlan [vlanId] for port [port_channel] is ok</message>
                                                                                                                                                                                        </actionProperties>
                                                                                                                                                                                    </item>
                                                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                                    </item>
                                                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot; set native-vlan is not ok</message>
                                                                                                                                                                                        </actionProperties>
                                                                                                                                                                                    </item>
                                                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                                    </item>
                                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                                            </ruleProperties>
                                                                                                                                                                        </processorInfo>
                                                                                                                                                                    </item>
                                                                                                                                                                </analysisRules>
                                                                                                                                                            </postProcessing>
                                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                                        </item>
                                                                                                                                                        <item guid="612b0bcf-bc2b-4845-80f8-ca5da1bbb569" action="eval" useFieldsInCommand="false">
                                                                                                                                                            <command>
                                                                                                                                                                <body>vlan_id.remove(vlanId)</body>
                                                                                                                                                            </command>
                                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                        </item>
                                                                                                                                                    </nestedSteps>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                            </nestedSteps>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="e510f381-7e01-4a6a-931f-6c7514afb4b5" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>set allowed vlans to LAG port if needed</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="d74f0130-b245-40da-ab92-db57d2fdc2c5" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>print(vlan_id)</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="29aa18c3-11bb-4c5f-9673-571606518c14" action="if" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>vlan_id != []:</body>
                                                                                                                                            </command>
                                                                                                                                            <nestedSteps>
                                                                                                                                                <item guid="c0c74947-7745-4d92-bcd4-f297ac484db8" action="eval" useFieldsInCommand="false">
                                                                                                                                                    <command>
                                                                                                                                                        <body>vlanIds=&quot;,&quot;.join(vlan_id)</body>
                                                                                                                                                    </command>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                                <item guid="b70fb233-6b54-4838-8b93-5932410c77a4" action="addPortToAllowedVlans" session="arista_lepton_CN" useFieldsInCommand="false">
                                                                                                                                                    <command>
                                                                                                                                                        <body>-port [port_channel] -vlan [vlanIds]</body>
                                                                                                                                                    </command>
                                                                                                                                                    <postProcessing>
                                                                                                                                                        <analysisRules>
                                                                                                                                                            <item>
                                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                        <query>retCode()</query>
                                                                                                                                                                    </extractorProperties>
                                                                                                                                                                </extractorInfo>
                                                                                                                                                                <processorInfo ruleType="assert">
                                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                        <expression>value == &quot;TRUE&quot;</expression>
                                                                                                                                                                        <actionsWhenTrue>
                                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                                    <message>For &quot;[conn_lepton_device_name]&quot; set allowed vlans [vlanIds] for port [port_channel] is ok</message>
                                                                                                                                                                                </actionProperties>
                                                                                                                                                                            </item>
                                                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                            </item>
                                                                                                                                                                        </actionsWhenTrue>
                                                                                                                                                                        <actionsWhenFalse>
                                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                                    <message>For &quot;[conn_lepton_device_name]&quot; set allowed vlans is not ok</message>
                                                                                                                                                                                </actionProperties>
                                                                                                                                                                            </item>
                                                                                                                                                                            <item actionId="FailTest">
                                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                            </item>
                                                                                                                                                                        </actionsWhenFalse>
                                                                                                                                                                    </ruleProperties>
                                                                                                                                                                </processorInfo>
                                                                                                                                                            </item>
                                                                                                                                                        </analysisRules>
                                                                                                                                                    </postProcessing>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                                </item>
                                                                                                                                            </nestedSteps>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="e7d47391-6c94-461f-9569-67631e49cc88" action="else" useFieldsInCommand="false">
                                                                                                                                            <nestedSteps>
                                                                                                                                                <item guid="3c0278ac-9444-4a87-92a9-261fe38f7495" action="comment" useFieldsInCommand="false">
                                                                                                                                                    <command>
                                                                                                                                                        <body>Insert steps here for when the expression evaluates to false</body>
                                                                                                                                                    </command>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                            </nestedSteps>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="3c1fd692-2659-4676-8ae9-d87d696f65cc" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>discover and update the LAG port </body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="343bc6e5-830e-4c27-9fd3-9d26429b4edc" action="POST" session="velocity">
                                                                                                                                            <command>
                                                                                                                                                <body>/velocity/api/inventory/v16/device/[conn_lepton_device_id]/action?type=discover</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="none">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="message">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                                                                                <message> Waiting for discover operation on [conn_lepton_device_name]</message>
                                                                                                                                                                <tag sub="false" defaultValue=""/>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[conn_lepton_device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                                                                                <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                                                                                <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                                                                                    <memberClasses>
                                                                                                                                                        <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                                                                                    </memberClasses>
                                                                                                                                                    <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                                                                                </httpHeader>
                                                                                                                                            </applicationProperties>
                                                                                                                                        </item>
                                                                                                                                        <item guid="779eef3a-9303-4418-9c57-d7ba3c5eeac5" action="sleep" skip="true">
                                                                                                                                            <command>
                                                                                                                                                <body>20</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="ced09137-7687-4847-a784-5b25aa909643" action="consoleLogin" session="arista_lepton_CN" skip="true" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>-username [conn_lepton_device_username] -password [conn_lepton_device_password]</body>
                                                                                                                                            </command>
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                                                                                                                <query>retCode()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>str(value) == &quot;TRUE&quot;</expression>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup">
                                                                                                                                                                            <message>--- console login not ok; fail test</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="FailTest">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="611ca3f3-30be-4dfc-a6c4-7d5b7af9f411" action="command" session="arista_lepton_CN" skip="true">
                                                                                                                                            <postProcessing>
                                                                                                                                                <analysisRules>
                                                                                                                                                    <item>
                                                                                                                                                        <extractorInfo extractorType="query">
                                                                                                                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                                <query>promptName()</query>
                                                                                                                                                            </extractorProperties>
                                                                                                                                                        </extractorInfo>
                                                                                                                                                        <processorInfo ruleType="assert">
                                                                                                                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                <expression>str(value) == &quot;prompt1&quot; or str(value) ==&quot;prompt4&quot;</expression>
                                                                                                                                                                <actionsWhenTrue>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                            <message>For &quot;[conn_lepton_device_name]&quot;: discover operation was successfully</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenTrue>
                                                                                                                                                                <actionsWhenFalse>
                                                                                                                                                                    <item actionId="DeclareExecutionIssue">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                                            <message>--- discover operation is still in progress...</message>
                                                                                                                                                                        </actionProperties>
                                                                                                                                                                    </item>
                                                                                                                                                                    <item actionId="RepeatStep">
                                                                                                                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                                                                                    </item>
                                                                                                                                                                </actionsWhenFalse>
                                                                                                                                                            </ruleProperties>
                                                                                                                                                        </processorInfo>
                                                                                                                                                    </item>
                                                                                                                                                </analysisRules>
                                                                                                                                            </postProcessing>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                                                                                <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                                                                                <promptProperties>
                                                                                                                                                    <stepPrompts>
                                                                                                                                                        <item name="prompt1" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">* login:</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt2">
                                                                                                                                                            <Content>Password:</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt3" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                                                                                            <Content sub="true">*&gt;</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt4" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">*#</Content>
                                                                                                                                                            <MoreNextCommand> \\r</MoreNextCommand>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt5" MatchMethod="WILDCARD">
                                                                                                                                                            <Content sub="true">*(*)#</Content>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="prompt6"/>
                                                                                                                                                    </stepPrompts>
                                                                                                                                                </promptProperties>
                                                                                                                                                <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                                                                                    <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                                                                                </completionProperties>
                                                                                                                                            </applicationProperties>
                                                                                                                                            <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="5bedc4d0-7566-4db3-a85b-98cb42a750d0" action="eval" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>i=0</body>
                                                                                                                                            </command>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                        <item guid="43045ad2-e23d-4a16-914d-e77cedf1ca9e" action="while" useFieldsInCommand="false">
                                                                                                                                            <command>
                                                                                                                                                <body>i&lt;10:</body>
                                                                                                                                            </command>
                                                                                                                                            <nestedSteps>
                                                                                                                                                <item guid="533012ce-1761-4880-a0af-3123d1e17786" action="eval" useFieldsInCommand="false">
                                                                                                                                                    <command>
                                                                                                                                                        <body>i = i + 2</body>
                                                                                                                                                    </command>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                                <item guid="d0c7c442-2114-4fac-84e6-d85675ce2fbf" action="sleep">
                                                                                                                                                    <command>
                                                                                                                                                        <body>3</body>
                                                                                                                                                    </command>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                                <item guid="11251023-ec82-413f-b95b-e0a7e6ccb67d" action="eval" useFieldsInCommand="false">
                                                                                                                                                    <command>
                                                                                                                                                        <body>print(i)</body>
                                                                                                                                                    </command>
                                                                                                                                                    <postProcessing>
                                                                                                                                                        <analysisRules>
                                                                                                                                                            <item>
                                                                                                                                                                <extractorInfo extractorType="query">
                                                                                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                                                                                        <query>responseLine()</query>
                                                                                                                                                                    </extractorProperties>
                                                                                                                                                                </extractorInfo>
                                                                                                                                                                <processorInfo ruleType="assert">
                                                                                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                                                                                        <expression>int(value) == 9</expression>
                                                                                                                                                                        <actionsWhenTrue>
                                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                                                                                    <message>For &quot;[conn_lepton_device_name]&quot;: discover operation was successfully</message>
                                                                                                                                                                                </actionProperties>
                                                                                                                                                                            </item>
                                                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                            </item>
                                                                                                                                                                        </actionsWhenTrue>
                                                                                                                                                                        <actionsWhenFalse>
                                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                                                                                    <message>--- discover operation is still in progress...</message>
                                                                                                                                                                                </actionProperties>
                                                                                                                                                                            </item>
                                                                                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                                            </item>
                                                                                                                                                                        </actionsWhenFalse>
                                                                                                                                                                    </ruleProperties>
                                                                                                                                                                </processorInfo>
                                                                                                                                                            </item>
                                                                                                                                                        </analysisRules>
                                                                                                                                                    </postProcessing>
                                                                                                                                                    <eventHandlers>
                                                                                                                                                        <item name="OnQueryExtractorInvalidQuery">
                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Information">
                                                                                                                                                                    <message>{auto_message_wait}</message>
                                                                                                                                                                </actionProperties>
                                                                                                                                                            </item>
                                                                                                                                                            <item actionId="RepeatStep">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup"/>
                                                                                                                                                            </item>
                                                                                                                                                        </item>
                                                                                                                                                        <item name="OnNoMatchesFound">
                                                                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Information">
                                                                                                                                                                    <message>{auto_message_wait}</message>
                                                                                                                                                                </actionProperties>
                                                                                                                                                            </item>
                                                                                                                                                            <item actionId="RepeatStep">
                                                                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup"/>
                                                                                                                                                            </item>
                                                                                                                                                        </item>
                                                                                                                                                    </eventHandlers>
                                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                                </item>
                                                                                                                                            </nestedSteps>
                                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                                <item guid="ca2ba80b-98af-42d8-80bf-b523edb9b032" action="comment" useFieldsInCommand="false">
                                                                                                                                    <command>
                                                                                                                                        <body>console exit</body>
                                                                                                                                    </command>
                                                                                                                                    <nestedSteps>
                                                                                                                                        <item guid="736821c0-e6b4-4fba-8e30-bcca7f29e0b5" action="consoleExit" session="arista_lepton_CN" useFieldsInCommand="false">
                                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                                        </item>
                                                                                                                                    </nestedSteps>
                                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                                </item>
                                                                                                                            </nestedSteps>
                                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                                <item guid="910a6b97-df98-4094-a551-7a301899bb68" action="comment" useFieldsInCommand="false">
                                                                                                                    <command>
                                                                                                                        <body>close session</body>
                                                                                                                    </command>
                                                                                                                    <nestedSteps>
                                                                                                                        <item guid="b00b3f9e-c822-4308-ac02-afb4216ce577" action="close" session="arista_lepton_CN">
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                        <item guid="8ad73e34-30bb-40b5-9289-962564fa876c" action="close" session="lepton_CN">
                                                                                                                            <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                                                        </item>
                                                                                                                    </nestedSteps>
                                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                                </item>
                                                                                                            </nestedSteps>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                                <item guid="abac3dcd-dad4-4fd1-a414-5864b3d70e82" action="comment" useFieldsInCommand="false">
                                                                                                    <command>
                                                                                                        <body>Reinit dicts</body>
                                                                                                    </command>
                                                                                                    <nestedSteps>
                                                                                                        <item guid="b4f67cd8-b79b-4dc2-8ea7-5ef9cf035bf6" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>device_CN_ports_per_lag=[]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                        <item guid="a5a80819-2077-49cd-9d46-187d98958a68" action="eval" useFieldsInCommand="false">
                                                                                                            <command>
                                                                                                                <body>conn_device_CN_ports_per_lag=[]</body>
                                                                                                            </command>
                                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                        </item>
                                                                                                    </nestedSteps>
                                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                </item>
                                                                                            </nestedSteps>
                                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        </item>
                                                                                    </nestedSteps>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                        <item guid="a5556967-aa74-4871-93a1-357b16f5cbf1" action="comment" useFieldsInCommand="false">
                                                                            <command>
                                                                                <body>Discover and update the LAG ports</body>
                                                                            </command>
                                                                            <nestedSteps>
                                                                                <item guid="b5ab1ab3-7b4a-40c2-bf81-ca0abd6b39e0" action="open" session="fortigateDiscover" useFieldsInCommand="false">
                                                                                    <command>
                                                                                        <body>project://Fortigate_console/session_profiles/console.ffsp</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.OpenStepPropertyGroup">
                                                                                        <stepProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                            <completionProperties>
                                                                                                <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                            </completionProperties>
                                                                                        </stepProperties>
                                                                                        <sessionProperties type="com.fnfr.svt.applications.telnet.documents.TelnetSessionProperties">
                                                                                            <ipAddress inherit="false">[device_console_ip]</ipAddress>
                                                                                            <port inherit="false">[device_console]</port>
                                                                                        </sessionProperties>
                                                                                        <sessionClass type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                        <sessionVersion type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                    </applicationProperties>
                                                                                </item>
                                                                                <item guid="8dbad5f1-8101-4d32-a6f1-f20428f42098" action="POST" session="velocity">
                                                                                    <command>
                                                                                        <body>/velocity/api/inventory/v16/device/[device_id]/action?type=discover</body>
                                                                                    </command>
                                                                                    <postProcessing>
                                                                                        <analysisRules>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="none">
                                                                                                    <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="message">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                                                        <message> Waiting for discover operation on [device]</message>
                                                                                                        <tag sub="false" defaultValue=""/>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                        </analysisRules>
                                                                                    </postProcessing>
                                                                                    <applicationProperties type="com.fnfr.svt.adapter.automation.tools.common.documents.TransferableDocumentObject" transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.restful.RESTfulInvokeProperties" bodyType.inherit="false" action="/velocity/api/inventory/v16/device/[device_id]/action?type=discover" action.inherit="false" includeHttpHeaders.inherit="false">
                                                                                        <authentication transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.AuthenticationProperties" acceptAllCertificates="true" acceptAllCertificates.inherit="false"/>
                                                                                        <httpHeader inherit="false" transferableToolId="com.fnfr.itest.applications.webservices.restful">
                                                                                            <memberClasses>
                                                                                                <item>com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry</item>
                                                                                            </memberClasses>
                                                                                            <item transferableToolId="com.fnfr.itest.applications.webservices.restful" transferableType="com.fnfr.itest.applications.webservices.properties.HTTPHeaderEntry"/>
                                                                                        </httpHeader>
                                                                                    </applicationProperties>
                                                                                </item>
                                                                                <item guid="287515cf-854e-43ff-8adc-c3e9ee79b6ff" action="sleep">
                                                                                    <command>
                                                                                        <body>10</body>
                                                                                    </command>
                                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                </item>
                                                                                <item guid="73957af3-8741-4dbe-94f4-fb4972a2dd30" action="command" session="fortigateDiscover">
                                                                                    <postProcessing>
                                                                                        <analysisRules>
                                                                                            <item>
                                                                                                <extractorInfo extractorType="query">
                                                                                                    <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup" declareNoMatchIssue="false">
                                                                                                        <query>promptName()</query>
                                                                                                    </extractorProperties>
                                                                                                </extractorInfo>
                                                                                                <processorInfo ruleType="assert">
                                                                                                    <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                                                        <expression>str(value) == &quot;prompt1&quot; </expression>
                                                                                                        <actionsWhenTrue>
                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                                                                    <message>For &quot;[device]&quot;: discover operation was successfully</message>
                                                                                                                </actionProperties>
                                                                                                            </item>
                                                                                                            <item actionId="PassTestIfNotAlreadyFailed">
                                                                                                                <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                                                            </item>
                                                                                                        </actionsWhenTrue>
                                                                                                        <actionsWhenFalse>
                                                                                                            <item actionId="DeclareExecutionIssue">
                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="Warning">
                                                                                                                    <message>--- discover operation is still in progress...</message>
                                                                                                                </actionProperties>
                                                                                                            </item>
                                                                                                            <item actionId="RepeatStep">
                                                                                                                <actionProperties type="com.fnfr.svt.execution.builtin.actions.RepeatStepPropertyGroup" maxRepeatCount="100" delayBetweenRepeats="5.0"/>
                                                                                                            </item>
                                                                                                        </actionsWhenFalse>
                                                                                                    </ruleProperties>
                                                                                                </processorInfo>
                                                                                            </item>
                                                                                        </analysisRules>
                                                                                    </postProcessing>
                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties">
                                                                                        <lineTerminator inherit="false">SLASH_R</lineTerminator>
                                                                                        <promptProperties>
                                                                                            <stepPrompts>
                                                                                                <item name="prompt1" MatchMethod="WILDCARD">
                                                                                                    <Content sub="true">* login:</Content>
                                                                                                </item>
                                                                                                <item name="prompt2" MatchMethod="WILDCARD" TypeOfPrompt="PASSWORD">
                                                                                                    <Content sub="true">* #</Content>
                                                                                                </item>
                                                                                                <item name="prompt3">
                                                                                                    <Content>Password:</Content>
                                                                                                </item>
                                                                                                <item name="prompt4">
                                                                                                    <Content>--More-- </Content>
                                                                                                    <MoreNextCommand> \\r</MoreNextCommand>
                                                                                                </item>
                                                                                                <item name="prompt5">
                                                                                                    <Content>Do you want to continue? (y/n)</Content>
                                                                                                </item>
                                                                                                <item name="prompt6" MatchMethod="WILDCARD">
                                                                                                    <Content sub="true">* (*) #</Content>
                                                                                                </item>
                                                                                                <item name="prompt7" MatchMethod="WILDCARD">
                                                                                                    <Content sub="true">*:</Content>
                                                                                                </item>
                                                                                                <item name="prompt8" MatchMethod="WILDCARD">
                                                                                                    <Content sub="true">*</Content>
                                                                                                </item>
                                                                                            </stepPrompts>
                                                                                        </promptProperties>
                                                                                        <completionProperties promptLearnUserResponseTime="60" promptLearnUserResponseTime.inherit="false">
                                                                                            <completeWhen inherit="false">AUTO_OR_IDLE</completeWhen>
                                                                                        </completionProperties>
                                                                                    </applicationProperties>
                                                                                    <advancedProperties defaultSessionProfile="application:com.fnfr.svt.applications.telnet"/>
                                                                                </item>
                                                                                <item guid="cdbb5923-5ccc-4fa5-9d84-4b7a266471e9" action="close" session="fortigateDiscover">
                                                                                    <applicationProperties type="com.fnfr.svt.editors.terminal.documents.StepDefaultProperties"/>
                                                                                </item>
                                                                            </nestedSteps>
                                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                        </item>
                                                                    </nestedSteps>
                                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                </item>
                                                            </nestedSteps>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                                <item guid="fb8028de-8929-47b0-9e3a-f96e414b6c82" action="comment" useFieldsInCommand="false">
                                                    <command>
                                                        <body>Reinit dicts</body>
                                                    </command>
                                                    <nestedSteps>
                                                        <item guid="b5ad6205-55eb-4d59-ad8c-d7e89a356ab6" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_lag_ports=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="73528746-0dce-482b-84b1-7998300bf419" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_lag_FGT_ports=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="72d5b5e3-93e1-4995-8557-73993d16c536" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_lag_CN_ports=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="5e218ce9-ac77-465f-aa6d-4f98e268cd68" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>conn_port_names=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="1f596b23-a9a6-4272-9092-6f1b54914322" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>conn_port_FGT_names=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="358091da-3602-44ad-9644-1fec62858ff7" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>conn_port_CN_names=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="f7b0d5a4-4954-403b-9be0-947eda2c4a6e" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>conn_device_names=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="2559447f-2130-403a-8464-60e7d12f58b3" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>conn_device_FGT_names=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="7f1e7fbc-997b-406f-b4f0-f2e18ca34ade" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>conn_device_CN_names=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="22d03d7a-937a-4871-995a-e9a2d42d8be8" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_topology_port_ids=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="8f52a821-ccec-4b07-9f6e-3acdec3c161e" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_ports=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="f900b7c9-4d8c-4e19-9557-0860463b9175" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_FGT_ports=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="e3903cff-4577-4af5-b2e6-84369c6c33de" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_CN_ports=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="01d4b281-878f-4a67-84fa-8fb08d875aaf" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_name_port=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="3f71a6e9-b396-4c8b-9fce-ccb53a28e754" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_FGT_name_port=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="c11dcb19-d412-4fd6-a91f-ea559bcbfc4a" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_CN_name_port=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="a3cfe1d9-b7bf-4503-af9f-4c0115945d71" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_ports_per_lag=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="5c707ff0-89a8-4fc9-b5f4-ee5805176446" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_FGT_ports_per_lag=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="c127a3c4-662e-4b77-8244-17589629cd5e" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>device_CN_ports_per_lag=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="b503ebba-18d4-4ea8-bf88-cd035aa16fa6" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>conn_device_FGT_ports_per_lag=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                        <item guid="e47aac00-fcb0-4613-9e7e-4c94e8bc1712" action="eval" useFieldsInCommand="false">
                                                            <command>
                                                                <body>conn_device_CN_ports_per_lag=[]</body>
                                                            </command>
                                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                        </item>
                                                    </nestedSteps>
                                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                </item>
                                            </nestedSteps>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                        <item guid="b67786d3-7037-4fe2-89fa-fbbcfae06a03" action="else" useFieldsInCommand="false">
                            <nestedSteps>
                                <item guid="567569d6-e3bf-4e71-8596-ce5eec86ffc5" action="comment" useFieldsInCommand="false">
                                    <command>
                                        <body>skip operation</body>
                                    </command>
                                    <nestedSteps>
                                        <item guid="8fb36b8c-0923-4173-b78c-67ed3b83090b" action="eval" useFieldsInCommand="false">
                                            <command>
                                                <body>print(&quot;There are no LAG connections in topology&quot;)</body>
                                            </command>
                                            <postProcessing>
                                                <analysisRules>
                                                    <item>
                                                        <extractorInfo extractorType="none">
                                                            <extractorProperties type="com.fnfr.svt.documents.EmptyExtractorPropertyGroup"/>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="message">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.MessageProcessorPropertyGroup" severity="Information">
                                                                <message> For reservation &quot;[reservationId]&quot; checking LAG connections</message>
                                                                <tag sub="false" defaultValue=""/>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                    <item>
                                                        <extractorInfo extractorType="query">
                                                            <extractorProperties type="com.fnfr.svt.mapping.execution.extractors.QueryDataExtractorPropertyGroup">
                                                                <query>isEmpty()</query>
                                                            </extractorProperties>
                                                        </extractorInfo>
                                                        <processorInfo ruleType="assert">
                                                            <ruleProperties type="com.fnfr.svt.execution.builtin.processors.AssertionPropertyGroup">
                                                                <expression>str(value) == &quot;false&quot; </expression>
                                                                <actionsWhenTrue>
                                                                    <item actionId="DeclareExecutionIssue">
                                                                        <actionProperties type="com.fnfr.svt.execution.builtin.actions.ExecutionIssuePropertyGroup" severity="OK">
                                                                            <message>--- There are no LAG connections in topology, skip operation ...</message>
                                                                        </actionProperties>
                                                                    </item>
                                                                    <item actionId="PassTestIfNotAlreadyFailed">
                                                                        <actionProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                                                    </item>
                                                                </actionsWhenTrue>
                                                            </ruleProperties>
                                                        </processorInfo>
                                                    </item>
                                                </analysisRules>
                                            </postProcessing>
                                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                        </item>
                                    </nestedSteps>
                                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                                </item>
                            </nestedSteps>
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
                <item guid="53e1a4c6-1cf8-4155-9e3b-44b7d1ce861c" action="comment" useFieldsInCommand="false">
                    <command>
                        <body>Close velocity session</body>
                    </command>
                    <nestedSteps>
                        <item guid="f31647c0-7bf5-4d3a-92e2-16f87924f8fb" action="close" session="velocity">
                            <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                        </item>
                    </nestedSteps>
                    <applicationProperties type="com.fnfr.svt.documents.EmptyPropertyGroup"/>
                </item>
            </steps>
        </item>
    </procedures>
</testCase>
